apiVersion: v1
data:
  script: |
    IiIiCkNvcHlyaWdodCAyMDIwIFRoZSBSb29rIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQu
    CgpMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxp
    Y2Vuc2UiKTsKeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3
    aXRoIHRoZSBMaWNlbnNlLgpZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQK
    CiAgICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgpVbmxl
    c3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNv
    ZnR3YXJlCmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFu
    ICJBUyBJUyIgQkFTSVMsCldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBL
    SU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgpTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBz
    cGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCmxpbWl0YXRpb25zIHVu
    ZGVyIHRoZSBMaWNlbnNlLgoiIiIKCmltcG9ydCBlcnJubwppbXBvcnQgc3lzCmltcG9ydCBqc29u
    CmltcG9ydCBhcmdwYXJzZQppbXBvcnQgcmUKaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IGhtYWMK
    aW1wb3J0IGNvbmZpZ3BhcnNlcgpmcm9tIGhhc2hsaWIgaW1wb3J0IHNoYTEgYXMgc2hhCmZyb20g
    b3MgaW1wb3J0IGxpbmVzZXAgYXMgTElORVNFUApmcm9tIG9zIGltcG9ydCBwYXRoCmZyb20gZW1h
    aWwudXRpbHMgaW1wb3J0IGZvcm1hdGRhdGUKaW1wb3J0IHJlcXVlc3RzCmZyb20gcmVxdWVzdHMu
    YXV0aCBpbXBvcnQgQXV0aEJhc2UKZnJvbSBpbyBpbXBvcnQgU3RyaW5nSU8KZnJvbSB1cmxsaWIu
    cGFyc2UgaW1wb3J0IHVybHBhcnNlCmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCB1cmxlbmNvZGUg
    YXMgdXJsZW5jb2RlCmZyb20gaXBhZGRyZXNzIGltcG9ydCBpcF9hZGRyZXNzCmZyb20gaXBhZGRy
    ZXNzIGltcG9ydCBJUHY0QWRkcmVzcwpmcm9tIGJhc2U2NCBpbXBvcnQgZW5jb2RlYnl0ZXMgYXMg
    ZW5jb2Rlc3RyaW5nCgpNb2R1bGVOb3RGb3VuZEVycm9yID0gSW1wb3J0RXJyb3IKCnRyeToKICAg
    IGltcG9ydCByYWRvcwpleGNlcHQgTW9kdWxlTm90Rm91bmRFcnJvciBhcyBub01vZEVycjoKICAg
    IHByaW50KGYiRXJyb3I6IHtub01vZEVycn1cbkV4aXRpbmcgdGhlIHNjcmlwdC4uLiIpCiAgICBz
    eXMuZXhpdCgxKQoKdHJ5OgogICAgaW1wb3J0IHJiZApleGNlcHQgTW9kdWxlTm90Rm91bmRFcnJv
    ciBhcyBub01vZEVycjoKICAgIHByaW50KGYiRXJyb3I6IHtub01vZEVycn1cbkV4aXRpbmcgdGhl
    IHNjcmlwdC4uLiIpCiAgICBzeXMuZXhpdCgxKQoKCmNsYXNzIEV4ZWN1dGlvbkZhaWx1cmVFeGNl
    cHRpb24oRXhjZXB0aW9uKToKICAgIHBhc3MKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
    IyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIyMjIyMjIyMjIyMjIyMjIER1bW15UmFkb3MgIyMjIyMj
    IyMjIyMjIyMjIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
    IyMjIwojIHRoaXMgaXMgbWFpbmx5IGZvciB0ZXN0aW5nIGFuZCBjb3VsZCBiZSB1c2VkIHdoZXJl
    ICdyYWRvcycgaXMgbm90IGF2YWlsYWJsZQoKCmNsYXNzIER1bW15UmFkb3Mob2JqZWN0KToKICAg
    IGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLnJldHVybl92YWwgPSAwCiAgICAgICAg
    c2VsZi5lcnJfbWVzc2FnZSA9ICIiCiAgICAgICAgc2VsZi5zdGF0ZSA9ICJjb25uZWN0ZWQiCiAg
    ICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcCA9IHt9CiAgICAgICAgc2VsZi5jbWRfbmFtZXMgPSB7
    fQogICAgICAgIHNlbGYuX2luaXRfY21kX291dHB1dF9tYXAoKQogICAgICAgIHNlbGYuZHVtbXlf
    aG9zdF9pcF9tYXAgPSB7fQoKICAgIGRlZiBfaW5pdF9jbWRfb3V0cHV0X21hcChzZWxmKToKICAg
    ICAgICBqc29uX2ZpbGVfbmFtZSA9ICJ0ZXN0LWRhdGEvY2VwaC1zdGF0dXMtb3V0IgogICAgICAg
    IHNjcmlwdF9kaXIgPSBwYXRoLmFic3BhdGgocGF0aC5kaXJuYW1lKF9fZmlsZV9fKSkKICAgICAg
    ICBjZXBoX3N0YXR1c19zdHIgPSAiIgogICAgICAgIHdpdGggb3BlbigKICAgICAgICAgICAgcGF0
    aC5qb2luKHNjcmlwdF9kaXIsIGpzb25fZmlsZV9uYW1lKSwgbW9kZT0iciIsIGVuY29kaW5nPSJV
    VEYtOCIKICAgICAgICApIGFzIGpzb25fZmlsZToKICAgICAgICAgICAgY2VwaF9zdGF0dXNfc3Ry
    ID0ganNvbl9maWxlLnJlYWQoKQogICAgICAgIHNlbGYuY21kX25hbWVzWyJmcyBscyJdID0gIiIi
    eyJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiZnMgbHMifSIiIgogICAgICAgIHNlbGYuY21k
    X25hbWVzWyJxdW9ydW1fc3RhdHVzIl0gPSAoCiAgICAgICAgICAgICIiInsiZm9ybWF0IjogImpz
    b24iLCAicHJlZml4IjogInF1b3J1bV9zdGF0dXMifSIiIgogICAgICAgICkKICAgICAgICBzZWxm
    LmNtZF9uYW1lc1sibWdyIHNlcnZpY2VzIl0gPSAoCiAgICAgICAgICAgICIiInsiZm9ybWF0Ijog
    Impzb24iLCAicHJlZml4IjogIm1nciBzZXJ2aWNlcyJ9IiIiCiAgICAgICAgKQogICAgICAgICMg
    YWxsIHRoZSBjb21tYW5kcyBhbmQgdGhlaXIgb3V0cHV0CiAgICAgICAgc2VsZi5jbWRfb3V0cHV0
    X21hcFtzZWxmLmNtZF9uYW1lc1siZnMgbHMiXV0gPSAoCiAgICAgICAgICAgICIiIlt7Im5hbWUi
    OiJteWZzIiwibWV0YWRhdGFfcG9vbCI6Im15ZnMtbWV0YWRhdGEiLCJtZXRhZGF0YV9wb29sX2lk
    IjoyLCJkYXRhX3Bvb2xfaWRzIjpbM10sImRhdGFfcG9vbHMiOlsibXlmcy1yZXBsaWNhdGVkIl19
    XSIiIgogICAgICAgICkKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwW3NlbGYuY21kX25hbWVz
    WyJxdW9ydW1fc3RhdHVzIl1dID0gKAogICAgICAgICAgICAiIiJ7ImVsZWN0aW9uX2Vwb2NoIjoz
    LCJxdW9ydW0iOlswXSwicXVvcnVtX25hbWVzIjpbImEiXSwicXVvcnVtX2xlYWRlcl9uYW1lIjoi
    YSIsInF1b3J1bV9hZ2UiOjE0Mzg1LCJmZWF0dXJlcyI6eyJxdW9ydW1fY29uIjoiNDU0MDEzODI5
    MjgzNjY5NjA2MyIsInF1b3J1bV9tb24iOlsia3Jha2VuIiwibHVtaW5vdXMiLCJtaW1pYyIsIm9z
    ZG1hcC1wcnVuZSIsIm5hdXRpbHVzIiwib2N0b3B1cyJdfSwibW9ubWFwIjp7ImVwb2NoIjoxLCJm
    c2lkIjoiYWY0ZTE2NzMtMGI3Mi00MDJkLTk5MGEtMjJkMjkxOWQwZjFjIiwibW9kaWZpZWQiOiIy
    MDIwLTA1LTA3VDAzOjM2OjM5LjkxODAzNVoiLCJjcmVhdGVkIjoiMjAyMC0wNS0wN1QwMzozNjoz
    OS45MTgwMzVaIiwibWluX21vbl9yZWxlYXNlIjoxNSwibWluX21vbl9yZWxlYXNlX25hbWUiOiJv
    Y3RvcHVzIiwiZmVhdHVyZXMiOnsicGVyc2lzdGVudCI6WyJrcmFrZW4iLCJsdW1pbm91cyIsIm1p
    bWljIiwib3NkbWFwLXBydW5lIiwibmF1dGlsdXMiLCJvY3RvcHVzIl0sIm9wdGlvbmFsIjpbXX0s
    Im1vbnMiOlt7InJhbmsiOjAsIm5hbWUiOiJhIiwicHVibGljX2FkZHJzIjp7ImFkZHJ2ZWMiOlt7
    InR5cGUiOiJ2MiIsImFkZHIiOiIxMC4xMTAuMjA1LjE3NDozMzAwIiwibm9uY2UiOjB9LHsidHlw
    ZSI6InYxIiwiYWRkciI6IjEwLjExMC4yMDUuMTc0OjY3ODkiLCJub25jZSI6MH1dfSwiYWRkciI6
    IjEwLjExMC4yMDUuMTc0OjY3ODkvMCIsInB1YmxpY19hZGRyIjoiMTAuMTEwLjIwNS4xNzQ6Njc4
    OS8wIiwicHJpb3JpdHkiOjAsIndlaWdodCI6MH1dfX0iIiIKICAgICAgICApCiAgICAgICAgc2Vs
    Zi5jbWRfb3V0cHV0X21hcFtzZWxmLmNtZF9uYW1lc1sibWdyIHNlcnZpY2VzIl1dID0gKAogICAg
    ICAgICAgICAiIiJ7ImRhc2hib2FyZCI6Imh0dHBzOi8vY2VwaC1kYXNoYm9hcmQ6ODQ0My8iLCJw
    cm9tZXRoZXVzIjoiaHR0cDovL2NlcGgtZGFzaGJvYXJkLWRiOjkyODMvIn0iIiIKICAgICAgICAp
    CiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsKICAgICAgICAgICAgIiIieyJjYXBzIjogWyJt
    b24iLCAiYWxsb3cgciwgYWxsb3cgY29tbWFuZCBxdW9ydW1fc3RhdHVzIiwgIm9zZCIsICJwcm9m
    aWxlIHJiZC1yZWFkLW9ubHksIGFsbG93IHJ3eCBwb29sPWRlZmF1bHQucmd3Lm1ldGEsIGFsbG93
    IHIgcG9vbD0ucmd3LnJvb3QsIGFsbG93IHJ3IHBvb2w9ZGVmYXVsdC5yZ3cuY29udHJvbCwgYWxs
    b3cgeCBwb29sPWRlZmF1bHQucmd3LmJ1Y2tldHMuaW5kZXgiLCAibWRzIiwgImFsbG93ICoiXSwg
    ImVudGl0eSI6ICJjbGllbnQuaGVhbHRoY2hlY2tlciIsICJmb3JtYXQiOiAianNvbiIsICJwcmVm
    aXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIn0iIiIKICAgICAgICBdID0gIiIiW3siZW50aXR5Ijoi
    Y2xpZW50LmhlYWx0aGNoZWNrZXIiLCJrZXkiOiJBUURGa2JOZWZ0NWJGUkFBVG5kTE5VU0VLcnVv
    enhpWmkzbHJkQT09IiwiY2FwcyI6eyJtb24iOiJhbGxvdyByLCBhbGxvdyBjb21tYW5kIHF1b3J1
    bV9zdGF0dXMiLCJvc2QiOiJwcm9maWxlIHJiZC1yZWFkLW9ubHksIGFsbG93IHJ3eCBwb29sPWRl
    ZmF1bHQucmd3Lm1ldGEsIGFsbG93IHIgcG9vbD0ucmd3LnJvb3QsIGFsbG93IHJ3IHBvb2w9ZGVm
    YXVsdC5yZ3cuY29udHJvbCwgYWxsb3cgeCBwb29sPWRlZmF1bHQucmd3LmJ1Y2tldHMuaW5kZXgi
    LCJtZHMiOiJhbGxvdyAqIn19XSIiIgogICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbCiAgICAg
    ICAgICAgICIiInsiY2FwcyI6IFsibW9uIiwgInByb2ZpbGUgcmJkLCBhbGxvdyBjb21tYW5kICdv
    c2QgYmxvY2tsaXN0JyIsICJvc2QiLCAicHJvZmlsZSByYmQiXSwgImVudGl0eSI6ICJjbGllbnQu
    Y3NpLXJiZC1ub2RlIiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldC1vci1j
    cmVhdGUifSIiIgogICAgICAgIF0gPSAiIiJbeyJlbnRpdHkiOiJjbGllbnQuY3NpLXJiZC1ub2Rl
    Iiwia2V5IjoiQVFCT2dyTmVIYksxQXhBQXViWUJlVjhTMVUvR1B6cTVTVmVxNmc9PSIsImNhcHMi
    OnsibW9uIjoicHJvZmlsZSByYmQsIGFsbG93IGNvbW1hbmQgJ29zZCBibG9ja2xpc3QnIiwib3Nk
    IjoicHJvZmlsZSByYmQifX1dIiIiCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsKICAgICAg
    ICAgICAgIiIieyJjYXBzIjogWyJtb24iLCAicHJvZmlsZSByYmQsIGFsbG93IGNvbW1hbmQgJ29z
    ZCBibG9ja2xpc3QnIiwgIm1nciIsICJhbGxvdyBydyIsICJvc2QiLCAicHJvZmlsZSByYmQiXSwg
    ImVudGl0eSI6ICJjbGllbnQuY3NpLXJiZC1wcm92aXNpb25lciIsICJmb3JtYXQiOiAianNvbiIs
    ICJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIn0iIiIKICAgICAgICBdID0gIiIiW3siZW50
    aXR5IjoiY2xpZW50LmNzaS1yYmQtcHJvdmlzaW9uZXIiLCJrZXkiOiJBUUJOZ3JOZTFnZXlLeEFB
    OGVrVmlSZEUraHNzNU93ZVlCa3dOZz09IiwiY2FwcyI6eyJtZ3IiOiJhbGxvdyBydyIsIm1vbiI6
    InByb2ZpbGUgcmJkLCBhbGxvdyBjb21tYW5kICdvc2QgYmxvY2tsaXN0JyIsIm9zZCI6InByb2Zp
    bGUgcmJkIn19XSIiIgogICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbCiAgICAgICAgICAgICIi
    InsiY2FwcyI6IFsibW9uIiwgImFsbG93IHIsIGFsbG93IGNvbW1hbmQgJ29zZCBibG9ja2xpc3Qn
    IiwgIm1nciIsICJhbGxvdyBydyIsICJvc2QiLCAiYWxsb3cgcncgdGFnIGNlcGhmcyAqPSoiLCAi
    bWRzIiwgImFsbG93IHJ3Il0sICJlbnRpdHkiOiAiY2xpZW50LmNzaS1jZXBoZnMtbm9kZSIsICJm
    b3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIn0iIiIKICAgICAg
    ICBdID0gIiIiW3siZW50aXR5IjoiY2xpZW50LmNzaS1jZXBoZnMtbm9kZSIsImtleSI6IkFRQk9n
    ck5lRU51bkt4QUFQQ21nRTdSNkc4RGNYbmFKMUYzMnFnPT0iLCJjYXBzIjp7Im1kcyI6ImFsbG93
    IHJ3IiwibWdyIjoiYWxsb3cgcnciLCJtb24iOiJhbGxvdyByLCBhbGxvdyBjb21tYW5kICdvc2Qg
    YmxvY2tsaXN0JyIsIm9zZCI6ImFsbG93IHJ3IHRhZyBjZXBoZnMgKj0qIn19XSIiIgogICAgICAg
    IHNlbGYuY21kX291dHB1dF9tYXBbCiAgICAgICAgICAgICIiInsiY2FwcyI6IFsibW9uIiwgImFs
    bG93IHIsIGFsbG93IGNvbW1hbmQgJ29zZCBibG9ja2xpc3QnIiwgIm1nciIsICJhbGxvdyBydyIs
    ICJvc2QiLCAiYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRhZGF0YT0qIiwgIm1kcyIsICJhbGxvdyAq
    Il0sICJlbnRpdHkiOiAiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXIiLCAiZm9ybWF0Ijog
    Impzb24iLCAicHJlZml4IjogImF1dGggZ2V0LW9yLWNyZWF0ZSJ9IiIiCiAgICAgICAgXSA9ICIi
    Ilt7ImVudGl0eSI6ImNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVyIiwia2V5IjoiQVFCT2dy
    TmVBRmdjR0JBQXZHcUtPQUQwRDN4eG1WWTBSOTEyZGc9PSIsImNhcHMiOnsibWdyIjoiYWxsb3cg
    cnciLCJtb24iOiJhbGxvdyByLCBhbGxvdyBjb21tYW5kICdvc2QgYmxvY2tsaXN0JyIsIm9zZCI6
    ImFsbG93IHJ3IHRhZyBjZXBoZnMgbWV0YWRhdGE9KiIsIm1kcyI6ImFsbG93ICoifX1dIiIiCiAg
    ICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsKICAgICAgICAgICAgIiIieyJjYXBzIjogWyJtb24i
    LCAiYWxsb3cgciwgYWxsb3cgY29tbWFuZCAnb3NkIGJsb2NrbGlzdCciLCAibWdyIiwgImFsbG93
    IHJ3IiwgIm9zZCIsICJhbGxvdyBydyB0YWcgY2VwaGZzIG1ldGFkYXRhPSoiLCAibWRzIiwgImFs
    bG93ICoiXSwgImVudGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lci1vcGVuc2hp
    ZnQtc3RvcmFnZSIsICJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3Jl
    YXRlIn0iIiIKICAgICAgICBdID0gIiIiW3siZW50aXR5IjoiY2xpZW50LmNzaS1jZXBoZnMtcHJv
    dmlzaW9uZXItb3BlbnNoaWZ0LXN0b3JhZ2UiLCJrZXkiOiJCUUJPZ3JOZUFGZ2NHQkFBdkdxS09B
    RDBEM3h4bVZZMFI5MTJkZz09IiwiY2FwcyI6eyJtZ3IiOiJhbGxvdyBydyIsIm1vbiI6ImFsbG93
    IHIsIGFsbG93IGNvbW1hbmQgJ29zZCBibG9ja2xpc3QnIiwib3NkIjoiYWxsb3cgcncgdGFnIGNl
    cGhmcyBtZXRhZGF0YT0qIiwgIm1kcyI6ImFsbG93ICoifX1dIiIiCiAgICAgICAgc2VsZi5jbWRf
    b3V0cHV0X21hcFsKICAgICAgICAgICAgIiIieyJjYXBzIjogWyJtb24iLCAiYWxsb3cgciwgYWxs
    b3cgY29tbWFuZCAnb3NkIGJsb2NrbGlzdCciLCAibWdyIiwgImFsbG93IHJ3IiwgIm9zZCIsICJh
    bGxvdyBydyB0YWcgY2VwaGZzIG1ldGFkYXRhPW15ZnMiLCAibWRzIiwgImFsbG93ICoiXSwgImVu
    dGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lci1vcGVuc2hpZnQtc3RvcmFnZS1t
    eWZzIiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUifSIi
    IgogICAgICAgIF0gPSAiIiJbeyJlbnRpdHkiOiJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25l
    ci1vcGVuc2hpZnQtc3RvcmFnZS1teWZzIiwia2V5IjoiQ1FCT2dyTmVBRmdjR0JBQXZHcUtPQUQw
    RDN4eG1WWTBSOTEyZGc9PSIsImNhcHMiOnsibWdyIjoiYWxsb3cgcnciLCJtb24iOiJhbGxvdyBy
    LCBhbGxvdyBjb21tYW5kICdvc2QgYmxvY2tsaXN0JyIsIm9zZCI6ImFsbG93IHJ3IHRhZyBjZXBo
    ZnMgbWV0YWRhdGE9bXlmcyIsIm1kcyI6ImFsbG93ICoifX1dIiIiCiAgICAgICAgc2VsZi5jbWRf
    b3V0cHV0X21hcFsKICAgICAgICAgICAgIiIieyJjYXBzIjogWyJtb24iLCAiYWxsb3cgciwgYWxs
    b3cgY29tbWFuZCBxdW9ydW1fc3RhdHVzLCBhbGxvdyBjb21tYW5kIHZlcnNpb24iLCAibWdyIiwg
    ImFsbG93IGNvbW1hbmQgY29uZmlnIiwgIm9zZCIsICJwcm9maWxlIHJiZC1yZWFkLW9ubHksIGFs
    bG93IHJ3eCBwb29sPWRlZmF1bHQucmd3Lm1ldGEsIGFsbG93IHIgcG9vbD0ucmd3LnJvb3QsIGFs
    bG93IHJ3IHBvb2w9ZGVmYXVsdC5yZ3cuY29udHJvbCwgYWxsb3cgcnggcG9vbD1kZWZhdWx0LnJn
    dy5sb2csIGFsbG93IHggcG9vbD1kZWZhdWx0LnJndy5idWNrZXRzLmluZGV4IiwgIm1kcyIsICJh
    bGxvdyAqIl0sICJlbnRpdHkiOiAiY2xpZW50LmhlYWx0aGNoZWNrZXIiLCAiZm9ybWF0IjogImpz
    b24iLCAicHJlZml4IjogImF1dGggZ2V0LW9yLWNyZWF0ZSJ9IiIiCiAgICAgICAgXSA9ICIiIlt7
    ImVudGl0eSI6ImNsaWVudC5oZWFsdGhjaGVja2VyIiwia2V5IjoiQVFERmtiTmVmdDViRlJBQVRu
    ZExOVVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsibW9uIjogImFsbG93IHIsIGFsbG93IGNv
    bW1hbmQgcXVvcnVtX3N0YXR1cywgYWxsb3cgY29tbWFuZCB2ZXJzaW9uIiwgIm1nciI6ICJhbGxv
    dyBjb21tYW5kIGNvbmZpZyIsICJvc2QiOiAicHJvZmlsZSByYmQtcmVhZC1vbmx5LCBhbGxvdyBy
    d3ggcG9vbD1kZWZhdWx0LnJndy5tZXRhLCBhbGxvdyByIHBvb2w9LnJndy5yb290LCBhbGxvdyBy
    dyBwb29sPWRlZmF1bHQucmd3LmNvbnRyb2wsIGFsbG93IHJ4IHBvb2w9ZGVmYXVsdC5yZ3cubG9n
    LCBhbGxvdyB4IHBvb2w9ZGVmYXVsdC5yZ3cuYnVja2V0cy5pbmRleCIsIm1kcyI6ImFsbG93ICoi
    fX1dIiIiCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsKICAgICAgICAgICAgIiIieyJjYXBz
    IjogWyJtb24iLCAiYWxsb3cgciwgYWxsb3cgY29tbWFuZCBxdW9ydW1fc3RhdHVzLCBhbGxvdyBj
    b21tYW5kIHZlcnNpb24iLCAibWdyIiwgImFsbG93IGNvbW1hbmQgY29uZmlnIiwgIm9zZCIsICJw
    cm9maWxlIHJiZC1yZWFkLW9ubHksIGFsbG93IHJ3eCBwb29sPWRlZmF1bHQucmd3Lm1ldGEsIGFs
    bG93IHIgcG9vbD0ucmd3LnJvb3QsIGFsbG93IHJ3IHBvb2w9ZGVmYXVsdC5yZ3cuY29udHJvbCwg
    YWxsb3cgcnggcG9vbD1kZWZhdWx0LnJndy5sb2csIGFsbG93IHggcG9vbD1kZWZhdWx0LnJndy5i
    dWNrZXRzLmluZGV4IiwgIm1kcyIsICJhbGxvdyAqIl0sICJlbnRpdHkiOiAiY2xpZW50LmhlYWx0
    aGNoZWNrZXIiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggY2FwcyJ9IiIiCiAg
    ICAgICAgXSA9ICIiIlt7ImVudGl0eSI6ImNsaWVudC5oZWFsdGhjaGVja2VyIiwia2V5IjoiQVFE
    RmtiTmVmdDViRlJBQVRuZExOVVNSS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsibW9uIjogImFs
    bG93IHIsIGFsbG93IGNvbW1hbmQgcXVvcnVtX3N0YXR1cywgYWxsb3cgY29tbWFuZCB2ZXJzaW9u
    IiwgIm1nciI6ICJhbGxvdyBjb21tYW5kIGNvbmZpZyIsICJvc2QiOiAicHJvZmlsZSByYmQtcmVh
    ZC1vbmx5LCBhbGxvdyByd3ggcG9vbD1kZWZhdWx0LnJndy5tZXRhLCBhbGxvdyByIHBvb2w9LnJn
    dy5yb290LCBhbGxvdyBydyBwb29sPWRlZmF1bHQucmd3LmNvbnRyb2wsIGFsbG93IHJ4IHBvb2w9
    ZGVmYXVsdC5yZ3cubG9nLCBhbGxvdyB4IHBvb2w9ZGVmYXVsdC5yZ3cuYnVja2V0cy5pbmRleCIs
    Im1kcyI6ImFsbG93ICoifX1dIiIiCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsiIiJ7ImZv
    cm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJtZ3Igc2VydmljZXMifSIiIl0gPSAoCiAgICAgICAg
    ICAgICIiInsiZGFzaGJvYXJkIjogImh0dHA6Ly9yb29rLWNlcGgtbWdyLWEtNTdjZjlmODRiYy1m
    NGpubDo3MDAwLyIsICJwcm9tZXRoZXVzIjogImh0dHA6Ly9yb29rLWNlcGgtbWdyLWEtNTdjZjlm
    ODRiYy1mNGpubDo5MjgzLyJ9IiIiCiAgICAgICAgKQogICAgICAgIHNlbGYuY21kX291dHB1dF9t
    YXBbCiAgICAgICAgICAgICIiInsiZW50aXR5IjogImNsaWVudC5oZWFsdGhjaGVja2VyIiwgImZv
    cm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldCJ9IiIiCiAgICAgICAgXSA9ICIiInsi
    ZGFzaGJvYXJkIjogImh0dHA6Ly9yb29rLWNlcGgtbWdyLWEtNTdjZjlmODRiYy1mNGpubDo3MDAw
    LyIsICJwcm9tZXRoZXVzIjogImh0dHA6Ly9yb29rLWNlcGgtbWdyLWEtNTdjZjlmODRiYy1mNGpu
    bDo5MjgzLyJ9IiIiCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsKICAgICAgICAgICAgIiIi
    eyJlbnRpdHkiOiAiY2xpZW50LmhlYWx0aGNoZWNrZXIiLCAiZm9ybWF0IjogImpzb24iLCAicHJl
    Zml4IjogImF1dGggZ2V0In0iIiIKICAgICAgICBdID0gIiIiW3siZW50aXR5IjoiY2xpZW50Lmhl
    YWx0aGNoZWNrZXIiLCJrZXkiOiJBUURGa2JOZWZ0NWJGUkFBVG5kTE5VU0VLcnVvenhpWmkzbHJk
    QT09IiwiY2FwcyI6eyJtb24iOiAiYWxsb3cgciwgYWxsb3cgY29tbWFuZCBxdW9ydW1fc3RhdHVz
    LCBhbGxvdyBjb21tYW5kIHZlcnNpb24iLCAibWdyIjogImFsbG93IGNvbW1hbmQgY29uZmlnIiwg
    Im9zZCI6ICJwcm9maWxlIHJiZC1yZWFkLW9ubHksIGFsbG93IHJ3eCBwb29sPWRlZmF1bHQucmd3
    Lm1ldGEsIGFsbG93IHIgcG9vbD0ucmd3LnJvb3QsIGFsbG93IHJ3IHBvb2w9ZGVmYXVsdC5yZ3cu
    Y29udHJvbCwgYWxsb3cgcnggcG9vbD1kZWZhdWx0LnJndy5sb2csIGFsbG93IHggcG9vbD1kZWZh
    dWx0LnJndy5idWNrZXRzLmluZGV4IiwibWRzIjoiYWxsb3cgKiJ9fV0iIiIKICAgICAgICBzZWxm
    LmNtZF9vdXRwdXRfbWFwWwogICAgICAgICAgICAiIiJ7ImVudGl0eSI6ICJjbGllbnQuY3NpLWNl
    cGhmcy1ub2RlIiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldCJ9IiIiCiAg
    ICAgICAgXSA9ICIiIltdIiIiCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsKICAgICAgICAg
    ICAgIiIieyJlbnRpdHkiOiAiY2xpZW50LmNzaS1yYmQtbm9kZSIsICJmb3JtYXQiOiAianNvbiIs
    ICJwcmVmaXgiOiAiYXV0aCBnZXQifSIiIgogICAgICAgIF0gPSAiIiJbXSIiIgogICAgICAgIHNl
    bGYuY21kX291dHB1dF9tYXBbCiAgICAgICAgICAgICIiInsiZW50aXR5IjogImNsaWVudC5jc2kt
    cmJkLXByb3Zpc2lvbmVyIiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldCJ9
    IiIiCiAgICAgICAgXSA9ICIiIltdIiIiCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsKICAg
    ICAgICAgICAgIiIieyJlbnRpdHkiOiAiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXIiLCAi
    Zm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0In0iIiIKICAgICAgICBdID0gIiIi
    W10iIiIKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWwogICAgICAgICAgICAiIiJ7ImVudGl0
    eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lci1vcGVuc2hpZnQtc3RvcmFnZSIsICJm
    b3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBnZXQifSIiIgogICAgICAgIF0gPSAiIiJb
    XSIiIgogICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbCiAgICAgICAgICAgICIiInsiZW50aXR5
    IjogImNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVyLW9wZW5zaGlmdC1zdG9yYWdlLW15ZnMi
    LCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0In0iIiIKICAgICAgICBdID0g
    IiIiW10iIiIKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWwogICAgICAgICAgICAiIiJ7ImVu
    dGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lciIsICJmb3JtYXQiOiAianNvbiIs
    ICJwcmVmaXgiOiAiYXV0aCBnZXQifSIiIgogICAgICAgIF0gPSAiIiJbeyJlbnRpdHkiOiJjbGll
    bnQuY3NpLWNlcGhmcy1wcm92aXNpb25lciIsImtleSI6IkFRREZrYk5lZnQ1YkZSQUFUbmRMTlVT
    RUtydW96eGlaaTNscmRBPT0iLCJjYXBzIjp7Im1vbiI6ImFsbG93IHIiLCAibWdyIjoiYWxsb3cg
    cnciLCAib3NkIjoiYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRhZGF0YT0qIiwibWRzIjoiYWxsb3cg
    KiJ9fV0iIiIKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWwogICAgICAgICAgICAiIiJ7ImNh
    cHMiOiBbIm1vbiIsICJhbGxvdyByLCBhbGxvdyBjb21tYW5kICdvc2QgYmxvY2tsaXN0JyIsICJt
    Z3IiLCAiYWxsb3cgcnciLCAib3NkIiwgImFsbG93IHJ3IHRhZyBjZXBoZnMgbWV0YWRhdGE9KiIs
    ICJtZHMiLCAiYWxsb3cgKiJdLCAiZW50aXR5IjogImNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lv
    bmVyIiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGNhcHMifSIiIgogICAgICAg
    IF0gPSAiIiJbeyJlbnRpdHkiOiJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lciIsImtleSI6
    IkFRREZrYk5lZnQ1YkZSQUFUbmRMTlVTRUtydW96eGlaaTNscmRBPT0iLCJjYXBzIjp7Im1vbiI6
    ImFsbG93IHIsICBhbGxvdyBjb21tYW5kICdvc2QgYmxvY2tsaXN0JyIsICJtZ3IiOiJhbGxvdyBy
    dyIsICJvc2QiOiJhbGxvdyBydyB0YWcgY2VwaGZzIG1ldGFkYXRhPSoiLCJtZHMiOiJhbGxvdyAq
    In19XSIiIgogICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbIiIieyJmb3JtYXQiOiAianNvbiIs
    ICJwcmVmaXgiOiAiYXV0aCBscyJ9IiIiXSA9ICgKICAgICAgICAgICAgIiIieyJhdXRoX2R1bXAi
    Olt7ImVudGl0eSI6Im1kcy5vY3Mtc3RvcmFnZWNsdXN0ZXItY2VwaGZpbGVzeXN0ZW0tYSIsImtl
    eSI6IkFRREZrYk5lZnQ1YkZSQUFUbmRMTlVTRUtydW96eGlaaTNscmRBPT0iLCJjYXBzIjp7Im1k
    cyI6ImFsbG93IiwibW9uIjoiYWxsb3cgcHJvZmlsZSBtZHMiLCJvc2QiOiJhbGxvdyAqIn19LHsi
    ZW50aXR5IjoibWRzLm9jcy1zdG9yYWdlY2x1c3Rlci1jZXBoZmlsZXN5c3RlbS1iIiwia2V5Ijoi
    QVFERmtiTmVmdDViRlJBQVRuZExOVVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsibWRzIjoi
    YWxsb3ciLCJtb24iOiJhbGxvdyBwcm9maWxlIG1kcyIsIm9zZCI6ImFsbG93ICoifX0seyJlbnRp
    dHkiOiJvc2QuMCIsImtleSI6IkFRREZrYk5lZnQ1YkZSQUFUbmRMTlVTRUtydW96eGlaaTNscmRB
    PT0iLCJjYXBzIjp7Im1nciI6ImFsbG93IHByb2ZpbGUgb3NkIiwibW9uIjoiYWxsb3cgcHJvZmls
    ZSBvc2QiLCJvc2QiOiJhbGxvdyAqIn19LHsiZW50aXR5Ijoib3NkLjEiLCJrZXkiOiJBUURGa2JO
    ZWZ0NWJGUkFBVG5kTE5VU0VLcnVvenhpWmkzbHJkQT09IiwiY2FwcyI6eyJtZ3IiOiJhbGxvdyBw
    cm9maWxlIG9zZCIsIm1vbiI6ImFsbG93IHByb2ZpbGUgb3NkIiwib3NkIjoiYWxsb3cgKiJ9fSx7
    ImVudGl0eSI6Im9zZC4yIiwia2V5IjoiQVFERmtiTmVmdDViRlJBQVRuZExOVVNFS3J1b3p4aVpp
    M2xyZEE9PSIsImNhcHMiOnsibWdyIjoiYWxsb3cgcHJvZmlsZSBvc2QiLCJtb24iOiJhbGxvdyBw
    cm9maWxlIG9zZCIsIm9zZCI6ImFsbG93ICoifX0seyJlbnRpdHkiOiJjbGllbnQuYWRtaW4iLCJr
    ZXkiOiJBUURGa2JOZWZ0NWJGUkFBVG5kTE5VU0VLcnVvenhpWmkzbHJkQT09IiwiY2FwcyI6eyJt
    ZHMiOiJhbGxvdyAqIiwibWdyIjoiYWxsb3cgKiIsIm1vbiI6ImFsbG93ICoiLCJvc2QiOiJhbGxv
    dyAqIn19LHsiZW50aXR5IjoiY2xpZW50LmJvb3RzdHJhcC1tZHMiLCJrZXkiOiJBUURGa2JOZWZ0
    NWJGUkFBVG5kTE5VU0VLcnVvenhpWmkzbHJkQT09IiwiY2FwcyI6eyJtb24iOiJhbGxvdyBwcm9m
    aWxlIGJvb3RzdHJhcC1tZHMifX0seyJlbnRpdHkiOiJjbGllbnQuYm9vdHN0cmFwLW1nciIsImtl
    eSI6IkFRREZrYk5lZnQ1YkZSQUFUbmRMTlVTRUtydW96eGlaaTNscmRBPT0iLCJjYXBzIjp7Im1v
    biI6ImFsbG93IHByb2ZpbGUgYm9vdHN0cmFwLW1nciJ9fSx7ImVudGl0eSI6ImNsaWVudC5ib290
    c3RyYXAtb3NkIiwia2V5IjoiQVFERmtiTmVmdDViRlJBQVRuZExOVVNFS3J1b3p4aVppM2xyZEE9
    PSIsImNhcHMiOnsibW9uIjoiYWxsb3cgcHJvZmlsZSBib290c3RyYXAtb3NkIn19LHsiZW50aXR5
    IjoiY2xpZW50LmJvb3RzdHJhcC1yYmQiLCJrZXkiOiJBUURGa2JOZWZ0NWJGUkFBVG5kTE5VU0VL
    cnVvenhpWmkzbHJkQT09IiwiY2FwcyI6eyJtb24iOiJhbGxvdyBwcm9maWxlIGJvb3RzdHJhcC1y
    YmQifX0seyJlbnRpdHkiOiJjbGllbnQuYm9vdHN0cmFwLXJiZC1taXJyb3IiLCJrZXkiOiJBUURG
    a2JOZWZ0NWJGUkFBVG5kTE5VU0VLcnVvenhpWmkzbHJkQT09IiwiY2FwcyI6eyJtb24iOiJhbGxv
    dyBwcm9maWxlIGJvb3RzdHJhcC1yYmQtbWlycm9yIn19LHsiZW50aXR5IjoiY2xpZW50LmJvb3Rz
    dHJhcC1yZ3ciLCJrZXkiOiJBUURGa2JOZWZ0NWJGUkFBVG5kTE5VU0VLcnVvenhpWmkzbHJkQT09
    IiwiY2FwcyI6eyJtb24iOiJhbGxvdyBwcm9maWxlIGJvb3RzdHJhcC1yZ3cifX0seyJlbnRpdHki
    OiJjbGllbnQuY2VwaC1leHBvcnRlciIsImtleSI6IkFRREZrYk5lZnQ1YkZSQUFUbmRMTlVTRUty
    dW96eGlaaTNscmRBPT0iLCJjYXBzIjp7Im1kcyI6ImFsbG93IHIiLCJtZ3IiOiJhbGxvdyByIiwi
    bW9uIjoiYWxsb3cgcHJvZmlsZSBjZXBoLWV4cG9ydGVyIiwib3NkIjoiYWxsb3cgciJ9fSx7ImVu
    dGl0eSI6ImNsaWVudC5jcmFzaCIsImtleSI6IkFRQ3BoWGRvVnhIS0R4QUFQR2g2TDBHU29nT1hG
    MzBMeFdtSnVBPT0iLCJjYXBzIjp7Im1nciI6ImFsbG93IHJ3IiwibW9uIjoiYWxsb3cgcHJvZmls
    ZSBjcmFzaCJ9fSx7ImVudGl0eSI6ImNsaWVudC5jc2ktY2VwaGZzLW5vZGUiLCJrZXkiOiJBUUNw
    aFhkb28vMDdBUkFBN25oai8vUnNzZG44ZVRxdVg2WkliZz09IiwiY2FwcyI6eyJtZHMiOiJhbGxv
    dyBydyIsIm1nciI6ImFsbG93IHJ3IiwibW9uIjoiYWxsb3cgciIsIm9zZCI6ImFsbG93IHJ3IHRh
    ZyBjZXBoZnMgKj0qIn19LHsiZW50aXR5IjoiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXIi
    LCJrZXkiOiJBUUNvaFhkbzFtdXdNaEFBSkxGd3BHZlhWVFA0MDZxL0xLS3hOdz09IiwiY2FwcyI6
    eyJtZHMiOiJhbGxvdyAqIiwibWdyIjoiYWxsb3cgcnciLCJtb24iOiJhbGxvdyByLCBhbGxvdyBj
    b21tYW5kICdvc2QgYmxvY2tsaXN0JyIsIm9zZCI6ImFsbG93IHJ3IHRhZyBjZXBoZnMgbWV0YWRh
    dGE9KiJ9fSx7ImVudGl0eSI6ImNsaWVudC5jc2ktcmJkLW5vZGUiLCJrZXkiOiJBUUNvaFhkb0E0
    MlpLQkFBNzNEb3BCZVVOT0tCakRwSG45MDBBdz09IiwiY2FwcyI6eyJtZ3IiOiJhbGxvdyBydyIs
    Im1vbiI6InByb2ZpbGUgcmJkIiwib3NkIjoicHJvZmlsZSByYmQifX0seyJlbnRpdHkiOiJjbGll
    bnQuY3NpLXJiZC1wcm92aXNpb25lciIsImtleSI6IkFRREZrYk5lZnQ1YkZSQUFUbmRMTlVTRUty
    dW96eGlaaTNscmRBPT0iLCJjYXBzIjp7Im1nciI6ImFsbG93IHJ3IiwibW9uIjoicHJvZmlsZSBy
    YmQsIGFsbG93IGNvbW1hbmQgJ29zZCBibG9ja2xpc3QnIiwib3NkIjoicHJvZmlsZSByYmQifX0s
    eyJlbnRpdHkiOiJjbGllbnQucmJkLW1pcnJvci1wZWVyIiwia2V5IjoiQVFERmtiTmVmdDViRlJB
    QVRuZExOVVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsibW9uIjoicHJvZmlsZSByYmQtbWly
    cm9yLXBlZXIiLCJvc2QiOiJwcm9maWxlIHJiZCJ9fSx7ImVudGl0eSI6ImNsaWVudC5yZ3cub2Nz
    LnN0b3JhZ2VjbHVzdGVyLmNlcGhvYmplY3RzdG9yZS5hIiwia2V5IjoiQVFERmtiTmVmdDViRlJB
    QVRuZExOVVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsibW9uIjoiYWxsb3cgcnciLCJvc2Qi
    OiJhbGxvdyByd3gifX0seyJlbnRpdHkiOiJtZ3IuYSIsImtleSI6IkFRREZrYk5lZnQ1YkZSQUFU
    bmRMTlVTRUtydW96eGlaaTNscmRBPT0iLCJjYXBzIjp7Im1kcyI6ImFsbG93ICoiLCJtb24iOiJh
    bGxvdyBwcm9maWxlIG1nciIsIm9zZCI6ImFsbG93ICoifX0seyJlbnRpdHkiOiJtZ3IuYiIsImtl
    eSI6IkFRREZrYk5lZnQ1YkZSQUFUbmRMTlVTRUtydW96eGlaaTNscmRBPT0iLCJjYXBzIjp7Im1k
    cyI6ImFsbG93ICoiLCJtb24iOiJhbGxvdyBwcm9maWxlIG1nciIsIm9zZCI6ImFsbG93ICoifX1d
    fSIiIgogICAgICAgICkKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWyd7ImZvcm1hdCI6ICJq
    c29uIiwgInByZWZpeCI6ICJzdGF0dXMifSddID0gY2VwaF9zdGF0dXNfc3RyCgogICAgZGVmIHNo
    dXRkb3duKHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgZ2V0X2ZzaWQoc2VsZik6CiAgICAg
    ICAgcmV0dXJuICJhZjRlMTY3My0wYjcyLTQwMmQtOTkwYS0yMmQyOTE5ZDBmMWMiCgogICAgZGVm
    IGNvbmZfcmVhZF9maWxlKHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgY29ubmVjdChzZWxm
    KToKICAgICAgICBwYXNzCgogICAgZGVmIHBvb2xfZXhpc3RzKHNlbGYsIHBvb2xfbmFtZSk6CiAg
    ICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgbW9uX2NvbW1hbmQoc2VsZiwgY21kLCBvdXQpOgog
    ICAgICAgIGpzb25fY21kID0ganNvbi5sb2FkcyhjbWQpCiAgICAgICAganNvbl9jbWRfc3RyID0g
    anNvbi5kdW1wcyhqc29uX2NtZCwgc29ydF9rZXlzPVRydWUpCiAgICAgICAgY21kX291dHB1dCA9
    IHNlbGYuY21kX291dHB1dF9tYXBbanNvbl9jbWRfc3RyXQogICAgICAgIHJldHVybiBzZWxmLnJl
    dHVybl92YWwsIGNtZF9vdXRwdXQsIHN0cihzZWxmLmVycl9tZXNzYWdlLmVuY29kZSgidXRmLTgi
    KSkKCiAgICBkZWYgX2NvbnZlcnRfaG9zdG5hbWVfdG9faXAoc2VsZiwgaG9zdF9uYW1lKToKICAg
    ICAgICBpcF9yZWdfeCA9IHJlLmNvbXBpbGUociJcZHsxLDN9LlxkezEsM30uXGR7MSwzfS5cZHsx
    LDN9IikKICAgICAgICAjIGlmIHByb3ZpZGVkIGhvc3QgaXMgZGlyZWN0bHkgYW4gSVAgYWRkcmVz
    cywgcmV0dXJuIHRoZSBzYW1lCiAgICAgICAgaWYgaXBfcmVnX3gubWF0Y2goaG9zdF9uYW1lKToK
    ICAgICAgICAgICAgcmV0dXJuIGhvc3RfbmFtZQogICAgICAgIGltcG9ydCByYW5kb20KCiAgICAg
    ICAgaG9zdF9pcCA9IHNlbGYuZHVtbXlfaG9zdF9pcF9tYXAuZ2V0KGhvc3RfbmFtZSwgIiIpCiAg
    ICAgICAgaWYgbm90IGhvc3RfaXA6CiAgICAgICAgICAgIGhvc3RfaXAgPSBmIjE3Mi45LntyYW5k
    b20ucmFuZGludCgwLCAyNTQpfS57cmFuZG9tLnJhbmRpbnQoMCwgMjU0KX0iCiAgICAgICAgICAg
    IHNlbGYuZHVtbXlfaG9zdF9pcF9tYXBbaG9zdF9uYW1lXSA9IGhvc3RfaXAKICAgICAgICBkZWwg
    cmFuZG9tCiAgICAgICAgcmV0dXJuIGhvc3RfaXAKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBS
    YWRvcyhjb25mZmlsZT1Ob25lKToKICAgICAgICByZXR1cm4gRHVtbXlSYWRvcygpCgoKY2xhc3Mg
    UzNBdXRoKEF1dGhCYXNlKToKICAgICIiIkF0dGFjaGVzIEFXUyBBdXRoZW50aWNhdGlvbiB0byB0
    aGUgZ2l2ZW4gUmVxdWVzdCBvYmplY3QuIiIiCgogICAgc2VydmljZV9iYXNlX3VybCA9ICJzMy5h
    bWF6b25hd3MuY29tIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhY2Nlc3Nfa2V5LCBzZWNyZXRf
    a2V5LCBzZXJ2aWNlX3VybD1Ob25lKToKICAgICAgICBpZiBzZXJ2aWNlX3VybDoKICAgICAgICAg
    ICAgc2VsZi5zZXJ2aWNlX2Jhc2VfdXJsID0gc2VydmljZV91cmwKICAgICAgICBzZWxmLmFjY2Vz
    c19rZXkgPSBzdHIoYWNjZXNzX2tleSkKICAgICAgICBzZWxmLnNlY3JldF9rZXkgPSBzdHIoc2Vj
    cmV0X2tleSkKCiAgICBkZWYgX19jYWxsX18oc2VsZiwgcik6CiAgICAgICAgIyBDcmVhdGUgZGF0
    ZSBoZWFkZXIgaWYgaXQgaXMgbm90IGNyZWF0ZWQgeWV0LgogICAgICAgIGlmICJkYXRlIiBub3Qg
    aW4gci5oZWFkZXJzIGFuZCAieC1hbXotZGF0ZSIgbm90IGluIHIuaGVhZGVyczoKICAgICAgICAg
    ICAgci5oZWFkZXJzWyJkYXRlIl0gPSBmb3JtYXRkYXRlKHRpbWV2YWw9Tm9uZSwgbG9jYWx0aW1l
    PUZhbHNlLCB1c2VnbXQ9VHJ1ZSkKICAgICAgICBzaWduYXR1cmUgPSBzZWxmLmdldF9zaWduYXR1
    cmUocikKICAgICAgICBzaWduYXR1cmUgPSBzaWduYXR1cmUuZGVjb2RlKCJ1dGYtOCIpCiAgICAg
    ICAgci5oZWFkZXJzWyJBdXRob3JpemF0aW9uIl0gPSBmIkFXUyB7c2VsZi5hY2Nlc3Nfa2V5fTp7
    c2lnbmF0dXJlfSIKICAgICAgICByZXR1cm4gcgoKICAgIGRlZiBnZXRfc2lnbmF0dXJlKHNlbGYs
    IHIpOgogICAgICAgIGNhbm9uaWNhbF9zdHJpbmcgPSBzZWxmLmdldF9jYW5vbmljYWxfc3RyaW5n
    KHIudXJsLCByLmhlYWRlcnMsIHIubWV0aG9kKQogICAgICAgIGtleSA9IHNlbGYuc2VjcmV0X2tl
    eS5lbmNvZGUoInV0Zi04IikKICAgICAgICBtc2cgPSBjYW5vbmljYWxfc3RyaW5nLmVuY29kZSgi
    dXRmLTgiKQogICAgICAgIGggPSBobWFjLm5ldyhrZXksIG1zZywgZGlnZXN0bW9kPXNoYSkKICAg
    ICAgICByZXR1cm4gZW5jb2Rlc3RyaW5nKGguZGlnZXN0KCkpLnN0cmlwKCkKCiAgICBkZWYgZ2V0
    X2Nhbm9uaWNhbF9zdHJpbmcoc2VsZiwgdXJsLCBoZWFkZXJzLCBtZXRob2QpOgogICAgICAgIHBh
    cnNlZHVybCA9IHVybHBhcnNlKHVybCkKICAgICAgICBvYmplY3RrZXkgPSBwYXJzZWR1cmwucGF0
    aFsxOl0KCiAgICAgICAgYnVja2V0ID0gcGFyc2VkdXJsLm5ldGxvY1s6IC1sZW4oc2VsZi5zZXJ2
    aWNlX2Jhc2VfdXJsKV0KICAgICAgICBpZiBsZW4oYnVja2V0KSA+IDE6CiAgICAgICAgICAgICMg
    cmVtb3ZlIGxhc3QgZG90CiAgICAgICAgICAgIGJ1Y2tldCA9IGJ1Y2tldFs6LTFdCgogICAgICAg
    IGludGVyZXN0aW5nX2hlYWRlcnMgPSB7ImNvbnRlbnQtbWQ1IjogIiIsICJjb250ZW50LXR5cGUi
    OiAiIiwgImRhdGUiOiAiIn0KICAgICAgICBmb3Iga2V5IGluIGhlYWRlcnM6CiAgICAgICAgICAg
    IGxrID0ga2V5Lmxvd2VyKCkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbGsgPSBs
    ay5kZWNvZGUoInV0Zi04IikKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFz
    cwogICAgICAgICAgICBpZiBoZWFkZXJzW2tleV0gYW5kICgKICAgICAgICAgICAgICAgIGxrIGlu
    IGludGVyZXN0aW5nX2hlYWRlcnMua2V5cygpIG9yIGxrLnN0YXJ0c3dpdGgoIngtYW16LSIpCiAg
    ICAgICAgICAgICk6CiAgICAgICAgICAgICAgICBpbnRlcmVzdGluZ19oZWFkZXJzW2xrXSA9IGhl
    YWRlcnNba2V5XS5zdHJpcCgpCgogICAgICAgICMgSWYgeC1hbXotZGF0ZSBpcyB1c2VkIGl0IHN1
    cGVyc2VkZXMgdGhlIGRhdGUgaGVhZGVyLgogICAgICAgIGlmICJ4LWFtei1kYXRlIiBpbiBpbnRl
    cmVzdGluZ19oZWFkZXJzOgogICAgICAgICAgICBpbnRlcmVzdGluZ19oZWFkZXJzWyJkYXRlIl0g
    PSAiIgoKICAgICAgICBidWYgPSBmInttZXRob2R9XG4iCiAgICAgICAgZm9yIGtleSBpbiBzb3J0
    ZWQoaW50ZXJlc3RpbmdfaGVhZGVycy5rZXlzKCkpOgogICAgICAgICAgICB2YWwgPSBpbnRlcmVz
    dGluZ19oZWFkZXJzW2tleV0KICAgICAgICAgICAgaWYga2V5LnN0YXJ0c3dpdGgoIngtYW16LSIp
    OgogICAgICAgICAgICAgICAgYnVmICs9IGYie2tleX06e3ZhbH1cbiIKICAgICAgICAgICAgZWxz
    ZToKICAgICAgICAgICAgICAgIGJ1ZiArPSBmInt2YWx9XG4iCgogICAgICAgICMgYXBwZW5kIHRo
    ZSBidWNrZXQgaWYgaXQgZXhpc3RzCiAgICAgICAgaWYgYnVja2V0ICE9ICIiOgogICAgICAgICAg
    ICBidWYgKz0gZiIve2J1Y2tldH0iCgogICAgICAgICMgYWRkIHRoZSBvYmplY3RrZXkuIGV2ZW4g
    aWYgaXQgZG9lc24ndCBleGlzdCwgYWRkIHRoZSBzbGFzaAogICAgICAgIGJ1ZiArPSBmIi97b2Jq
    ZWN0a2V5fSIKCiAgICAgICAgcmV0dXJuIGJ1ZgoKCmNsYXNzIFJhZG9zSlNPTjoKICAgIEVYVEVS
    TkFMX1VTRVJfTkFNRSA9ICJjbGllbnQuaGVhbHRoY2hlY2tlciIKICAgIEVYVEVSTkFMX1JHV19B
    RE1JTl9PUFNfVVNFUl9OQU1FID0gInJndy1hZG1pbi1vcHMtdXNlciIKICAgIEVNUFRZX09VVFBV
    VF9MSVNUID0gIkVtcHR5IG91dHB1dCBsaXN0IgogICAgREVGQVVMVF9SR1dfUE9PTF9QUkVGSVgg
    PSAiZGVmYXVsdCIKICAgIERFRkFVTFRfTU9OSVRPUklOR19FTkRQT0lOVF9QT1JUID0gIjkyODMi
    CgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZ2VuX2FyZ19wYXJzZXIoY2xzLCBhcmdzX3RvX3Bh
    cnNlPU5vbmUpOgogICAgICAgIGFyZ1AgPSBhcmdwYXJzZS5Bcmd1bWVudFBhcnNlcigpCgogICAg
    ICAgIGNvbW1vbl9ncm91cCA9IGFyZ1AuYWRkX2FyZ3VtZW50X2dyb3VwKCJjb21tb24iKQogICAg
    ICAgIGNvbW1vbl9ncm91cC5hZGRfYXJndW1lbnQoIi0tdmVyYm9zZSIsICItdiIsIGFjdGlvbj0i
    c3RvcmVfdHJ1ZSIsIGRlZmF1bHQ9RmFsc2UpCiAgICAgICAgY29tbW9uX2dyb3VwLmFkZF9hcmd1
    bWVudCgKICAgICAgICAgICAgIi0tY2VwaC1jb25mIiwgIi1jIiwgaGVscD0iUHJvdmlkZSBhIGNl
    cGggY29uZiBmaWxlLiIsIHR5cGU9c3RyLCBkZWZhdWx0PSIiCiAgICAgICAgKQogICAgICAgIGNv
    bW1vbl9ncm91cC5hZGRfYXJndW1lbnQoCiAgICAgICAgICAgICItLWtleXJpbmciLCAiLWsiLCBo
    ZWxwPSJQYXRoIHRvIGNlcGgga2V5cmluZyBmaWxlLiIsIHR5cGU9c3RyLCBkZWZhdWx0PSIiCiAg
    ICAgICAgKQogICAgICAgIGNvbW1vbl9ncm91cC5hZGRfYXJndW1lbnQoCiAgICAgICAgICAgICIt
    LXJ1bi1hcy11c2VyIiwKICAgICAgICAgICAgIi11IiwKICAgICAgICAgICAgZGVmYXVsdD0iIiwK
    ICAgICAgICAgICAgdHlwZT1zdHIsCiAgICAgICAgICAgIGhlbHA9IlByb3ZpZGVzIGEgdXNlciBu
    YW1lIHRvIGNoZWNrIHRoZSBjbHVzdGVyJ3MgaGVhbHRoIHN0YXR1cywgbXVzdCBiZSBwcmVmaXhl
    ZCBieSAnY2xpZW50LiciLAogICAgICAgICkKICAgICAgICBjb21tb25fZ3JvdXAuYWRkX2FyZ3Vt
    ZW50KAogICAgICAgICAgICAiLS1jbHVzdGVyLW5hbWUiLAogICAgICAgICAgICBkZWZhdWx0PSIi
    LAogICAgICAgICAgICBoZWxwPSJLdWJlcm5ldGVzIGNsdXN0ZXIgbmFtZShsZWdhY3kgZmxhZyks
    IE5vdGU6IEVpdGhlciB1c2UgdGhpcyBvciAtLWs4cy1jbHVzdGVyLW5hbWUiLAogICAgICAgICkK
    ICAgICAgICBjb21tb25fZ3JvdXAuYWRkX2FyZ3VtZW50KAogICAgICAgICAgICAiLS1rOHMtY2x1
    c3Rlci1uYW1lIiwgZGVmYXVsdD0iIiwgaGVscD0iS3ViZXJuZXRlcyBjbHVzdGVyIG5hbWUiCiAg
    ICAgICAgKQogICAgICAgIGNvbW1vbl9ncm91cC5hZGRfYXJndW1lbnQoCiAgICAgICAgICAgICIt
    LW5hbWVzcGFjZSIsCiAgICAgICAgICAgIGRlZmF1bHQ9IiIsCiAgICAgICAgICAgIGhlbHA9Ik5h
    bWVzcGFjZSB3aGVyZSBDZXBoQ2x1c3RlciBpcyBydW5uaW5nIiwKICAgICAgICApCiAgICAgICAg
    Y29tbW9uX2dyb3VwLmFkZF9hcmd1bWVudCgKICAgICAgICAgICAgIi0tcmd3LXBvb2wtcHJlZml4
    IiwgZGVmYXVsdD0iIiwgaGVscD0iUkdXIFBvb2wgcHJlZml4IgogICAgICAgICkKICAgICAgICBj
    b21tb25fZ3JvdXAuYWRkX2FyZ3VtZW50KAogICAgICAgICAgICAiLS1yZXN0cmljdGVkLWF1dGgt
    cGVybWlzc2lvbiIsCiAgICAgICAgICAgIGRlZmF1bHQ9RmFsc2UsCiAgICAgICAgICAgIGhlbHA9
    IlJlc3RyaWN0IGNlcGhDU0lLZXlyaW5ncyBhdXRoIHBlcm1pc3Npb25zIHRvIHNwZWNpZmljIHBv
    b2xzLCBjbHVzdGVyLiIKICAgICAgICAgICAgKyAiTWFuZGF0b3J5IGZsYWdzIHRoYXQgbmVlZCB0
    byBiZSBzZXQgYXJlIC0tcmJkLWRhdGEtcG9vbC1uYW1lLCBhbmQgLS1rOHMtY2x1c3Rlci1uYW1l
    LiIKICAgICAgICAgICAgKyAiLS1jZXBoZnMtZmlsZXN5c3RlbS1uYW1lIGZsYWcgY2FuIGFsc28g
    YmUgcGFzc2VkIGluIGNhc2Ugb2YgY2VwaGZzIHVzZXIgcmVzdHJpY3Rpb24sIHNvIGl0IGNhbiBy
    ZXN0cmljdCB1c2VyIHRvIHBhcnRpY3VsYXIgY2VwaGZzIGZpbGVzeXN0ZW0iCiAgICAgICAgICAg
    ICsgInNhbXBsZSBydW46IGBweXRob24zIC9ldGMvY2VwaC9jcmVhdGUtZXh0ZXJuYWwtY2x1c3Rl
    ci1yZXNvdXJjZXMucHkgLS1jZXBoZnMtZmlsZXN5c3RlbS1uYW1lIG15ZnMgLS1yYmQtZGF0YS1w
    b29sLW5hbWUgcmVwbGljYXBvb2wgLS1rOHMtY2x1c3Rlci1uYW1lIHJvb2tzdG9yYWdlIC0tcmVz
    dHJpY3RlZC1hdXRoLXBlcm1pc3Npb24gdHJ1ZWAiCiAgICAgICAgICAgICsgIk5vdGU6IFJlc3Ry
    aWN0aW5nIHRoZSBjc2ktdXNlcnMgcGVyIHBvb2wsIGFuZCBwZXIgY2x1c3RlciB3aWxsIHJlcXVp
    cmUgY3JlYXRpbmcgbmV3IGNzaS11c2VycyBhbmQgbmV3IHNlY3JldHMgZm9yIHRoYXQgY3NpLXVz
    ZXJzLiIKICAgICAgICAgICAgKyAiU28gYXBwbHkgdGhlc2Ugc2VjcmV0cyBvbmx5IHRvIG5ldyBg
    Q29uc3VtZXIgY2x1c3RlcmAgZGVwbG95bWVudCB3aGlsZSB1c2luZyB0aGUgc2FtZSBgU291cmNl
    IGNsdXN0ZXJgLiIsCiAgICAgICAgKQogICAgICAgIGNvbW1vbl9ncm91cC5hZGRfYXJndW1lbnQo
    CiAgICAgICAgICAgICItLXYyLXBvcnQtZW5hYmxlIiwKICAgICAgICAgICAgYWN0aW9uPSJzdG9y
    ZV90cnVlIiwKICAgICAgICAgICAgZGVmYXVsdD1UcnVlLCAgIyBkZWZhdWx0IGlzIFRydWUgdG8g
    ZW5hYmxlIHYyIG1vbiBwb3J0IGluIGRvd25zdHJlYW0KICAgICAgICAgICAgaGVscD0iRW5hYmxl
    IHYyIG1vbiBwb3J0KDMzMDApIGZvciBtb25zIiwKICAgICAgICApCgogICAgICAgIG91dHB1dF9n
    cm91cCA9IGFyZ1AuYWRkX2FyZ3VtZW50X2dyb3VwKCJvdXRwdXQiKQogICAgICAgIG91dHB1dF9n
    cm91cC5hZGRfYXJndW1lbnQoCiAgICAgICAgICAgICItLWZvcm1hdCIsCiAgICAgICAgICAgICIt
    dCIsCiAgICAgICAgICAgIGNob2ljZXM9WyJqc29uIiwgImJhc2giXSwKICAgICAgICAgICAgZGVm
    YXVsdD0ianNvbiIsCiAgICAgICAgICAgIGhlbHA9IlByb3ZpZGVzIHRoZSBvdXRwdXQgZm9ybWF0
    IChqc29uIHwgYmFzaCkiLAogICAgICAgICkKICAgICAgICBvdXRwdXRfZ3JvdXAuYWRkX2FyZ3Vt
    ZW50KAogICAgICAgICAgICAiLS1vdXRwdXQiLAogICAgICAgICAgICAiLW8iLAogICAgICAgICAg
    ICBkZWZhdWx0PSIiLAogICAgICAgICAgICBoZWxwPSJPdXRwdXQgd2lsbCBiZSBzdG9yZWQgaW50
    byB0aGUgcHJvdmlkZWQgZmlsZSIsCiAgICAgICAgKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRf
    YXJndW1lbnQoCiAgICAgICAgICAgICItLWNlcGhmcy1maWxlc3lzdGVtLW5hbWUiLAogICAgICAg
    ICAgICBkZWZhdWx0PSIiLAogICAgICAgICAgICBoZWxwPSJQcm92aWRlcyB0aGUgbmFtZSBvZiB0
    aGUgQ2VwaCBmaWxlc3lzdGVtIiwKICAgICAgICApCiAgICAgICAgb3V0cHV0X2dyb3VwLmFkZF9h
    cmd1bWVudCgKICAgICAgICAgICAgIi0tY2VwaGZzLW1ldGFkYXRhLXBvb2wtbmFtZSIsCiAgICAg
    ICAgICAgIGRlZmF1bHQ9IiIsCiAgICAgICAgICAgIGhlbHA9IlByb3ZpZGVzIHRoZSBuYW1lIG9m
    IHRoZSBjZXBoZnMgbWV0YWRhdGEgcG9vbCIsCiAgICAgICAgKQogICAgICAgIG91dHB1dF9ncm91
    cC5hZGRfYXJndW1lbnQoCiAgICAgICAgICAgICItLWNlcGhmcy1kYXRhLXBvb2wtbmFtZSIsCiAg
    ICAgICAgICAgIGRlZmF1bHQ9IiIsCiAgICAgICAgICAgIGhlbHA9IlByb3ZpZGVzIHRoZSBuYW1l
    IG9mIHRoZSBjZXBoZnMgZGF0YSBwb29sIiwKICAgICAgICApCiAgICAgICAgb3V0cHV0X2dyb3Vw
    LmFkZF9hcmd1bWVudCgKICAgICAgICAgICAgIi0tcmJkLWRhdGEtcG9vbC1uYW1lIiwKICAgICAg
    ICAgICAgZGVmYXVsdD0iIiwKICAgICAgICAgICAgcmVxdWlyZWQ9RmFsc2UsCiAgICAgICAgICAg
    IGhlbHA9IlByb3ZpZGVzIHRoZSBuYW1lIG9mIHRoZSBSQkQgZGF0YXBvb2wiLAogICAgICAgICkK
    ICAgICAgICBvdXRwdXRfZ3JvdXAuYWRkX2FyZ3VtZW50KAogICAgICAgICAgICAiLS1hbGlhcy1y
    YmQtZGF0YS1wb29sLW5hbWUiLAogICAgICAgICAgICBkZWZhdWx0PSIiLAogICAgICAgICAgICBy
    ZXF1aXJlZD1GYWxzZSwKICAgICAgICAgICAgaGVscD0iUHJvdmlkZXMgYW4gYWxpYXMgZm9yIHRo
    ZSAgUkJEIGRhdGEgcG9vbCBuYW1lLCBuZWNlc3NhcnkgaWYgYSBzcGVjaWFsIGNoYXJhY3RlciBp
    cyBwcmVzZW50IGluIHRoZSBwb29sIG5hbWUgc3VjaCBhcyBhIHBlcmlvZCBvciB1bmRlcnNjb3Jl
    IiwKICAgICAgICApCiAgICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgKICAgICAgICAg
    ICAgIi0tcmd3LWVuZHBvaW50IiwKICAgICAgICAgICAgZGVmYXVsdD0iIiwKICAgICAgICAgICAg
    cmVxdWlyZWQ9RmFsc2UsCiAgICAgICAgICAgIGhlbHA9IlJBRE9TIEdhdGV3YXkgZW5kcG9pbnQg
    KGluIGA8SVB2ND46PFBPUlQ+YCBvciBgPFtJUHY2XT46PFBPUlQ+YCBvciBgPEZRRE4+OjxQT1JU
    PmAgZm9ybWF0KSIsCiAgICAgICAgKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1lbnQo
    CiAgICAgICAgICAgICItLXJndy10bHMtY2VydC1wYXRoIiwKICAgICAgICAgICAgZGVmYXVsdD0i
    IiwKICAgICAgICAgICAgcmVxdWlyZWQ9RmFsc2UsCiAgICAgICAgICAgIGhlbHA9IlJBRE9TIEdh
    dGV3YXkgZW5kcG9pbnQgVExTIGNlcnRpZmljYXRlIChvciBpbnRlcm1lZGlhdGUgc2lnbmluZyBj
    ZXJ0aWZpY2F0ZSkiLAogICAgICAgICkKICAgICAgICBvdXRwdXRfZ3JvdXAuYWRkX2FyZ3VtZW50
    KAogICAgICAgICAgICAiLS1yZ3ctc2tpcC10bHMiLAogICAgICAgICAgICByZXF1aXJlZD1GYWxz
    ZSwKICAgICAgICAgICAgZGVmYXVsdD1GYWxzZSwKICAgICAgICAgICAgaGVscD0iSWdub3JlIFRM
    UyBjZXJ0aWZpY2F0aW9uIHZhbGlkYXRpb24gd2hlbiBhIHNlbGYtc2lnbmVkIGNlcnRpZmljYXRl
    IGlzIHByb3ZpZGVkIChOT1QgUkVDT01NRU5ERUQiLAogICAgICAgICkKICAgICAgICBvdXRwdXRf
    Z3JvdXAuYWRkX2FyZ3VtZW50KAogICAgICAgICAgICAiLS1tb25pdG9yaW5nLWVuZHBvaW50IiwK
    ICAgICAgICAgICAgZGVmYXVsdD0iIiwKICAgICAgICAgICAgcmVxdWlyZWQ9RmFsc2UsCiAgICAg
    ICAgICAgIGhlbHA9IkNlcGggTWFuYWdlciBwcm9tZXRoZXVzIGV4cG9ydGVyIGVuZHBvaW50cyAo
    Y29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgKGZvcm1hdCBgPElQdjQ+YCBvciBgPFtJUHY2XT5gIG9y
    IGA8RlFETj5gKSBlbnRyaWVzIG9mIGFjdGl2ZSBhbmQgc3RhbmRieSBtZ3JzKSIsCiAgICAgICAg
    KQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1lbnQoCiAgICAgICAgICAgICItLW1vbml0
    b3JpbmctZW5kcG9pbnQtcG9ydCIsCiAgICAgICAgICAgIGRlZmF1bHQ9IiIsCiAgICAgICAgICAg
    IHJlcXVpcmVkPUZhbHNlLAogICAgICAgICAgICBoZWxwPSJDZXBoIE1hbmFnZXIgcHJvbWV0aGV1
    cyBleHBvcnRlciBwb3J0IiwKICAgICAgICApCiAgICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1
    bWVudCgKICAgICAgICAgICAgIi0tc2tpcC1tb25pdG9yaW5nLWVuZHBvaW50IiwKICAgICAgICAg
    ICAgZGVmYXVsdD1GYWxzZSwKICAgICAgICAgICAgYWN0aW9uPSJzdG9yZV90cnVlIiwKICAgICAg
    ICAgICAgaGVscD0iRG8gbm90IGNoZWNrIGZvciBhIG1vbml0b3JpbmcgZW5kcG9pbnQgZm9yIHRo
    ZSBDZXBoIGNsdXN0ZXIiLAogICAgICAgICkKICAgICAgICBvdXRwdXRfZ3JvdXAuYWRkX2FyZ3Vt
    ZW50KAogICAgICAgICAgICAiLS1yYmQtbWV0YWRhdGEtZWMtcG9vbC1uYW1lIiwKICAgICAgICAg
    ICAgZGVmYXVsdD0iIiwKICAgICAgICAgICAgcmVxdWlyZWQ9RmFsc2UsCiAgICAgICAgICAgIGhl
    bHA9IlByb3ZpZGVzIHRoZSBuYW1lIG9mIGVyYXN1cmUgY29kZWQgUkJEIG1ldGFkYXRhIHBvb2wi
    LAogICAgICAgICkKICAgICAgICBvdXRwdXRfZ3JvdXAuYWRkX2FyZ3VtZW50KAogICAgICAgICAg
    ICAiLS1kcnktcnVuIiwKICAgICAgICAgICAgZGVmYXVsdD1GYWxzZSwKICAgICAgICAgICAgYWN0
    aW9uPSJzdG9yZV90cnVlIiwKICAgICAgICAgICAgaGVscD0iRHJ5IHJ1biBwcmludHMgdGhlIGV4
    ZWN1dGVkIGNvbW1hbmRzIHdpdGhvdXQgcnVubmluZyB0aGVtIiwKICAgICAgICApCiAgICAgICAg
    b3V0cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgKICAgICAgICAgICAgIi0tcmFkb3MtbmFtZXNwYWNl
    IiwKICAgICAgICAgICAgZGVmYXVsdD0iIiwKICAgICAgICAgICAgcmVxdWlyZWQ9RmFsc2UsCiAg
    ICAgICAgICAgIGhlbHA9IkRpdmlkZXMgYSBwb29sIGludG8gc2VwYXJhdGUgbG9naWNhbCBuYW1l
    c3BhY2VzLCB1c2VkIGZvciBjcmVhdGluZyBSQkQgUFZDIGluIGEgQ2VwaEJsb2NrUG9vbFJhZG9z
    TmFtZXNwYWNlIChzaG91bGQgYmUgbG93ZXIgY2FzZSkiLAogICAgICAgICkKICAgICAgICBvdXRw
    dXRfZ3JvdXAuYWRkX2FyZ3VtZW50KAogICAgICAgICAgICAiLS1zdWJ2b2x1bWUtZ3JvdXAiLAog
    ICAgICAgICAgICBkZWZhdWx0PSIiLAogICAgICAgICAgICByZXF1aXJlZD1GYWxzZSwKICAgICAg
    ICAgICAgaGVscD0icHJvdmlkZXMgdGhlIG5hbWUgb2YgdGhlIHN1YnZvbHVtZSBncm91cCIsCiAg
    ICAgICAgKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1lbnQoCiAgICAgICAgICAgICIt
    LXJndy1yZWFsbS1uYW1lIiwKICAgICAgICAgICAgZGVmYXVsdD0iIiwKICAgICAgICAgICAgcmVx
    dWlyZWQ9RmFsc2UsCiAgICAgICAgICAgIGhlbHA9InByb3ZpZGVzIHRoZSBuYW1lIG9mIHRoZSBy
    Z3ctcmVhbG0iLAogICAgICAgICkKICAgICAgICBvdXRwdXRfZ3JvdXAuYWRkX2FyZ3VtZW50KAog
    ICAgICAgICAgICAiLS1yZ3ctem9uZS1uYW1lIiwKICAgICAgICAgICAgZGVmYXVsdD0iIiwKICAg
    ICAgICAgICAgcmVxdWlyZWQ9RmFsc2UsCiAgICAgICAgICAgIGhlbHA9InByb3ZpZGVzIHRoZSBu
    YW1lIG9mIHRoZSByZ3ctem9uZSIsCiAgICAgICAgKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRf
    YXJndW1lbnQoCiAgICAgICAgICAgICItLXJndy16b25lZ3JvdXAtbmFtZSIsCiAgICAgICAgICAg
    IGRlZmF1bHQ9IiIsCiAgICAgICAgICAgIHJlcXVpcmVkPUZhbHNlLAogICAgICAgICAgICBoZWxw
    PSJwcm92aWRlcyB0aGUgbmFtZSBvZiB0aGUgcmd3LXpvbmVncm91cCIsCiAgICAgICAgKQogICAg
    ICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1lbnQoCiAgICAgICAgICAgICItLXRvcG9sb2d5LXBv
    b2xzIiwKICAgICAgICAgICAgZGVmYXVsdD0iIiwKICAgICAgICAgICAgcmVxdWlyZWQ9RmFsc2Us
    CiAgICAgICAgICAgIGhlbHA9ImNvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIHRvcG9sb2d5LWNvbnN0
    cmFpbmVkIHJiZCBwb29scyIsCiAgICAgICAgKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJn
    dW1lbnQoCiAgICAgICAgICAgICItLXRvcG9sb2d5LWZhaWx1cmUtZG9tYWluLWxhYmVsIiwKICAg
    ICAgICAgICAgZGVmYXVsdD0iIiwKICAgICAgICAgICAgcmVxdWlyZWQ9RmFsc2UsCiAgICAgICAg
    ICAgIGhlbHA9Ims4cyBjbHVzdGVyIGZhaWx1cmUgZG9tYWluIGxhYmVsIChleGFtcGxlOiB6b25l
    LCByYWNrLCBvciBob3N0KSBmb3IgdGhlIHRvcG9sb2d5LXBvb2xzIHRoYXQgbWF0Y2ggdGhlIGNl
    cGggZG9tYWluIiwKICAgICAgICApCiAgICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgK
    ICAgICAgICAgICAgIi0tdG9wb2xvZ3ktZmFpbHVyZS1kb21haW4tdmFsdWVzIiwKICAgICAgICAg
    ICAgZGVmYXVsdD0iIiwKICAgICAgICAgICAgcmVxdWlyZWQ9RmFsc2UsCiAgICAgICAgICAgIGhl
    bHA9ImNvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIHRoZSBrOHMgY2x1c3RlciBmYWlsdXJlIGRvbWFp
    biB2YWx1ZXMgY29ycmVzcG9uZGluZyB0byBlYWNoIG9mIHRoZSBwb29scyBpbiB0aGUgYHRvcG9s
    b2d5LXBvb2xzYCBsaXN0IiwKICAgICAgICApCiAgICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1
    bWVudCgKICAgICAgICAgICAgIi0tY2VwaHgta2V5LXJvdGF0ZSIsCiAgICAgICAgICAgIGRlZmF1
    bHQ9IiIsCiAgICAgICAgICAgIHJlcXVpcmVkPUZhbHNlLAogICAgICAgICAgICBoZWxwPSJFbmFi
    bGUgY2VwaHgga2V5IHJvdGF0aW9uIGZvciB0aGUgdXNlcnMgY3JlYXRlZCBieSB0aGlzIHNjcmlw
    dC4gVGhpcyB3aWxsIGNyZWF0ZSBhIG5ldyB1c2VyIHdpdGggc3VmZml4IGAue3h9YCBhbmQgdXBk
    YXRlIHRoZSBzZWNyZXRzIHdpdGggdGhlIG5ldyBrZXkuIgogICAgICAgICAgICArICJTZXQgYC0t
    Y2VwaHgta2V5LXJvdGF0aW9uIHJvdGF0ZWAgdG8gaW5pdGlhdGUgcm90YXRpb24uIgogICAgICAg
    ICAgICArICJUbyByZXZlcnQga2V5cyB0byB0aGUgcHJpb3IgZ2VuZXJhdGlvbiwgc2V0IGAtLWNl
    cGh4LWtleS1yb3RhdGlvbiByZXZlcnRgLiIKICAgICAgICAgICAgKyAiTm90ZTogSWYgdXNlciBh
    cmUgcmV2ZXJ0aW5nIHRvIHByaW9yIGdlbmVyYXRpb24sIHRoZW4gdGhlIHVzZXIgc2hvdWxkIG1h
    bnVhbGx5IGRlbGV0ZSB0aGUgcHJpb3IgdXNlZCB1c2VyIGtleXMgZnJvbSB0aGUgY2x1c3RlciBh
    ZnRlciByZXZlcnRpbmciLAogICAgICAgICkKCiAgICAgICAgdXBncmFkZV9ncm91cCA9IGFyZ1Au
    YWRkX2FyZ3VtZW50X2dyb3VwKCJ1cGdyYWRlIikKICAgICAgICB1cGdyYWRlX2dyb3VwLmFkZF9h
    cmd1bWVudCgKICAgICAgICAgICAgIi0tdXBncmFkZSIsCiAgICAgICAgICAgIGFjdGlvbj0ic3Rv
    cmVfdHJ1ZSIsCiAgICAgICAgICAgIGRlZmF1bHQ9RmFsc2UsCiAgICAgICAgICAgIGhlbHA9IlVw
    Z3JhZGVzIHRoZSBjZXBoQ1NJS2V5cmluZ3MoRm9yIGV4YW1wbGU6IGNsaWVudC5jc2ktY2VwaGZz
    LXByb3Zpc2lvbmVyKSBhbmQgY2xpZW50LmhlYWx0aGNoZWNrZXIgY2VwaCB1c2VycyB3aXRoIG5l
    dyBwZXJtaXNzaW9ucyBuZWVkZWQgZm9yIHRoZSBuZXcgY2x1c3RlciB2ZXJzaW9uIGFuZCBvbGRl
    ciBwZXJtaXNzaW9uIHdpbGwgc3RpbGwgYmUgYXBwbGllZC4iCiAgICAgICAgICAgICsgIlNhbXBs
    ZSBydW46IGBweXRob24zIC9ldGMvY2VwaC9jcmVhdGUtZXh0ZXJuYWwtY2x1c3Rlci1yZXNvdXJj
    ZXMucHkgLS11cGdyYWRlYCwgdGhpcyB3aWxsIHVwZ3JhZGUgYWxsIHRoZSBkZWZhdWx0IGNzaSB1
    c2Vycyhub24tcmVzdHJpY3RlZCkiCiAgICAgICAgICAgICsgIkZvciByZXN0cmljdGVkIHVzZXJz
    KEZvciBleGFtcGxlOiBjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lci1vcGVuc2hpZnQtc3Rv
    cmFnZS1teWZzKSwgdXNlcnMgY3JlYXRlZCB1c2luZyAtLXJlc3RyaWN0ZWQtYXV0aC1wZXJtaXNz
    aW9uIGZsYWcgbmVlZCB0byBwYXNzIG1hbmRhdG9yeSBmbGFncyIKICAgICAgICAgICAgKyAibWFu
    ZGF0b3J5IGZsYWdzOiAnLS1yYmQtZGF0YS1wb29sLW5hbWUsIC0tazhzLWNsdXN0ZXItbmFtZSBh
    bmQgLS1ydW4tYXMtdXNlcicgZmxhZ3Mgd2hpbGUgdXBncmFkaW5nIgogICAgICAgICAgICArICJp
    biBjYXNlIG9mIGNlcGhmcyB1c2VycyBpZiB5b3UgaGF2ZSBwYXNzZWQgLS1jZXBoZnMtZmlsZXN5
    c3RlbS1uYW1lIGZsYWcgd2hpbGUgY3JlYXRpbmcgdXNlciB0aGVuIHdoaWxlIHVwZ3JhZGluZyBp
    dCB3aWxsIGJlIG1hbmRhdG9yeSB0b28iCiAgICAgICAgICAgICsgIlNhbXBsZSBydW46IGBweXRo
    b24zIC9ldGMvY2VwaC9jcmVhdGUtZXh0ZXJuYWwtY2x1c3Rlci1yZXNvdXJjZXMucHkgLS11cGdy
    YWRlIC0tcmJkLWRhdGEtcG9vbC1uYW1lIHJlcGxpY2Fwb29sIC0tazhzLWNsdXN0ZXItbmFtZSBy
    b29rc3RvcmFnZSAgLS1ydW4tYXMtdXNlciBjbGllbnQuY3NpLXJiZC1ub2RlLXJvb2tzdG9yYWdl
    LXJlcGxpY2Fwb29sYCIKICAgICAgICAgICAgKyAiUFM6IEFuIGV4aXN0aW5nIG5vbi1yZXN0cmlj
    dGVkIHVzZXIgY2Fubm90IGJlIGNvbnZlcnRlZCB0byBhIHJlc3RyaWN0ZWQgdXNlciBieSB1cGdy
    YWRpbmcuIgogICAgICAgICAgICArICJVcGdyYWRlIGZsYWcgc2hvdWxkIG9ubHkgYmUgdXNlZCB0
    byBhcHBlbmQgbmV3IHBlcm1pc3Npb25zIHRvIHVzZXJzLCBpdCBzaG91bGRuJ3QgYmUgdXNlZCBm
    b3IgY2hhbmdpbmcgdXNlciBhbHJlYWR5IGFwcGxpZWQgcGVybWlzc2lvbiwgZm9yIGV4YW1wbGUg
    eW91IHNob3VsZG4ndCBjaGFuZ2UgaW4gd2hpY2ggcG9vbCB1c2VyIGhhcyBhY2Nlc3MiCiAgICAg
    ICAgICAgICsgIklmIC0tY2VwaHgta2V5LXJvdGF0ZSB3YXMgc2V0LCBpdCBhZGRzIGAue3h9YCBz
    dWZmaXggdG8gdGhlIHVzZXIgbmFtZSwgZm9yIGV4YW1wbGU6IGBjbGllbnQuY3NpLXJiZC1ub2Rl
    LXJvb2tzdG9yYWdlLXJlcGxpY2Fwb29sLjFgIiwKICAgICAgICApCgogICAgICAgICMgQWRkIGNv
    bW1hbmQtbGluZSBhcmd1bWVudHMKICAgICAgICBjb25maWdfZ3JvdXAgPSBhcmdQLmFkZF9hcmd1
    bWVudF9ncm91cCgiY29uZmlnIikKICAgICAgICBjb25maWdfZ3JvdXAuYWRkX2FyZ3VtZW50KAog
    ICAgICAgICAgICAiLS1jb25maWctZmlsZSIsCiAgICAgICAgICAgIHR5cGU9c3RyLAogICAgICAg
    ICAgICBoZWxwPSJQYXRoIHRvIHRoZSBjb25maWd1cmF0aW9uIGZpbGUsIFByaW9yaXR5OiBjb21t
    YW5kLWxpbmUtYXJncyA+IGNvbmZpZy5pbmkgZmlsZSB2YWx1ZXMgPiBkZWZhdWx0IHZhbHVlcyIs
    CiAgICAgICAgICAgIHJlcXVpcmVkPUZhbHNlLAogICAgICAgICAgICBkZWZhdWx0PSIiLAogICAg
    ICAgICkKCiAgICAgICAgaWYgYXJnc190b19wYXJzZToKICAgICAgICAgICAgYXNzZXJ0ICgKICAg
    ICAgICAgICAgICAgIHR5cGUoYXJnc190b19wYXJzZSkgPT0gbGlzdAogICAgICAgICAgICApLCAi
    QXJndW1lbnQgdG8gJ2dlbl9hcmdfcGFyc2VyJyBzaG91bGQgYmUgYSBsaXN0IgogICAgICAgIGVs
    c2U6CiAgICAgICAgICAgIGFyZ3NfdG9fcGFyc2UgPSBzeXMuYXJndlsxOl0KICAgICAgICByZXR1
    cm4gYXJnUC5wYXJzZV9hcmdzKGFyZ3NfdG9fcGFyc2UpCgogICAgZGVmIHZhbGlkYXRlX3JiZF9t
    ZXRhZGF0YV9lY19wb29sX25hbWUoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5y
    YmRfbWV0YWRhdGFfZWNfcG9vbF9uYW1lOgogICAgICAgICAgICByYmRfbWV0YWRhdGFfZWNfcG9v
    bF9uYW1lID0gc2VsZi5fYXJnX3BhcnNlci5yYmRfbWV0YWRhdGFfZWNfcG9vbF9uYW1lCiAgICAg
    ICAgICAgIHJiZF9wb29sX25hbWUgPSBzZWxmLl9hcmdfcGFyc2VyLnJiZF9kYXRhX3Bvb2xfbmFt
    ZQoKICAgICAgICAgICAgaWYgcmJkX3Bvb2xfbmFtZSA9PSAiIjoKICAgICAgICAgICAgICAgIHJh
    aXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgIkZsYWcg
    Jy0tcmJkLWRhdGEtcG9vbC1uYW1lJyBzaG91bGQgbm90IGJlIGVtcHR5IgogICAgICAgICAgICAg
    ICAgKQoKICAgICAgICAgICAgaWYgcmJkX21ldGFkYXRhX2VjX3Bvb2xfbmFtZSA9PSAiIjoKICAg
    ICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAg
    ICAgICAgICAgIkZsYWcgJy0tcmJkLW1ldGFkYXRhLWVjLXBvb2wtbmFtZScgc2hvdWxkIG5vdCBi
    ZSBlbXB0eSIKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgIGNtZF9qc29uID0geyJwcmVm
    aXgiOiAib3NkIGR1bXAiLCAiZm9ybWF0IjogImpzb24ifQogICAgICAgICAgICByZXRfdmFsLCBq
    c29uX291dCwgZXJyX21zZyA9IHNlbGYuX2NvbW1vbl9jbWRfanNvbl9nZW4oY21kX2pzb24pCiAg
    ICAgICAgICAgIGlmIHJldF92YWwgIT0gMCBvciBsZW4oanNvbl9vdXQpID09IDA6CiAgICAgICAg
    ICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAg
    ICAgIGYie2NtZF9qc29uWydwcmVmaXgnXX0gY29tbWFuZCBmYWlsZWQuXG4iCiAgICAgICAgICAg
    ICAgICAgICAgZiJFcnJvcjoge2Vycl9tc2cgaWYgcmV0X3ZhbCAhPSAwIGVsc2Ugc2VsZi5FTVBU
    WV9PVVRQVVRfTElTVH0iCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIG1ldGFkYXRhX3Bv
    b2xfZXhpc3QsIHBvb2xfZXhpc3QgPSBGYWxzZSwgRmFsc2UKCiAgICAgICAgICAgIGZvciBrZXkg
    aW4ganNvbl9vdXRbInBvb2xzIl06CiAgICAgICAgICAgICAgICAjIGlmIGVyYXN1cmVfY29kZV9w
    cm9maWxlIGlzIGVtcHR5IGFuZCBwb29sIG5hbWUgZXhpc3RzIHRoZW4gaXQgcmVwbGljYSBwb29s
    CiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAga2V5WyJlcmFzdXJlX2Nv
    ZGVfcHJvZmlsZSJdID09ICIiCiAgICAgICAgICAgICAgICAgICAgYW5kIGtleVsicG9vbF9uYW1l
    Il0gPT0gcmJkX21ldGFkYXRhX2VjX3Bvb2xfbmFtZQogICAgICAgICAgICAgICAgKToKICAgICAg
    ICAgICAgICAgICAgICBtZXRhZGF0YV9wb29sX2V4aXN0ID0gVHJ1ZQogICAgICAgICAgICAgICAg
    IyBpZiBlcmFzdXJlX2NvZGVfcHJvZmlsZSBpcyBub3QgZW1wdHkgYW5kIHBvb2wgbmFtZSBleGlz
    dHMgdGhlbiBpdCBpcyBlYyBwb29sCiAgICAgICAgICAgICAgICBpZiBrZXlbImVyYXN1cmVfY29k
    ZV9wcm9maWxlIl0gYW5kIGtleVsicG9vbF9uYW1lIl0gPT0gcmJkX3Bvb2xfbmFtZToKICAgICAg
    ICAgICAgICAgICAgICBwb29sX2V4aXN0ID0gVHJ1ZQoKICAgICAgICAgICAgaWYgbm90IG1ldGFk
    YXRhX3Bvb2xfZXhpc3Q6CiAgICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhj
    ZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICJQcm92aWRlZCByYmRfZWNfbWV0YWRhdGFfcG9v
    bCBuYW1lLCIKICAgICAgICAgICAgICAgICAgICBmIiB7cmJkX21ldGFkYXRhX2VjX3Bvb2xfbmFt
    ZX0sIGRvZXMgbm90IGV4aXN0IgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBpZiBub3Qg
    cG9vbF9leGlzdDoKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRp
    b24oCiAgICAgICAgICAgICAgICAgICAgZiJQcm92aWRlZCByYmRfZGF0YV9wb29sIG5hbWUsIHty
    YmRfcG9vbF9uYW1lfSwgZG9lcyBub3QgZXhpc3QiCiAgICAgICAgICAgICAgICApCiAgICAgICAg
    ICAgIHJldHVybiByYmRfbWV0YWRhdGFfZWNfcG9vbF9uYW1lCgogICAgZGVmIGRyeV9ydW4oc2Vs
    ZiwgbXNnKToKICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmRyeV9ydW46CiAgICAgICAgICAg
    IHByaW50KCJFeGVjdXRlOiAiICsgIiciICsgbXNnICsgIiciKQoKICAgIGRlZiB2YWxpZGF0ZV9y
    Z3dfZW5kcG9pbnRfdGxzX2NlcnQoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5y
    Z3dfdGxzX2NlcnRfcGF0aDoKICAgICAgICAgICAgd2l0aCBvcGVuKHNlbGYuX2FyZ19wYXJzZXIu
    cmd3X3Rsc19jZXJ0X3BhdGgsIGVuY29kaW5nPSJ1dGY4IikgYXMgZjoKICAgICAgICAgICAgICAg
    IGNvbnRlbnRzID0gZi5yZWFkKCkKICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50cy5yc3Ry
    aXAoKQoKICAgIGRlZiBfaW52YWxpZF9lbmRwb2ludChzZWxmLCBlbmRwb2ludF9zdHIpOgogICAg
    ICAgICMgZXh0cmFjdCB0aGUgcG9ydCBieSBnZXR0aW5nIHRoZSBsYXN0IHNwbGl0IG9uIGA6YCBk
    ZWxpbWl0ZXIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGVuZHBvaW50X3N0cl9pcCwgcG9ydCA9
    IGVuZHBvaW50X3N0ci5yc3BsaXQoIjoiLCAxKQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgog
    ICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKGYiTm90IGEgcHJvcGVy
    IGVuZHBvaW50OiB7ZW5kcG9pbnRfc3RyfSIpCgogICAgICAgIHRyeToKICAgICAgICAgICAgaWYg
    ZW5kcG9pbnRfc3RyX2lwWzBdID09ICJbIjoKICAgICAgICAgICAgICAgIGVuZHBvaW50X3N0cl9p
    cCA9IGVuZHBvaW50X3N0cl9pcFsxIDogbGVuKGVuZHBvaW50X3N0cl9pcCkgLSAxXQogICAgICAg
    ICAgICBpcF90eXBlID0gKAogICAgICAgICAgICAgICAgIklQdjQiIGlmIHR5cGUoaXBfYWRkcmVz
    cyhlbmRwb2ludF9zdHJfaXApKSBpcyBJUHY0QWRkcmVzcyBlbHNlICJJUHY2IgogICAgICAgICAg
    ICApCiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgIGlwX3R5cGUgPSAiRlFE
    TiIKICAgICAgICBpZiBub3QgcG9ydC5pc2RpZ2l0KCk6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1
    dGlvbkZhaWx1cmVFeGNlcHRpb24oZiJQb3J0IG5vdCB2YWxpZDoge3BvcnR9IikKICAgICAgICBp
    bnRQb3J0ID0gaW50KHBvcnQpCiAgICAgICAgaWYgaW50UG9ydCA8IDEgb3IgaW50UG9ydCA+IDIq
    KjE2IC0gMToKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbihmIk91
    dCBvZiByYW5nZSBwb3J0IG51bWJlcjoge3BvcnR9IikKCiAgICAgICAgcmV0dXJuIGlwX3R5cGUK
    CiAgICBkZWYgZW5kcG9pbnRfZGlhbChzZWxmLCBlbmRwb2ludF9zdHIsIGlwX3R5cGUsIHRpbWVv
    dXQ9MywgY2VydD1Ob25lKToKICAgICAgICAjIGlmIHRoZSAnY2x1c3RlcicgaW5zdGFuY2UgaXMg
    YSBkdW1teSBvbmUsCiAgICAgICAgIyBkb24ndCB0cnkgdG8gcmVhY2ggb3V0IHRvIHRoZSBlbmRw
    b2ludAogICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5jbHVzdGVyLCBEdW1teVJhZG9zKToKICAg
    ICAgICAgICAgcmV0dXJuICIiLCAiIiwgIiIKICAgICAgICBpZiBpcF90eXBlID09ICJJUHY2IjoK
    ICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZW5kcG9pbnRfc3RyX2lwLCBlbmRwb2lu
    dF9zdHJfcG9ydCA9IGVuZHBvaW50X3N0ci5yc3BsaXQoIjoiLCAxKQogICAgICAgICAgICBleGNl
    cHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNl
    cHRpb24oCiAgICAgICAgICAgICAgICAgICAgZiJOb3QgYSBwcm9wZXIgZW5kcG9pbnQ6IHtlbmRw
    b2ludF9zdHJ9IgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBpZiBlbmRwb2ludF9zdHJf
    aXBbMF0gIT0gIlsiOgogICAgICAgICAgICAgICAgZW5kcG9pbnRfc3RyX2lwID0gIlsiICsgZW5k
    cG9pbnRfc3RyX2lwICsgIl0iCiAgICAgICAgICAgIGVuZHBvaW50X3N0ciA9ICI6Ii5qb2luKFtl
    bmRwb2ludF9zdHJfaXAsIGVuZHBvaW50X3N0cl9wb3J0XSkKCiAgICAgICAgcHJvdG9jb2xzID0g
    WyJodHRwIiwgImh0dHBzIl0KICAgICAgICByZXNwb25zZV9lcnJvciA9IE5vbmUKICAgICAgICBm
    b3IgcHJlZml4IGluIHByb3RvY29sczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAg
    ZXAgPSBmIntwcmVmaXh9Oi8ve2VuZHBvaW50X3N0cn0iCiAgICAgICAgICAgICAgICB2ZXJpZnkg
    PSBOb25lCiAgICAgICAgICAgICAgICAjIElmIHZlcmlmeSBpcyBzZXQgdG8gYSBwYXRoIHRvIGEg
    ZGlyZWN0b3J5LAogICAgICAgICAgICAgICAgIyB0aGUgZGlyZWN0b3J5IG11c3QgaGF2ZSBiZWVu
    IHByb2Nlc3NlZCB1c2luZyB0aGUgY19yZWhhc2ggdXRpbGl0eSBzdXBwbGllZCB3aXRoIE9wZW5T
    U0wuCiAgICAgICAgICAgICAgICBpZiBwcmVmaXggPT0gImh0dHBzIiBhbmQgc2VsZi5fYXJnX3Bh
    cnNlci5yZ3dfc2tpcF90bHM6CiAgICAgICAgICAgICAgICAgICAgdmVyaWZ5ID0gRmFsc2UKICAg
    ICAgICAgICAgICAgICAgICByID0gcmVxdWVzdHMuaGVhZChlcCwgdGltZW91dD10aW1lb3V0LCB2
    ZXJpZnk9RmFsc2UpCiAgICAgICAgICAgICAgICBlbGlmIHByZWZpeCA9PSAiaHR0cHMiIGFuZCBj
    ZXJ0OgogICAgICAgICAgICAgICAgICAgIHZlcmlmeSA9IGNlcnQKICAgICAgICAgICAgICAgICAg
    ICByID0gcmVxdWVzdHMuaGVhZChlcCwgdGltZW91dD10aW1lb3V0LCB2ZXJpZnk9Y2VydCkKICAg
    ICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgciA9IHJlcXVlc3RzLmhlYWQo
    ZXAsIHRpbWVvdXQ9dGltZW91dCkKICAgICAgICAgICAgICAgIGlmIHIuc3RhdHVzX2NvZGUgPT0g
    MjAwOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVmaXgsIHZlcmlmeSwgIiIKICAgICAg
    ICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlcnI6CiAgICAgICAgICAgICAgICByZXNwb25zZV9l
    cnJvciA9IGVycgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICBzeXMuc3RkZXJyLndy
    aXRlKAogICAgICAgICAgICBmInVuYWJsZSB0byBjb25uZWN0IHRvIGVuZHBvaW50OiB7ZW5kcG9p
    bnRfc3RyfSwgZmFpbGVkIGVycm9yOiB7cmVzcG9uc2VfZXJyb3J9IgogICAgICAgICkKICAgICAg
    ICByZXR1cm4gKAogICAgICAgICAgICAiIiwKICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICgi
    LTEiKSwKICAgICAgICApCgogICAgZGVmIHBhcnNlX2NvbmZpZ19maWxlKHNlbGYsIGNvbmZpZ19m
    aWxlKToKICAgICAgICBjb25maWcgPSBjb25maWdwYXJzZXIuQ29uZmlnUGFyc2VyKCkKICAgICAg
    ICBjb25maWcucmVhZChjb25maWdfZmlsZSkKICAgICAgICBmb3IgYXJnIGluIGxpc3QodmFycyhz
    ZWxmLl9hcmdfcGFyc2VyKSk6CiAgICAgICAgICAgICMgcHl0aG9uIHRyZWF0cyBmbGFnLW5hbWUg
    YXMgZmxhZ19uYW1lIGludGVybmFsbHksIHNvIGNvbnZlcnRpbmcgYmFjayB0byBmbGFnLW5hbWUs
    CiAgICAgICAgICAgICMgc28gd2UgY2FuIGdldCB0aG9zZSB2YWx1ZXMgZnJvbSBjb25maWcgZmls
    ZQogICAgICAgICAgICBhcmd1bWVudCA9IGFyZy5yZXBsYWNlKCJfIiwgIi0iKQogICAgICAgICAg
    ICBhcmd1bWVudFZhbHVlID0gc3RyKGdldGF0dHIoc2VsZi5fYXJnX3BhcnNlciwgYXJnKSkKICAg
    ICAgICAgICAgY29uZmlnX3ZhbHVlID0gY29uZmlnLmdldCgiQ29uZmlndXJhdGlvbnMiLCBhcmd1
    bWVudCwgZmFsbGJhY2s9Tm9uZSkKICAgICAgICAgICAgIyBnaXZlIHByaW9yaXR5IHRvIGNvbW1h
    bmQgbGluZSBhcmd1bWVudCwgaWYgY29tbWFuZCBsaW5lIGFyZ3VtZW50IGlzIG5vdCBwcmVzZW50
    IHVzZSBjb25maWcuaW5pIHZhbHVlLAogICAgICAgICAgICBpZiAoc3RyKHN5cy5hcmd2KS5maW5k
    KGFyZ3VtZW50KSA9PSAtMSkgYW5kICgKICAgICAgICAgICAgICAgIChjb25maWdfdmFsdWUgIT0g
    Tm9uZSkgYW5kIChjb25maWdfdmFsdWUgIT0gIiIpCiAgICAgICAgICAgICk6CiAgICAgICAgICAg
    ICAgICBzZWxmLl9hcmdfcGFyc2VyLl9fc2V0YXR0cl9fKGFyZywgY29uZmlnX3ZhbHVlKQoKICAg
    ICAgICByZXR1cm4gY29uZmlnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGFyZ19saXN0PU5vbmUp
    OgogICAgICAgIHNlbGYub3V0X21hcCA9IHt9CiAgICAgICAgc2VsZi5fZXhjbHVkZWRfa2V5cyA9
    IHNldCgpCiAgICAgICAgc2VsZi5fYXJnX3BhcnNlciA9IHNlbGYuZ2VuX2FyZ19wYXJzZXIoYXJn
    c190b19wYXJzZT1hcmdfbGlzdCkKICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmNvbmZpZ19m
    aWxlOgogICAgICAgICAgICBzZWxmLmNvbmZpZyA9IHNlbGYucGFyc2VfY29uZmlnX2ZpbGUoc2Vs
    Zi5fYXJnX3BhcnNlci5jb25maWdfZmlsZSkKICAgICAgICBzZWxmLnJ1bl9hc191c2VyID0gc2Vs
    Zi5fYXJnX3BhcnNlci5ydW5fYXNfdXNlcgogICAgICAgIHNlbGYub3V0cHV0X2ZpbGUgPSBzZWxm
    Ll9hcmdfcGFyc2VyLm91dHB1dAogICAgICAgIHNlbGYuY2VwaF9jb25mID0gc2VsZi5fYXJnX3Bh
    cnNlci5jZXBoX2NvbmYKICAgICAgICBzZWxmLmNlcGhfa2V5cmluZyA9IHNlbGYuX2FyZ19wYXJz
    ZXIua2V5cmluZwogICAgICAgICMgaWYgdXNlciBub3QgcHJvdmlkZWQsIGdpdmUgYSBkZWZhdWx0
    IHVzZXIKICAgICAgICBpZiBub3Qgc2VsZi5ydW5fYXNfdXNlciBhbmQgbm90IHNlbGYuX2FyZ19w
    YXJzZXIudXBncmFkZToKICAgICAgICAgICAgc2VsZi5ydW5fYXNfdXNlciA9IHNlbGYuRVhURVJO
    QUxfVVNFUl9OQU1FCiAgICAgICAgaWYgbm90IHNlbGYuX2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJl
    Zml4IGFuZCBub3Qgc2VsZi5fYXJnX3BhcnNlci51cGdyYWRlOgogICAgICAgICAgICBzZWxmLl9h
    cmdfcGFyc2VyLnJnd19wb29sX3ByZWZpeCA9IHNlbGYuREVGQVVMVF9SR1dfUE9PTF9QUkVGSVgK
    ICAgICAgICBpZiBzZWxmLmNlcGhfY29uZjoKICAgICAgICAgICAga3dhcmdzID0ge30KICAgICAg
    ICAgICAgaWYgc2VsZi5jZXBoX2tleXJpbmc6CiAgICAgICAgICAgICAgICBrd2FyZ3NbImNvbmYi
    XSA9IHsia2V5cmluZyI6IHNlbGYuY2VwaF9rZXlyaW5nfQogICAgICAgICAgICBzZWxmLmNsdXN0
    ZXIgPSByYWRvcy5SYWRvcyhjb25mZmlsZT1zZWxmLmNlcGhfY29uZiwgKiprd2FyZ3MpCiAgICAg
    ICAgZWxzZToKICAgICAgICAgICAgc2VsZi5jbHVzdGVyID0gcmFkb3MuUmFkb3MoKQogICAgICAg
    ICAgICBzZWxmLmNsdXN0ZXIuY29uZl9yZWFkX2ZpbGUoKQogICAgICAgIHNlbGYuY2x1c3Rlci5j
    b25uZWN0KCkKCiAgICBkZWYgc2h1dGRvd24oc2VsZik6CiAgICAgICAgaWYgc2VsZi5jbHVzdGVy
    LnN0YXRlID09ICJjb25uZWN0ZWQiOgogICAgICAgICAgICBzZWxmLmNsdXN0ZXIuc2h1dGRvd24o
    KQoKICAgIGRlZiBnZXRfZnNpZChzZWxmKToKICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmRy
    eV9ydW46CiAgICAgICAgICAgIHJldHVybiBzZWxmLmRyeV9ydW4oImNlcGggZnNpZCIpCiAgICAg
    ICAgcmV0dXJuIHN0cihzZWxmLmNsdXN0ZXIuZ2V0X2ZzaWQoKSkKCiAgICBkZWYgX2NvbW1vbl9j
    bWRfanNvbl9nZW4oc2VsZiwgY21kX2pzb24pOgogICAgICAgIGNtZCA9IGpzb24uZHVtcHMoY21k
    X2pzb24sIHNvcnRfa2V5cz1UcnVlKQogICAgICAgIHJldF92YWwsIGNtZF9vdXQsIGVycl9tc2cg
    PSBzZWxmLmNsdXN0ZXIubW9uX2NvbW1hbmQoY21kLCBiIiIpCiAgICAgICAgaWYgc2VsZi5fYXJn
    X3BhcnNlci52ZXJib3NlOgogICAgICAgICAgICBwcmludChmIkNvbW1hbmQgSW5wdXQ6IHtjbWR9
    IikKICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICBmIlJldHVybiBWYWw6IHtyZXRf
    dmFsfVxuQ29tbWFuZCBPdXRwdXQ6IHtjbWRfb3V0fVxuIgogICAgICAgICAgICAgICAgZiJFcnJv
    ciBNZXNzYWdlOiB7ZXJyX21zZ31cbi0tLS0tLS0tLS1cbiIKICAgICAgICAgICAgKQogICAgICAg
    IGpzb25fb3V0ID0ge30KICAgICAgICAjIGlmIHRoZXJlIGlzIG5vIGVycm9yIChpLmU7IHJldF92
    YWwgaXMgWkVSTykgYW5kICdjbWRfb3V0JyBpcyBub3QgZW1wdHkKICAgICAgICAjIHRoZW4gY29u
    dmVydCAnY21kX291dCcgdG8gYSBqc29uIG91dHB1dAogICAgICAgIGlmIHJldF92YWwgPT0gMCBh
    bmQgY21kX291dDoKICAgICAgICAgICAganNvbl9vdXQgPSBqc29uLmxvYWRzKGNtZF9vdXQpCiAg
    ICAgICAgcmV0dXJuIHJldF92YWwsIGpzb25fb3V0LCBlcnJfbXNnCgogICAgZGVmIGdldF9jZXBo
    X2V4dGVybmFsX21vbl9kYXRhKHNlbGYpOgogICAgICAgIGNtZF9qc29uID0geyJwcmVmaXgiOiAi
    cXVvcnVtX3N0YXR1cyIsICJmb3JtYXQiOiAianNvbiJ9CiAgICAgICAgaWYgc2VsZi5fYXJnX3Bh
    cnNlci5kcnlfcnVuOgogICAgICAgICAgICByZXR1cm4gc2VsZi5kcnlfcnVuKCJjZXBoICIgKyBj
    bWRfanNvblsicHJlZml4Il0pCiAgICAgICAgcmV0X3ZhbCwganNvbl9vdXQsIGVycl9tc2cgPSBz
    ZWxmLl9jb21tb25fY21kX2pzb25fZ2VuKGNtZF9qc29uKQogICAgICAgICMgaWYgdGhlcmUgaXMg
    YW4gdW5zdWNjZXNzZnVsIGF0dGVtcHQsCiAgICAgICAgaWYgcmV0X3ZhbCAhPSAwIG9yIGxlbihq
    c29uX291dCkgPT0gMDoKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlv
    bigKICAgICAgICAgICAgICAgICIncXVvcnVtX3N0YXR1cycgY29tbWFuZCBmYWlsZWQuXG4iCiAg
    ICAgICAgICAgICAgICBmIkVycm9yOiB7ZXJyX21zZyBpZiByZXRfdmFsICE9IDAgZWxzZSBzZWxm
    LkVNUFRZX09VVFBVVF9MSVNUfSIKICAgICAgICAgICAgKQogICAgICAgIHFfbGVhZGVyX25hbWUg
    PSBqc29uX291dFsicXVvcnVtX2xlYWRlcl9uYW1lIl0KICAgICAgICBxX2xlYWRlcl9kZXRhaWxz
    ID0ge30KICAgICAgICBxX2xlYWRlcl9tYXRjaGluZ19saXN0ID0gWwogICAgICAgICAgICBsIGZv
    ciBsIGluIGpzb25fb3V0WyJtb25tYXAiXVsibW9ucyJdIGlmIGxbIm5hbWUiXSA9PSBxX2xlYWRl
    cl9uYW1lCiAgICAgICAgXQogICAgICAgIGlmIGxlbihxX2xlYWRlcl9tYXRjaGluZ19saXN0KSA9
    PSAwOgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKCJObyBtYXRj
    aGluZyAnbW9uJyBkZXRhaWxzIGZvdW5kIikKICAgICAgICBxX2xlYWRlcl9kZXRhaWxzID0gcV9s
    ZWFkZXJfbWF0Y2hpbmdfbGlzdFswXQogICAgICAgICMgZ2V0IHRoZSBhZGRyZXNzIHZlY3RvciBv
    ZiB0aGUgcXVvcnVtLWxlYWRlcgogICAgICAgIHFfbGVhZGVyX2FkZHJ2ZWMgPSBxX2xlYWRlcl9k
    ZXRhaWxzLmdldCgicHVibGljX2FkZHJzIiwge30pLmdldCgiYWRkcnZlYyIsIFtdKQogICAgICAg
    IGlwX2FkZHIgPSBzdHIocV9sZWFkZXJfZGV0YWlsc1sicHVibGljX2FkZHIiXS5zcGxpdCgiLyIp
    WzBdKQoKICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLnYyX3BvcnRfZW5hYmxlOgogICAgICAg
    ICAgICBpZiBxX2xlYWRlcl9hZGRydmVjWzBdWyJ0eXBlIl0gPT0gInYyIjoKICAgICAgICAgICAg
    ICAgIGlwX2FkZHIgPSBxX2xlYWRlcl9hZGRydmVjWzBdWyJhZGRyIl0KICAgICAgICAgICAgZWxp
    ZiBsZW4ocV9sZWFkZXJfYWRkcnZlYykgPiAxIGFuZCBxX2xlYWRlcl9hZGRydmVjWzFdWyJ0eXBl
    Il0gPT0gInYyIjoKICAgICAgICAgICAgICAgIGlwX2FkZHIgPSBxX2xlYWRlcl9hZGRydmVjWzFd
    WyJhZGRyIl0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHN5cy5zdGRlcnIud3Jp
    dGUoCiAgICAgICAgICAgICAgICAgICAgIid2MicgYWRkcmVzcyB0eXBlIG5vdCBwcmVzZW50LCBh
    bmQgJ3YyLXBvcnQtZW5hYmxlJyBmbGFnIGlzIHByb3ZpZGVkIgogICAgICAgICAgICAgICAgKQoK
    ICAgICAgICByZXR1cm4gZiJ7c3RyKHFfbGVhZGVyX25hbWUpfT17aXBfYWRkcn0iCgogICAgZGVm
    IF9jb252ZXJ0X2hvc3RuYW1lX3RvX2lwKHNlbGYsIGhvc3RfbmFtZSwgcG9ydCwgaXBfdHlwZSk6
    CiAgICAgICAgIyBpZiAnY2x1c3RlcicgaW5zdGFuY2UgaXMgYSBkdW1teSB0eXBlLAogICAgICAg
    ICMgY2FsbCB0aGUgZHVtbXkgaW5zdGFuY2UncyAiY29udmVydCIgbWV0aG9kCiAgICAgICAgaWYg
    bm90IGhvc3RfbmFtZToKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlv
    bigiRW1wdHkgaG9zdG5hbWUgcHJvdmlkZWQiKQogICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5j
    bHVzdGVyLCBEdW1teVJhZG9zKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuY2x1c3Rlci5fY29u
    dmVydF9ob3N0bmFtZV90b19pcChob3N0X25hbWUpCgogICAgICAgIGlmIGlwX3R5cGUgPT0gIkZR
    RE4iOgogICAgICAgICAgICAjIGNoZWNrIHdoaWNoIGlwIEZRRE4gc2hvdWxkIGJlIGNvbnZlcnRl
    ZCB0bywgSVB2NCBvciBJUHY2CiAgICAgICAgICAgICMgY2hlY2sgdGhlIGhvc3QgaXAsIHRoZSBl
    bmRwb2ludCBpcCB0eXBlIHdvdWxkIGJlIHNpbWlsYXIgdG8gaG9zdCBpcAogICAgICAgICAgICBj
    bWRfanNvbiA9IHsicHJlZml4IjogIm9yY2ggaG9zdCBscyIsICJmb3JtYXQiOiAianNvbiJ9CiAg
    ICAgICAgICAgIHJldF92YWwsIGpzb25fb3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2NtZF9q
    c29uX2dlbihjbWRfanNvbikKICAgICAgICAgICAgIyBpZiB0aGVyZSBpcyBhbiB1bnN1Y2Nlc3Nm
    dWwgYXR0ZW1wdCwKICAgICAgICAgICAgaWYgcmV0X3ZhbCAhPSAwIG9yIGxlbihqc29uX291dCkg
    PT0gMDoKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAg
    ICAgICAgICAgICAgICAgICAgIidvcmNoIGhvc3QgbHMnIGNvbW1hbmQgZmFpbGVkLlxuIgogICAg
    ICAgICAgICAgICAgICAgIGYiRXJyb3I6IHtlcnJfbXNnIGlmIHJldF92YWwgIT0gMCBlbHNlIHNl
    bGYuRU1QVFlfT1VUUFVUX0xJU1R9IgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBob3N0
    X2FkZHIgPSBqc29uX291dFswXVsiYWRkciJdCiAgICAgICAgICAgICMgYWRkIDo4MCBzYW1wbGUg
    cG9ydCBpbiBpcF90eXBlLCBhcyBfaW52YWxpZF9lbmRwb2ludCBhbHNvIHZlcmlmeSBwb3J0CiAg
    ICAgICAgICAgIGhvc3RfaXBfdHlwZSA9IHNlbGYuX2ludmFsaWRfZW5kcG9pbnQoaG9zdF9hZGRy
    ICsgIjo4MCIpCiAgICAgICAgICAgIGltcG9ydCBzb2NrZXQKCiAgICAgICAgICAgIGlwID0gW10K
    ICAgICAgICAgICAgIyBleGFtcGxlIG91dHB1dCBbKDxBZGRyZXNzRmFtaWx5LkFGX0lORVQ6IDI+
    LCA8U29ja2V0S2luZC5TT0NLX1NUUkVBTTogMT4sIDYsICcnLCAoJzkzLjE4NC4yMTYuMzQnLCA4
    MCkpLCAuLi5dCiAgICAgICAgICAgICMgd2UgbmVlZCB0byBnZXQgOTMuMTg0LjIxNi4zNCBzbyBp
    dCB3b3VsZCBiZSBpcFswXVs0XVswXQogICAgICAgICAgICBpZiBob3N0X2lwX3R5cGUgPT0gIklQ
    djYiOgogICAgICAgICAgICAgICAgaXAgPSBzb2NrZXQuZ2V0YWRkcmluZm8oCiAgICAgICAgICAg
    ICAgICAgICAgaG9zdF9uYW1lLCBwb3J0LCBmYW1pbHk9c29ja2V0LkFGX0lORVQ2LCBwcm90bz1z
    b2NrZXQuSVBQUk9UT19UQ1AKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgZWxpZiBob3N0
    X2lwX3R5cGUgPT0gIklQdjQiOgogICAgICAgICAgICAgICAgaXAgPSBzb2NrZXQuZ2V0YWRkcmlu
    Zm8oCiAgICAgICAgICAgICAgICAgICAgaG9zdF9uYW1lLCBwb3J0LCBmYW1pbHk9c29ja2V0LkFG
    X0lORVQsIHByb3RvPXNvY2tldC5JUFBST1RPX1RDUAogICAgICAgICAgICAgICAgKQogICAgICAg
    ICAgICBkZWwgc29ja2V0CiAgICAgICAgICAgIHJldHVybiBpcFswXVs0XVswXQogICAgICAgIHJl
    dHVybiBob3N0X25hbWUKCiAgICBkZWYgZ2V0X2FjdGl2ZV9hbmRfc3RhbmRieV9tZ3JzKHNlbGYp
    OgogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIuZHJ5X3J1bjoKICAgICAgICAgICAgcmV0dXJu
    ICIiLCBzZWxmLmRyeV9ydW4oImNlcGggc3RhdHVzIikKICAgICAgICBtb25pdG9yaW5nX2VuZHBv
    aW50X3BvcnQgPSBzZWxmLl9hcmdfcGFyc2VyLm1vbml0b3JpbmdfZW5kcG9pbnRfcG9ydAogICAg
    ICAgIG1vbml0b3JpbmdfZW5kcG9pbnRfaXBfbGlzdCA9IHNlbGYuX2FyZ19wYXJzZXIubW9uaXRv
    cmluZ19lbmRwb2ludAogICAgICAgIHN0YW5kYnlfbWdycyA9IFtdCiAgICAgICAgaWYgbm90IG1v
    bml0b3JpbmdfZW5kcG9pbnRfaXBfbGlzdDoKICAgICAgICAgICAgY21kX2pzb24gPSB7InByZWZp
    eCI6ICJzdGF0dXMiLCAiZm9ybWF0IjogImpzb24ifQogICAgICAgICAgICByZXRfdmFsLCBqc29u
    X291dCwgZXJyX21zZyA9IHNlbGYuX2NvbW1vbl9jbWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAg
    ICAgICAgICMgaWYgdGhlcmUgaXMgYW4gdW5zdWNjZXNzZnVsIGF0dGVtcHQsCiAgICAgICAgICAg
    IGlmIHJldF92YWwgIT0gMCBvciBsZW4oanNvbl9vdXQpID09IDA6CiAgICAgICAgICAgICAgICBy
    YWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICInbWdy
    IHNlcnZpY2VzJyBjb21tYW5kIGZhaWxlZC5cbiIKICAgICAgICAgICAgICAgICAgICBmIkVycm9y
    OiB7ZXJyX21zZyBpZiByZXRfdmFsICE9IDAgZWxzZSBzZWxmLkVNUFRZX09VVFBVVF9MSVNUfSIK
    ICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgbW9uaXRvcmluZ19lbmRwb2ludCA9ICgKICAg
    ICAgICAgICAgICAgIGpzb25fb3V0LmdldCgibWdybWFwIiwge30pLmdldCgic2VydmljZXMiLCB7
    fSkuZ2V0KCJwcm9tZXRoZXVzIiwgIiIpCiAgICAgICAgICAgICkKICAgICAgICAgICAgaWYgbm90
    IG1vbml0b3JpbmdfZW5kcG9pbnQ6CiAgICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWls
    dXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICJjYW4ndCBmaW5kIG1vbml0b3Jpbmdf
    ZW5kcG9pbnQsIHByb21ldGhldXMgbW9kdWxlIG1pZ2h0IG5vdCBiZSBlbmFibGVkLCAiCiAgICAg
    ICAgICAgICAgICAgICAgImVuYWJsZSB0aGUgbW9kdWxlIGJ5IHJ1bm5pbmcgJ2NlcGggbWdyIG1v
    ZHVsZSBlbmFibGUgcHJvbWV0aGV1cyciCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICMg
    bm93IGNoZWNrIHRoZSBzdGFuZC1ieSBtZ3ItcwogICAgICAgICAgICBzdGFuZGJ5X2FyciA9IGpz
    b25fb3V0LmdldCgibWdybWFwIiwge30pLmdldCgic3RhbmRieXMiLCBbXSkKICAgICAgICAgICAg
    Zm9yIGVhY2hfc3RhbmRieSBpbiBzdGFuZGJ5X2FycjoKICAgICAgICAgICAgICAgIGlmICJuYW1l
    IiBpbiBlYWNoX3N0YW5kYnkua2V5cygpOgogICAgICAgICAgICAgICAgICAgIHN0YW5kYnlfbWdy
    cy5hcHBlbmQoZWFjaF9zdGFuZGJ5WyJuYW1lIl0pCiAgICAgICAgICAgIHRyeToKICAgICAgICAg
    ICAgICAgIHBhcnNlZF9lbmRwb2ludCA9IHVybHBhcnNlKG1vbml0b3JpbmdfZW5kcG9pbnQpCiAg
    ICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0
    aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICBmImludmFsaWQgZW5kcG9p
    bnQ6IHttb25pdG9yaW5nX2VuZHBvaW50fSIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAg
    bW9uaXRvcmluZ19lbmRwb2ludF9pcF9saXN0ID0gcGFyc2VkX2VuZHBvaW50Lmhvc3RuYW1lCiAg
    ICAgICAgICAgIGlmIG5vdCBtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQ6CiAgICAgICAgICAgICAg
    ICBtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQgPSBzdHIocGFyc2VkX2VuZHBvaW50LnBvcnQpCgog
    ICAgICAgICMgaWYgbW9uaXRvcmluZyBlbmRwb2ludCBwb3J0IGlzIG5vdCBzZXQsIHB1dCBhIGRl
    ZmF1bHQgbW9uIHBvcnQKICAgICAgICBpZiBub3QgbW9uaXRvcmluZ19lbmRwb2ludF9wb3J0Ogog
    ICAgICAgICAgICBtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQgPSBzZWxmLkRFRkFVTFRfTU9OSVRP
    UklOR19FTkRQT0lOVF9QT1JUCgogICAgICAgICMgdXNlciBjb3VsZCBnaXZlIGNvbW1hIGFuZCBz
    cGFjZSBzZXBhcmF0ZWQgaW5wdXRzIChsaWtlIC0tbW9uaXRvcmluZy1lbmRwb2ludD0iPGlwMT4s
    IDxpcDI+IikKICAgICAgICBtb25pdG9yaW5nX2VuZHBvaW50X2lwX2xpc3QgPSBtb25pdG9yaW5n
    X2VuZHBvaW50X2lwX2xpc3QucmVwbGFjZSgiLCIsICIgIikKICAgICAgICBtb25pdG9yaW5nX2Vu
    ZHBvaW50X2lwX2xpc3Rfc3BsaXQgPSBtb25pdG9yaW5nX2VuZHBvaW50X2lwX2xpc3Quc3BsaXQo
    KQogICAgICAgICMgaWYgbW9uaXRvcmluZy1lbmRwb2ludCBjb3VsZCBub3QgYmUgZm91bmQsIHJh
    aXNlIGFuIGVycm9yCiAgICAgICAgaWYgbGVuKG1vbml0b3JpbmdfZW5kcG9pbnRfaXBfbGlzdF9z
    cGxpdCkgPT0gMDoKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigi
    Tm8gJ21vbml0b3JpbmctZW5kcG9pbnQnIGZvdW5kIikKICAgICAgICAjIGZpcnN0IGlwIGlzIHRy
    ZWF0ZWQgYXMgdGhlIG1haW4gbW9uaXRvcmluZy1lbmRwb2ludAogICAgICAgIG1vbml0b3Jpbmdf
    ZW5kcG9pbnRfaXAgPSBtb25pdG9yaW5nX2VuZHBvaW50X2lwX2xpc3Rfc3BsaXRbMF0KICAgICAg
    ICAjIHJlc3Qgb2YgdGhlIGlwLXMgYXJlIGFkZGVkIHRvIHRoZSAnc3RhbmRieV9tZ3JzJyBsaXN0
    CiAgICAgICAgc3RhbmRieV9tZ3JzLmV4dGVuZChtb25pdG9yaW5nX2VuZHBvaW50X2lwX2xpc3Rf
    c3BsaXRbMTpdKQogICAgICAgIGZhaWxlZF9pcCA9IG1vbml0b3JpbmdfZW5kcG9pbnRfaXAKCiAg
    ICAgICAgbW9uaXRvcmluZ19lbmRwb2ludCA9ICI6Ii5qb2luKAogICAgICAgICAgICBbbW9uaXRv
    cmluZ19lbmRwb2ludF9pcCwgbW9uaXRvcmluZ19lbmRwb2ludF9wb3J0XQogICAgICAgICkKICAg
    ICAgICBpcF90eXBlID0gc2VsZi5faW52YWxpZF9lbmRwb2ludChtb25pdG9yaW5nX2VuZHBvaW50
    KQogICAgICAgIHRyeToKICAgICAgICAgICAgbW9uaXRvcmluZ19lbmRwb2ludF9pcCA9IHNlbGYu
    X2NvbnZlcnRfaG9zdG5hbWVfdG9faXAoCiAgICAgICAgICAgICAgICBtb25pdG9yaW5nX2VuZHBv
    aW50X2lwLCBtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQsIGlwX3R5cGUKICAgICAgICAgICAgKQog
    ICAgICAgICAgICAjIGNvbGxlY3QgYWxsIHRoZSAnc3RhbmQtYnknIG1nciBpcHMKICAgICAgICAg
    ICAgbWdyX2lwcyA9IFtdCiAgICAgICAgICAgIGZvciBlYWNoX3N0YW5kYnlfbWdyIGluIHN0YW5k
    YnlfbWdyczoKICAgICAgICAgICAgICAgIGZhaWxlZF9pcCA9IGVhY2hfc3RhbmRieV9tZ3IKICAg
    ICAgICAgICAgICAgIG1ncl9pcHMuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgIHNlbGYuX2Nv
    bnZlcnRfaG9zdG5hbWVfdG9faXAoCiAgICAgICAgICAgICAgICAgICAgICAgIGVhY2hfc3RhbmRi
    eV9tZ3IsIG1vbml0b3JpbmdfZW5kcG9pbnRfcG9ydCwgaXBfdHlwZQogICAgICAgICAgICAgICAg
    ICAgICkKICAgICAgICAgICAgICAgICkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJhaXNl
    IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICBmIkNvbnZlcnNpb24g
    b2YgaG9zdDoge2ZhaWxlZF9pcH0gdG8gSVAgZmFpbGVkLiAiCiAgICAgICAgICAgICAgICAiUGxl
    YXNlIGVudGVyIHRoZSBJUCBhZGRyZXNzZXMgb2YgYWxsIHRoZSBjZXBoLW1ncnMgd2l0aCB0aGUg
    Jy0tbW9uaXRvcmluZy1lbmRwb2ludCcgZmxhZyIKICAgICAgICAgICAgKQoKICAgICAgICBfLCBf
    LCBlcnIgPSBzZWxmLmVuZHBvaW50X2RpYWwobW9uaXRvcmluZ19lbmRwb2ludCwgaXBfdHlwZSkK
    ICAgICAgICBpZiBlcnIgPT0gIi0xIjoKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVy
    ZUV4Y2VwdGlvbihlcnIpCiAgICAgICAgIyBhZGQgdGhlIHZhbGlkYXRlZCBhY3RpdmUgbWdyIElQ
    IGludG8gdGhlIGZpcnN0IGluZGV4CiAgICAgICAgbWdyX2lwcy5pbnNlcnQoMCwgbW9uaXRvcmlu
    Z19lbmRwb2ludF9pcCkKICAgICAgICBhbGxfbWdyX2lwc19zdHIgPSAiLCIuam9pbihtZ3JfaXBz
    KQogICAgICAgIHJldHVybiBhbGxfbWdyX2lwc19zdHIsIG1vbml0b3JpbmdfZW5kcG9pbnRfcG9y
    dAoKICAgIGRlZiBjaGVja191c2VyX2V4aXN0KHNlbGYsIHVzZXIpOgogICAgICAgIGNtZF9qc29u
    ID0geyJwcmVmaXgiOiAiYXV0aCBnZXQiLCAiZW50aXR5IjogZiJ7dXNlcn0iLCAiZm9ybWF0Ijog
    Impzb24ifQogICAgICAgIHJldF92YWwsIGpzb25fb3V0LCBfID0gc2VsZi5fY29tbW9uX2NtZF9q
    c29uX2dlbihjbWRfanNvbikKICAgICAgICBpZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25fb3V0
    KSA9PSAwOgogICAgICAgICAgICByZXR1cm4gIiIKICAgICAgICByZXR1cm4gc3RyKGpzb25fb3V0
    WzBdWyJrZXkiXSkKCiAgICBkZWYgZ2V0X2NlcGhmc19wcm92aXNpb25lcl9jYXBzX2FuZF9lbnRp
    dHkoc2VsZiwgZ2VuZXJhdGlvbik6CiAgICAgICAgZW50aXR5ID0gImNsaWVudC5jc2ktY2VwaGZz
    LXByb3Zpc2lvbmVyIgogICAgICAgIGNhcHMgPSB7CiAgICAgICAgICAgICJtb24iOiAiYWxsb3cg
    ciwgYWxsb3cgY29tbWFuZCAnb3NkIGJsb2NrbGlzdCciLAogICAgICAgICAgICAibWdyIjogImFs
    bG93IHJ3IiwKICAgICAgICAgICAgIm9zZCI6ICJhbGxvdyBydyB0YWcgY2VwaGZzIG1ldGFkYXRh
    PSoiLAogICAgICAgICAgICAibWRzIjogImFsbG93ICoiLAogICAgICAgIH0KICAgICAgICBpZiBz
    ZWxmLl9hcmdfcGFyc2VyLnJlc3RyaWN0ZWRfYXV0aF9wZXJtaXNzaW9uOgogICAgICAgICAgICBr
    OHNfY2x1c3Rlcl9uYW1lID0gc2VsZi5fYXJnX3BhcnNlci5rOHNfY2x1c3Rlcl9uYW1lCiAgICAg
    ICAgICAgIGlmIGs4c19jbHVzdGVyX25hbWUgPT0gIiI6CiAgICAgICAgICAgICAgICByYWlzZSBF
    eGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICJrOHNfY2x1c3Rl
    cl9uYW1lIG5vdCBmb3VuZCwgcGxlYXNlIHNldCB0aGUgJy0tazhzLWNsdXN0ZXItbmFtZScgZmxh
    ZyIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgY2VwaGZzX2ZpbGVzeXN0ZW0gPSBzZWxm
    Ll9hcmdfcGFyc2VyLmNlcGhmc19maWxlc3lzdGVtX25hbWUKICAgICAgICAgICAgaWYgY2VwaGZz
    X2ZpbGVzeXN0ZW0gPT0gIiI6CiAgICAgICAgICAgICAgICBlbnRpdHkgPSBmIntlbnRpdHl9LXtr
    OHNfY2x1c3Rlcl9uYW1lfSIKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGVudGl0
    eSA9IGYie2VudGl0eX0te2s4c19jbHVzdGVyX25hbWV9LXtjZXBoZnNfZmlsZXN5c3RlbX0iCiAg
    ICAgICAgICAgICAgICBjYXBzWyJvc2QiXSA9IGYiYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRhZGF0
    YT17Y2VwaGZzX2ZpbGVzeXN0ZW19IgogICAgICAgIGlmIGdlbmVyYXRpb24gIT0gMDoKICAgICAg
    ICAgICAgZW50aXR5ID0gZiJ7ZW50aXR5fS57Z2VuZXJhdGlvbn0iCgogICAgICAgIHJldHVybiBj
    YXBzLCBlbnRpdHkKCiAgICBkZWYgZ2V0X2NlcGhmc19ub2RlX2NhcHNfYW5kX2VudGl0eShzZWxm
    LCBnZW5lcmF0aW9uKToKICAgICAgICBlbnRpdHkgPSAiY2xpZW50LmNzaS1jZXBoZnMtbm9kZSIK
    ICAgICAgICBjYXBzID0gewogICAgICAgICAgICAibW9uIjogImFsbG93IHIsIGFsbG93IGNvbW1h
    bmQgJ29zZCBibG9ja2xpc3QnIiwKICAgICAgICAgICAgIm1nciI6ICJhbGxvdyBydyIsCiAgICAg
    ICAgICAgICJvc2QiOiAiYWxsb3cgcncgdGFnIGNlcGhmcyAqPSoiLAogICAgICAgICAgICAibWRz
    IjogImFsbG93IHJ3IiwKICAgICAgICB9CiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5yZXN0
    cmljdGVkX2F1dGhfcGVybWlzc2lvbjoKICAgICAgICAgICAgazhzX2NsdXN0ZXJfbmFtZSA9IHNl
    bGYuX2FyZ19wYXJzZXIuazhzX2NsdXN0ZXJfbmFtZQogICAgICAgICAgICBpZiBrOHNfY2x1c3Rl
    cl9uYW1lID09ICIiOgogICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2Vw
    dGlvbigKICAgICAgICAgICAgICAgICAgICAiazhzX2NsdXN0ZXJfbmFtZSBub3QgZm91bmQsIHBs
    ZWFzZSBzZXQgdGhlICctLWs4cy1jbHVzdGVyLW5hbWUnIGZsYWciCiAgICAgICAgICAgICAgICAp
    CiAgICAgICAgICAgIGNlcGhmc19maWxlc3lzdGVtID0gc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNf
    ZmlsZXN5c3RlbV9uYW1lCiAgICAgICAgICAgIGlmIGNlcGhmc19maWxlc3lzdGVtID09ICIiOgog
    ICAgICAgICAgICAgICAgZW50aXR5ID0gZiJ7ZW50aXR5fS17azhzX2NsdXN0ZXJfbmFtZX0iCiAg
    ICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBlbnRpdHkgPSBmIntlbnRpdHl9LXtrOHNf
    Y2x1c3Rlcl9uYW1lfS17Y2VwaGZzX2ZpbGVzeXN0ZW19IgogICAgICAgICAgICAgICAgY2Fwc1si
    b3NkIl0gPSBmImFsbG93IHJ3IHRhZyBjZXBoZnMgKj17Y2VwaGZzX2ZpbGVzeXN0ZW19IgogICAg
    ICAgIGlmIGdlbmVyYXRpb24gIT0gMDoKICAgICAgICAgICAgZW50aXR5ID0gZiJ7ZW50aXR5fS57
    Z2VuZXJhdGlvbn0iCgogICAgICAgIHJldHVybiBjYXBzLCBlbnRpdHkKCiAgICBkZWYgZ2V0X2Vu
    dGl0eSgKICAgICAgICBzZWxmLAogICAgICAgIGVudGl0eSwKICAgICAgICByYmRfcG9vbF9uYW1l
    LAogICAgICAgIGFsaWFzX3JiZF9wb29sX25hbWUsCiAgICAgICAgazhzX2NsdXN0ZXJfbmFtZSwK
    ICAgICAgICByYWRvc19uYW1lc3BhY2UsCiAgICApOgogICAgICAgIGlmICgKICAgICAgICAgICAg
    cmJkX3Bvb2xfbmFtZS5jb3VudCgiLiIpICE9IDAKICAgICAgICAgICAgb3IgcmJkX3Bvb2xfbmFt
    ZS5jb3VudCgiXyIpICE9IDAKICAgICAgICAgICAgb3IgYWxpYXNfcmJkX3Bvb2xfbmFtZSAhPSAi
    IgogICAgICAgICAgICAjIGNoZWNraW5nIGFsaWFzX3JiZF9wb29sX25hbWUgaXMgbm90IGVtcHR5
    IGFzIHRoZXJlIG1heWJlIGEgc3BlY2lhbCBjaGFyYWN0ZXIgdXNlZCBvdGhlciB0aGFuIC4gb3Ig
    XwogICAgICAgICk6CiAgICAgICAgICAgIGlmIGFsaWFzX3JiZF9wb29sX25hbWUgPT0gIiI6CiAg
    ICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAg
    ICAgICAgICAgICJwbGVhc2Ugc2V0IHRoZSAnLS1hbGlhcy1yYmQtZGF0YS1wb29sLW5hbWUnIGZs
    YWcgYXMgdGhlIHJiZCBkYXRhIHBvb2wgbmFtZSBjb250YWlucyAnLicgb3IgJ18nIgogICAgICAg
    ICAgICAgICAgKQogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBhbGlhc19yYmRfcG9v
    bF9uYW1lLmNvdW50KCIuIikgIT0gMAogICAgICAgICAgICAgICAgb3IgYWxpYXNfcmJkX3Bvb2xf
    bmFtZS5jb3VudCgiXyIpICE9IDAKICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgIHJhaXNl
    IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgIictLWFsaWFz
    LXJiZC1kYXRhLXBvb2wtbmFtZScgZmxhZyB2YWx1ZSBzaG91bGQgbm90IGNvbnRhaW4gJy4nIG9y
    ICdfJyIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgZW50aXR5ID0gZiJ7ZW50aXR5fS17
    azhzX2NsdXN0ZXJfbmFtZX0te2FsaWFzX3JiZF9wb29sX25hbWV9IgogICAgICAgIGVsc2U6CiAg
    ICAgICAgICAgIGVudGl0eSA9IGYie2VudGl0eX0te2s4c19jbHVzdGVyX25hbWV9LXtyYmRfcG9v
    bF9uYW1lfSIKCiAgICAgICAgaWYgcmFkb3NfbmFtZXNwYWNlOgogICAgICAgICAgICBlbnRpdHkg
    PSBmIntlbnRpdHl9LXtyYWRvc19uYW1lc3BhY2V9IgogICAgICAgIHJldHVybiBlbnRpdHkKCiAg
    ICBkZWYgZ2V0X3JiZF9wcm92aXNpb25lcl9jYXBzX2FuZF9lbnRpdHkoc2VsZiwgZ2VuZXJhdGlv
    bik6CiAgICAgICAgZW50aXR5ID0gImNsaWVudC5jc2ktcmJkLXByb3Zpc2lvbmVyIgogICAgICAg
    IGNhcHMgPSB7CiAgICAgICAgICAgICJtb24iOiAicHJvZmlsZSByYmQsIGFsbG93IGNvbW1hbmQg
    J29zZCBibG9ja2xpc3QnIiwKICAgICAgICAgICAgIm1nciI6ICJhbGxvdyBydyIsCiAgICAgICAg
    ICAgICJvc2QiOiAicHJvZmlsZSByYmQiLAogICAgICAgIH0KICAgICAgICBpZiBzZWxmLl9hcmdf
    cGFyc2VyLnJlc3RyaWN0ZWRfYXV0aF9wZXJtaXNzaW9uOgogICAgICAgICAgICByYmRfcG9vbF9u
    YW1lID0gc2VsZi5fYXJnX3BhcnNlci5yYmRfZGF0YV9wb29sX25hbWUKICAgICAgICAgICAgYWxp
    YXNfcmJkX3Bvb2xfbmFtZSA9IHNlbGYuX2FyZ19wYXJzZXIuYWxpYXNfcmJkX2RhdGFfcG9vbF9u
    YW1lCiAgICAgICAgICAgIGs4c19jbHVzdGVyX25hbWUgPSBzZWxmLl9hcmdfcGFyc2VyLms4c19j
    bHVzdGVyX25hbWUKICAgICAgICAgICAgcmFkb3NfbmFtZXNwYWNlID0gc2VsZi5fYXJnX3BhcnNl
    ci5yYWRvc19uYW1lc3BhY2UKICAgICAgICAgICAgaWYgcmJkX3Bvb2xfbmFtZSA9PSAiIjoKICAg
    ICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAg
    ICAgICAgICAgIm1hbmRhdG9yeSBmbGFnIG5vdCBmb3VuZCwgcGxlYXNlIHNldCB0aGUgJy0tcmJk
    LWRhdGEtcG9vbC1uYW1lJyBmbGFnIgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBpZiBr
    OHNfY2x1c3Rlcl9uYW1lID09ICIiOgogICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFp
    bHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAibWFuZGF0b3J5IGZsYWcgbm90IGZv
    dW5kLCBwbGVhc2Ugc2V0IHRoZSAnLS1rOHMtY2x1c3Rlci1uYW1lJyBmbGFnIgogICAgICAgICAg
    ICAgICAgKQogICAgICAgICAgICBlbnRpdHkgPSBzZWxmLmdldF9lbnRpdHkoCiAgICAgICAgICAg
    ICAgICBlbnRpdHksCiAgICAgICAgICAgICAgICByYmRfcG9vbF9uYW1lLAogICAgICAgICAgICAg
    ICAgYWxpYXNfcmJkX3Bvb2xfbmFtZSwKICAgICAgICAgICAgICAgIGs4c19jbHVzdGVyX25hbWUs
    CiAgICAgICAgICAgICAgICByYWRvc19uYW1lc3BhY2UsCiAgICAgICAgICAgICkKICAgICAgICAg
    ICAgaWYgcmFkb3NfbmFtZXNwYWNlICE9ICIiOgogICAgICAgICAgICAgICAgY2Fwc1sib3NkIl0g
    PSAoCiAgICAgICAgICAgICAgICAgICAgZiJwcm9maWxlIHJiZCBwb29sPXtyYmRfcG9vbF9uYW1l
    fSBuYW1lc3BhY2U9e3JhZG9zX25hbWVzcGFjZX0iCiAgICAgICAgICAgICAgICApCiAgICAgICAg
    ICAgIGVsc2U6CiAgICAgICAgICAgICAgICBjYXBzWyJvc2QiXSA9IGYicHJvZmlsZSByYmQgcG9v
    bD17cmJkX3Bvb2xfbmFtZX0iCiAgICAgICAgaWYgZ2VuZXJhdGlvbiAhPSAwOgogICAgICAgICAg
    ICBlbnRpdHkgPSBmIntlbnRpdHl9LntnZW5lcmF0aW9ufSIKCiAgICAgICAgcmV0dXJuIGNhcHMs
    IGVudGl0eQoKICAgIGRlZiBnZXRfcmJkX25vZGVfY2Fwc19hbmRfZW50aXR5KHNlbGYsIGdlbmVy
    YXRpb24pOgogICAgICAgIGVudGl0eSA9ICJjbGllbnQuY3NpLXJiZC1ub2RlIgogICAgICAgIGNh
    cHMgPSB7CiAgICAgICAgICAgICJtb24iOiAicHJvZmlsZSByYmQsIGFsbG93IGNvbW1hbmQgJ29z
    ZCBibG9ja2xpc3QnIiwKICAgICAgICAgICAgIm9zZCI6ICJwcm9maWxlIHJiZCIsCiAgICAgICAg
    fQogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIucmVzdHJpY3RlZF9hdXRoX3Blcm1pc3Npb246
    CiAgICAgICAgICAgIHJiZF9wb29sX25hbWUgPSBzZWxmLl9hcmdfcGFyc2VyLnJiZF9kYXRhX3Bv
    b2xfbmFtZQogICAgICAgICAgICBhbGlhc19yYmRfcG9vbF9uYW1lID0gc2VsZi5fYXJnX3BhcnNl
    ci5hbGlhc19yYmRfZGF0YV9wb29sX25hbWUKICAgICAgICAgICAgazhzX2NsdXN0ZXJfbmFtZSA9
    IHNlbGYuX2FyZ19wYXJzZXIuazhzX2NsdXN0ZXJfbmFtZQogICAgICAgICAgICByYWRvc19uYW1l
    c3BhY2UgPSBzZWxmLl9hcmdfcGFyc2VyLnJhZG9zX25hbWVzcGFjZQogICAgICAgICAgICBpZiBy
    YmRfcG9vbF9uYW1lID09ICIiOgogICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVy
    ZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAibWFuZGF0b3J5IGZsYWcgbm90IGZvdW5k
    LCBwbGVhc2Ugc2V0IHRoZSAnLS1yYmQtZGF0YS1wb29sLW5hbWUnIGZsYWciCiAgICAgICAgICAg
    ICAgICApCiAgICAgICAgICAgIGlmIGs4c19jbHVzdGVyX25hbWUgPT0gIiI6CiAgICAgICAgICAg
    ICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAg
    ICJtYW5kYXRvcnkgZmxhZyBub3QgZm91bmQsIHBsZWFzZSBzZXQgdGhlICctLWs4cy1jbHVzdGVy
    LW5hbWUnIGZsYWciCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVudGl0eSA9IHNlbGYu
    Z2V0X2VudGl0eSgKICAgICAgICAgICAgICAgIGVudGl0eSwKICAgICAgICAgICAgICAgIHJiZF9w
    b29sX25hbWUsCiAgICAgICAgICAgICAgICBhbGlhc19yYmRfcG9vbF9uYW1lLAogICAgICAgICAg
    ICAgICAgazhzX2NsdXN0ZXJfbmFtZSwKICAgICAgICAgICAgICAgIHJhZG9zX25hbWVzcGFjZSwK
    ICAgICAgICAgICAgKQogICAgICAgICAgICBpZiByYWRvc19uYW1lc3BhY2UgIT0gIiI6CiAgICAg
    ICAgICAgICAgICBjYXBzWyJvc2QiXSA9ICgKICAgICAgICAgICAgICAgICAgICBmInByb2ZpbGUg
    cmJkIHBvb2w9e3JiZF9wb29sX25hbWV9IG5hbWVzcGFjZT17cmFkb3NfbmFtZXNwYWNlfSIKICAg
    ICAgICAgICAgICAgICkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGNhcHNbIm9z
    ZCJdID0gZiJwcm9maWxlIHJiZCBwb29sPXtyYmRfcG9vbF9uYW1lfSIKICAgICAgICBpZiBnZW5l
    cmF0aW9uICE9IDA6CiAgICAgICAgICAgIGVudGl0eSA9IGYie2VudGl0eX0ue2dlbmVyYXRpb259
    IgoKICAgICAgICByZXR1cm4gY2FwcywgZW50aXR5CgogICAgZGVmIGdldF9kZWZhdWx0VXNlcl9j
    YXBzX2FuZF9lbnRpdHkoc2VsZiwgZ2VuZXJhdGlvbik6CiAgICAgICAgZW50aXR5ID0gc2VsZi5y
    dW5fYXNfdXNlcgogICAgICAgIGNhcHMgPSB7CiAgICAgICAgICAgICJtb24iOiAiYWxsb3cgciwg
    YWxsb3cgY29tbWFuZCBxdW9ydW1fc3RhdHVzLCBhbGxvdyBjb21tYW5kIHZlcnNpb24iLAogICAg
    ICAgICAgICAibWdyIjogImFsbG93IGNvbW1hbmQgY29uZmlnIiwKICAgICAgICAgICAgIm9zZCI6
    IGYicHJvZmlsZSByYmQtcmVhZC1vbmx5LCBhbGxvdyByd3ggcG9vbD17c2VsZi5fYXJnX3BhcnNl
    ci5yZ3dfcG9vbF9wcmVmaXh9LnJndy5tZXRhLCBhbGxvdyByIHBvb2w9LnJndy5yb290LCBhbGxv
    dyBydyBwb29sPXtzZWxmLl9hcmdfcGFyc2VyLnJnd19wb29sX3ByZWZpeH0ucmd3LmNvbnRyb2ws
    IGFsbG93IHJ4IHBvb2w9e3NlbGYuX2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJlZml4fS5yZ3cubG9n
    LCBhbGxvdyB4IHBvb2w9e3NlbGYuX2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJlZml4fS5yZ3cuYnVj
    a2V0cy5pbmRleCIsCiAgICAgICAgICAgICJtZHMiOiAiYWxsb3cgKiIsCiAgICAgICAgfQoKICAg
    ICAgICBpZiBlbnRpdHkgPT0gc2VsZi5FWFRFUk5BTF9VU0VSX05BTUU6CiAgICAgICAgICAgIGlm
    IGdlbmVyYXRpb24gIT0gMDoKICAgICAgICAgICAgICAgIGVudGl0eSA9IGYie2VudGl0eX0ue2dl
    bmVyYXRpb259IgoKICAgICAgICByZXR1cm4gY2FwcywgZW50aXR5CgogICAgZGVmIGdldF9jYXBz
    X2FuZF9lbnRpdHkoc2VsZiwgdXNlcl9uYW1lLCBnZW5lcmF0aW9uKToKICAgICAgICBpZiAiY2xp
    ZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXIiIGluIHVzZXJfbmFtZToKICAgICAgICAgICAgcmV0
    dXJuIHNlbGYuZ2V0X2NlcGhmc19wcm92aXNpb25lcl9jYXBzX2FuZF9lbnRpdHkoZ2VuZXJhdGlv
    bikKICAgICAgICBpZiAiY2xpZW50LmNzaS1jZXBoZnMtbm9kZSIgaW4gdXNlcl9uYW1lOgogICAg
    ICAgICAgICByZXR1cm4gc2VsZi5nZXRfY2VwaGZzX25vZGVfY2Fwc19hbmRfZW50aXR5KGdlbmVy
    YXRpb24pCiAgICAgICAgaWYgImNsaWVudC5jc2ktcmJkLXByb3Zpc2lvbmVyIiBpbiB1c2VyX25h
    bWU6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmdldF9yYmRfcHJvdmlzaW9uZXJfY2Fwc19hbmRf
    ZW50aXR5KGdlbmVyYXRpb24pCiAgICAgICAgaWYgImNsaWVudC5jc2ktcmJkLW5vZGUiIGluIHVz
    ZXJfbmFtZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0X3JiZF9ub2RlX2NhcHNfYW5kX2Vu
    dGl0eShnZW5lcmF0aW9uKQogICAgICAgIGlmICJjbGllbnQuaGVhbHRoY2hlY2tlciIgaW4gdXNl
    cl9uYW1lOgogICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRfZGVmYXVsdFVzZXJfY2Fwc19hbmRf
    ZW50aXR5KGdlbmVyYXRpb24pCgogICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRp
    b24oCiAgICAgICAgICAgIGYibm8gdXNlciBmb3VuZCB3aXRoIHVzZXJfbmFtZToge3VzZXJfbmFt
    ZX0sICIKICAgICAgICAgICAgImdldF9jYXBzX2FuZF9lbnRpdHkgY29tbWFuZCBmYWlsZWQuXG4i
    CiAgICAgICAgKQoKICAgIGRlZiBjcmVhdGVfY2VwaENTSUtleXJpbmdfdXNlcihzZWxmLCB1c2Vy
    LCBnZW5lcmF0aW9uKToKICAgICAgICAiIiIKICAgICAgICBjb21tYW5kOiBjZXBoIGF1dGggZ2V0
    LW9yLWNyZWF0ZSBjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lciBtb24gJ2FsbG93IHInIG1n
    ciAnYWxsb3cgcncnIG9zZCAnYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRhZGF0YT0qJwogICAgICAg
    ICIiIgogICAgICAgIGNhcHMsIGVudGl0eSA9IHNlbGYuZ2V0X2NhcHNfYW5kX2VudGl0eSh1c2Vy
    LCBnZW5lcmF0aW9uKQogICAgICAgIGNtZF9qc29uID0gewogICAgICAgICAgICAicHJlZml4Ijog
    ImF1dGggZ2V0LW9yLWNyZWF0ZSIsCiAgICAgICAgICAgICJlbnRpdHkiOiBlbnRpdHksCiAgICAg
    ICAgICAgICJjYXBzIjogW2NhcCBmb3IgY2FwX2xpc3QgaW4gbGlzdChjYXBzLml0ZW1zKCkpIGZv
    ciBjYXAgaW4gY2FwX2xpc3RdLAogICAgICAgICAgICAiZm9ybWF0IjogImpzb24iLAogICAgICAg
    IH0KCiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5kcnlfcnVuOgogICAgICAgICAgICByZXR1
    cm4gKAogICAgICAgICAgICAgICAgc2VsZi5kcnlfcnVuKAogICAgICAgICAgICAgICAgICAgICJj
    ZXBoICIKICAgICAgICAgICAgICAgICAgICArIGNtZF9qc29uWyJwcmVmaXgiXQogICAgICAgICAg
    ICAgICAgICAgICsgIiAiCiAgICAgICAgICAgICAgICAgICAgKyBjbWRfanNvblsiZW50aXR5Il0K
    ICAgICAgICAgICAgICAgICAgICArICIgIgogICAgICAgICAgICAgICAgICAgICsgIiAiLmpvaW4o
    Y21kX2pzb25bImNhcHMiXSkKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAiIiwK
    ICAgICAgICAgICAgKQogICAgICAgICMgY2hlY2sgaWYgdXNlciBhbHJlYWR5IGV4aXN0CiAgICAg
    ICAgdXNlcl9rZXkgPSBzZWxmLmNoZWNrX3VzZXJfZXhpc3QoZW50aXR5KQogICAgICAgIGlmIHVz
    ZXJfa2V5ICE9ICIiOgogICAgICAgICAgICAjIGVudGl0eS5zcGxpdCgnLicpWzFdIHRvIHJlbmFt
    ZSBlbnRpdHkoY2xpZW50LmNzaS1yYmQtbm9kZSkgYXMgY3NpLXJiZC1ub2RlCiAgICAgICAgICAg
    ICMgZW50aXR5LnNwbGl0KCcuJylbMV0gdG8gcmVuYW1lIGVudGl0eShjbGllbnQuY3NpLXJiZC1u
    b2RlLjUpIGFzIGNzaS1yYmQtbm9kZQogICAgICAgICAgICByZXR1cm4gdXNlcl9rZXksIGYie2Vu
    dGl0eS5zcGxpdCgnLicpWzFdfSIKCiAgICAgICAgcmV0X3ZhbCwganNvbl9vdXQsIGVycl9tc2cg
    PSBzZWxmLl9jb21tb25fY21kX2pzb25fZ2VuKGNtZF9qc29uKQogICAgICAgICMgaWYgdGhlcmUg
    aXMgYW4gdW5zdWNjZXNzZnVsIGF0dGVtcHQsCiAgICAgICAgaWYgcmV0X3ZhbCAhPSAwIG9yIGxl
    bihqc29uX291dCkgPT0gMDoKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2Vw
    dGlvbigKICAgICAgICAgICAgICAgIGYiJ2F1dGggZ2V0LW9yLWNyZWF0ZSB7dXNlcn0nIGNvbW1h
    bmQgZmFpbGVkLlxuIgogICAgICAgICAgICAgICAgZiJFcnJvcjoge2Vycl9tc2cgaWYgcmV0X3Zh
    bCAhPSAwIGVsc2Ugc2VsZi5FTVBUWV9PVVRQVVRfTElTVH0iCiAgICAgICAgICAgICkKCiAgICAg
    ICAgIyBlbnRpdHkuc3BsaXQoJy4nKVsxXSB0byByZW5hbWUgZW50aXR5KGNsaWVudC5jc2ktcmJk
    LW5vZGUpIGFzIGNzaS1yYmQtbm9kZQogICAgICAgICMgZW50aXR5LnNwbGl0KCcuJylbMV0gdG8g
    cmVuYW1lIGVudGl0eShjbGllbnQuY3NpLXJiZC1ub2RlLjUpIGFzIGNzaS1yYmQtbm9kZQogICAg
    ICAgIHJldHVybiBzdHIoanNvbl9vdXRbMF1bImtleSJdKSwgZiJ7ZW50aXR5LnNwbGl0KCcuJylb
    MV19IgoKICAgIGRlZiBnZXRfY2VwaGZzX2RhdGFfcG9vbF9kZXRhaWxzKHNlbGYpOgogICAgICAg
    IGNtZF9qc29uID0geyJwcmVmaXgiOiAiZnMgbHMiLCAiZm9ybWF0IjogImpzb24ifQogICAgICAg
    IGlmIHNlbGYuX2FyZ19wYXJzZXIuZHJ5X3J1bjoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuZHJ5
    X3J1bigiY2VwaCAiICsgY21kX2pzb25bInByZWZpeCJdKQogICAgICAgIHJldF92YWwsIGpzb25f
    b3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRfanNvbikKICAgICAg
    ICAjIGlmIHRoZXJlIGlzIGFuIHVuc3VjY2Vzc2Z1bCBhdHRlbXB0LCByZXBvcnQgYW4gZXJyb3IK
    ICAgICAgICBpZiByZXRfdmFsICE9IDA6CiAgICAgICAgICAgICMgaWYgZnMgYW5kIGRhdGFfcG9v
    bCBhcmd1bWVudHMgYXJlIG5vdCBzZXQsIHNpbGVudGx5IHJldHVybgogICAgICAgICAgICBpZiAo
    CiAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19maWxlc3lzdGVtX25hbWUg
    PT0gIiIKICAgICAgICAgICAgICAgIGFuZCBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bv
    b2xfbmFtZSA9PSAiIgogICAgICAgICAgICApOgogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAg
    ICAgICAgICMgaWYgdXNlciBoYXMgcHJvdmlkZWQgYW55IG9mIHRoZQogICAgICAgICAgICAjICct
    LWNlcGhmcy1maWxlc3lzdGVtLW5hbWUnIG9yICctLWNlcGhmcy1kYXRhLXBvb2wtbmFtZScgYXJn
    dW1lbnRzLAogICAgICAgICAgICAjIHJhaXNlIGFuIGV4Y2VwdGlvbiBhcyB3ZSBhcmUgdW5hYmxl
    IHRvIHZlcmlmeSB0aGUgYXJncwogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhj
    ZXB0aW9uKAogICAgICAgICAgICAgICAgZiInZnMgbHMnIGNlcGggY2FsbCBmYWlsZWQgd2l0aCBl
    cnJvcjoge2Vycl9tc2d9IgogICAgICAgICAgICApCgogICAgICAgIG1hdGNoaW5nX2pzb25fb3V0
    ID0ge30KICAgICAgICAjIGlmICctLWNlcGhmcy1maWxlc3lzdGVtLW5hbWUnIGFyZ3VtZW50IGlz
    IHByb3ZpZGVkLAogICAgICAgICMgY2hlY2sgd2hldGhlciB0aGUgcHJvdmlkZWQgZmlsZXN5c3Rl
    bS1uYW1lIGV4aXN0cyBvciBub3QKICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19m
    aWxlc3lzdGVtX25hbWU6CiAgICAgICAgICAgICMgZ2V0IHRoZSBtYXRjaGluZyBsaXN0CiAgICAg
    ICAgICAgIG1hdGNoaW5nX2pzb25fb3V0X2xpc3QgPSBbCiAgICAgICAgICAgICAgICBtYXRjaGVk
    CiAgICAgICAgICAgICAgICBmb3IgbWF0Y2hlZCBpbiBqc29uX291dAogICAgICAgICAgICAgICAg
    aWYgc3RyKG1hdGNoZWRbIm5hbWUiXSkgPT0gc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5
    c3RlbV9uYW1lCiAgICAgICAgICAgIF0KICAgICAgICAgICAgIyB1bmFibGUgdG8gZmluZCBhIG1h
    dGNoaW5nIGZzLW5hbWUsIHJhaXNlIGFuIGVycm9yCiAgICAgICAgICAgIGlmIGxlbihtYXRjaGlu
    Z19qc29uX291dF9saXN0KSA9PSAwOgogICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFp
    bHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICBmIkZpbGVzeXN0ZW0gcHJvdmlkZWQs
    ICd7c2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lfScsICIKICAgICAgICAg
    ICAgICAgICAgICBmImlzIG5vdCBmb3VuZCBpbiB0aGUgZnMtbGlzdDoge1tzdHIoeFsnbmFtZSdd
    KSBmb3IgeCBpbiBqc29uX291dF19IgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBtYXRj
    aGluZ19qc29uX291dCA9IG1hdGNoaW5nX2pzb25fb3V0X2xpc3RbMF0KICAgICAgICAjIGlmIGNl
    cGhmcyBmaWxlc3lzdGVtIG5hbWUgaXMgbm90IHByb3ZpZGVkLAogICAgICAgICMgdHJ5IHRvIGdl
    dCBhIGRlZmF1bHQgZnMgbmFtZSBieSBkb2luZyB0aGUgZm9sbG93aW5nCiAgICAgICAgZWxzZToK
    ICAgICAgICAgICAgIyBhLiBjaGVjayBpZiB0aGVyZSBpcyBvbmx5IG9uZSBmaWxlc3lzdGVtIGlz
    IHByZXNlbnQKICAgICAgICAgICAgaWYgbGVuKGpzb25fb3V0KSA9PSAxOgogICAgICAgICAgICAg
    ICAgbWF0Y2hpbmdfanNvbl9vdXQgPSBqc29uX291dFswXQogICAgICAgICAgICAjIGIuIG9yIGVs
    c2UsIGNoZWNrIGlmIGRhdGFfcG9vbCBuYW1lIGlzIHByb3ZpZGVkCiAgICAgICAgICAgIGVsaWYg
    c2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZGF0YV9wb29sX25hbWU6CiAgICAgICAgICAgICAgICAj
    IGFuZCBpZiBwcmVzZW50LCBjaGVjayB3aGV0aGVyIHRoZXJlIGV4aXN0cyBhIGZzIHdoaWNoIGhh
    cyB0aGUgZGF0YV9wb29sCiAgICAgICAgICAgICAgICBmb3IgZWFjaEogaW4ganNvbl9vdXQ6CiAg
    ICAgICAgICAgICAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZGF0YV9wb29sX25h
    bWUgaW4gZWFjaEpbImRhdGFfcG9vbHMiXToKICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hp
    bmdfanNvbl9vdXQgPSBlYWNoSgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAg
    ICAgICAgICAgIyBpZiB0aGVyZSBpcyBubyBtYXRjaGluZyBmcyBleGlzdHMsIHRoYXQgbWVhbnMg
    cHJvdmlkZWQgZGF0YV9wb29sIG5hbWUgaXMgaW52YWxpZAogICAgICAgICAgICAgICAgaWYgbm90
    IG1hdGNoaW5nX2pzb25fb3V0OgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZh
    aWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgICAgIGYiUHJvdmlkZWQgZGF0YV9w
    b29sIG5hbWUsIHtzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZX0sIgogICAg
    ICAgICAgICAgICAgICAgICAgICAiIGRvZXMgbm90IGV4aXN0cyIKICAgICAgICAgICAgICAgICAg
    ICApCiAgICAgICAgICAgICMgYy4gaWYgbm90aGluZyBpcyBzZXQgYW5kIGNvdWxkbid0IGZpbmQg
    YSBkZWZhdWx0LAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIyBqdXN0IHJldHVy
    biBzaWxlbnRseQogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIG1hdGNoaW5nX2pz
    b25fb3V0OgogICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19maWxlc3lzdGVtX25h
    bWUgPSBzdHIobWF0Y2hpbmdfanNvbl9vdXRbIm5hbWUiXSkKICAgICAgICAgICAgc2VsZi5fYXJn
    X3BhcnNlci5jZXBoZnNfbWV0YWRhdGFfcG9vbF9uYW1lID0gc3RyKAogICAgICAgICAgICAgICAg
    bWF0Y2hpbmdfanNvbl9vdXRbIm1ldGFkYXRhX3Bvb2wiXQogICAgICAgICAgICApCgogICAgICAg
    IGlmIGlzaW5zdGFuY2UobWF0Y2hpbmdfanNvbl9vdXRbImRhdGFfcG9vbHMiXSwgbGlzdCk6CiAg
    ICAgICAgICAgICMgaWYgdGhlIHVzZXIgaGFzIGFscmVhZHkgcHJvdmlkZWQgZGF0YS1wb29sLW5h
    bWUsCiAgICAgICAgICAgICMgdGhyb3VnaCAtLWNlcGhmcy1kYXRhLXBvb2wtbmFtZQogICAgICAg
    ICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZToKICAgICAgICAg
    ICAgICAgICMgaWYgdGhlIHByb3ZpZGVkIG5hbWUgaXMgbm90IG1hdGNoaW5nIHdpdGggdGhlIG9u
    ZSBpbiB0aGUgbGlzdAogICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgIHNl
    bGYuX2FyZ19wYXJzZXIuY2VwaGZzX2RhdGFfcG9vbF9uYW1lCiAgICAgICAgICAgICAgICAgICAg
    bm90IGluIG1hdGNoaW5nX2pzb25fb3V0WyJkYXRhX3Bvb2xzIl0KICAgICAgICAgICAgICAgICk6
    CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAg
    ICAgICAgICAgICAgICAgICAgICAgZiJQcm92aWRlZCBkYXRhLXBvb2wtbmFtZTogJ3tzZWxmLl9h
    cmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZX0nLCAiCiAgICAgICAgICAgICAgICAgICAg
    ICAgICJkb2Vzbid0IG1hdGNoIGZyb20gdGhlIGRhdGEtcG9vbHMgbGlzdDogIgogICAgICAgICAg
    ICAgICAgICAgICAgICBmIntbc3RyKHgpIGZvciB4IGluIG1hdGNoaW5nX2pzb25fb3V0WydkYXRh
    X3Bvb2xzJ11dfSIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICMgaWYgZGF0YV9w
    b29sIG5hbWUgaXMgbm90IHByb3ZpZGVkLAogICAgICAgICAgICAjIHRoZW4gdHJ5IHRvIGZpbmQg
    YSBkZWZhdWx0IGRhdGEgcG9vbCBuYW1lCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAg
    ICAjIGlmIG5vIGRhdGFfcG9vbHMgZXhpc3QsIHNpbGVudGx5IHJldHVybgogICAgICAgICAgICAg
    ICAgaWYgbGVuKG1hdGNoaW5nX2pzb25fb3V0WyJkYXRhX3Bvb2xzIl0pID09IDA6CiAgICAgICAg
    ICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLmNlcGhm
    c19kYXRhX3Bvb2xfbmFtZSA9IHN0cigKICAgICAgICAgICAgICAgICAgICBtYXRjaGluZ19qc29u
    X291dFsiZGF0YV9wb29scyJdWzBdCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICMgaWYg
    dGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgJ2RhdGFfcG9vbHMnIGV4aXN0LAogICAgICAgICAgICAj
    IHRoZW4gd2FybiB0aGUgdXNlciB0aGF0IHdlIGFyZSB1c2luZyB0aGUgc2VsZWN0ZWQgbmFtZQog
    ICAgICAgICAgICBpZiBsZW4obWF0Y2hpbmdfanNvbl9vdXRbImRhdGFfcG9vbHMiXSkgPiAxOgog
    ICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgIldBUk5JTkc6IE11bHRp
    cGxlIGRhdGEgcG9vbHMgZGV0ZWN0ZWQ6ICIKICAgICAgICAgICAgICAgICAgICBmIntbc3RyKHgp
    IGZvciB4IGluIG1hdGNoaW5nX2pzb25fb3V0WydkYXRhX3Bvb2xzJ11dfVxuIgogICAgICAgICAg
    ICAgICAgICAgIGYiVXNpbmcgdGhlIGRhdGEtcG9vbDogJ3tzZWxmLl9hcmdfcGFyc2VyLmNlcGhm
    c19kYXRhX3Bvb2xfbmFtZX0nXG4iCiAgICAgICAgICAgICAgICApCgogICAgZGVmIGNyZWF0ZV9j
    aGVja2VyS2V5KHNlbGYsIHVzZXIsIGdlbmVyYXRpb24pOgogICAgICAgIGNhcHMsIGVudGl0eSA9
    IHNlbGYuZ2V0X2NhcHNfYW5kX2VudGl0eSh1c2VyLCBnZW5lcmF0aW9uKQogICAgICAgIGNtZF9q
    c29uID0gewogICAgICAgICAgICAicHJlZml4IjogImF1dGggZ2V0LW9yLWNyZWF0ZSIsCiAgICAg
    ICAgICAgICJlbnRpdHkiOiBlbnRpdHksCiAgICAgICAgICAgICJjYXBzIjogW2NhcCBmb3IgY2Fw
    X2xpc3QgaW4gbGlzdChjYXBzLml0ZW1zKCkpIGZvciBjYXAgaW4gY2FwX2xpc3RdLAogICAgICAg
    ICAgICAiZm9ybWF0IjogImpzb24iLAogICAgICAgIH0KCiAgICAgICAgaWYgc2VsZi5fYXJnX3Bh
    cnNlci5kcnlfcnVuOgogICAgICAgICAgICByZXR1cm4gc2VsZi5kcnlfcnVuKAogICAgICAgICAg
    ICAgICAgImNlcGggIgogICAgICAgICAgICAgICAgKyBjbWRfanNvblsicHJlZml4Il0KICAgICAg
    ICAgICAgICAgICsgIiAiCiAgICAgICAgICAgICAgICArIGNtZF9qc29uWyJlbnRpdHkiXQogICAg
    ICAgICAgICAgICAgKyAiICIKICAgICAgICAgICAgICAgICsgIiAiLmpvaW4oY21kX2pzb25bImNh
    cHMiXSkKICAgICAgICAgICAgKQogICAgICAgICMgY2hlY2sgaWYgdXNlciBhbHJlYWR5IGV4aXN0
    CiAgICAgICAgdXNlcl9rZXkgPSBzZWxmLmNoZWNrX3VzZXJfZXhpc3QoZW50aXR5KQogICAgICAg
    IGlmIHVzZXJfa2V5ICE9ICIiOgogICAgICAgICAgICByZXR1cm4gdXNlcl9rZXkKCiAgICAgICAg
    cmV0X3ZhbCwganNvbl9vdXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pzb25fZ2VuKGNt
    ZF9qc29uKQogICAgICAgICMgaWYgdGhlcmUgaXMgYW4gdW5zdWNjZXNzZnVsIGF0dGVtcHQsCiAg
    ICAgICAgaWYgcmV0X3ZhbCAhPSAwIG9yIGxlbihqc29uX291dCkgPT0gMDoKICAgICAgICAgICAg
    cmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgIGYiJ2F1dGgg
    Z2V0LW9yLWNyZWF0ZSB7c2VsZi5ydW5fYXNfdXNlcn0nIGNvbW1hbmQgZmFpbGVkXG4iCiAgICAg
    ICAgICAgICAgICBmIkVycm9yOiB7ZXJyX21zZyBpZiByZXRfdmFsICE9IDAgZWxzZSBzZWxmLkVN
    UFRZX09VVFBVVF9MSVNUfSIKICAgICAgICAgICAgKQoKICAgICAgICByZXR1cm4gc3RyKGpzb25f
    b3V0WzBdWyJrZXkiXSkKCiAgICBkZWYgZ2V0X2NlcGhfZGFzaGJvYXJkX2xpbmsoc2VsZik6CiAg
    ICAgICAgY21kX2pzb24gPSB7InByZWZpeCI6ICJtZ3Igc2VydmljZXMiLCAiZm9ybWF0IjogImpz
    b24ifQogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIuZHJ5X3J1bjoKICAgICAgICAgICAgcmV0
    dXJuIHNlbGYuZHJ5X3J1bigiY2VwaCAiICsgY21kX2pzb25bInByZWZpeCJdKQogICAgICAgIHJl
    dF92YWwsIGpzb25fb3V0LCBfID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRfanNvbikK
    ICAgICAgICAjIGlmIHRoZXJlIGlzIGFuIHVuc3VjY2Vzc2Z1bCBhdHRlbXB0LAogICAgICAgIGlm
    IHJldF92YWwgIT0gMCBvciBsZW4oanNvbl9vdXQpID09IDA6CiAgICAgICAgICAgIHJldHVybiBO
    b25lCiAgICAgICAgaWYgImRhc2hib2FyZCIgbm90IGluIGpzb25fb3V0OgogICAgICAgICAgICBy
    ZXR1cm4gTm9uZQogICAgICAgIHJldHVybiBqc29uX291dFsiZGFzaGJvYXJkIl0KCiAgICBkZWYg
    Y3JlYXRlX3Jnd19hZG1pbl9vcHNfdXNlcihzZWxmKToKICAgICAgICBjbWQgPSBbCiAgICAgICAg
    ICAgICJyYWRvc2d3LWFkbWluIiwKICAgICAgICAgICAgInVzZXIiLAogICAgICAgICAgICAiY3Jl
    YXRlIiwKICAgICAgICAgICAgIi0tdWlkIiwKICAgICAgICAgICAgc2VsZi5FWFRFUk5BTF9SR1df
    QURNSU5fT1BTX1VTRVJfTkFNRSwKICAgICAgICAgICAgIi0tZGlzcGxheS1uYW1lIiwKICAgICAg
    ICAgICAgIlJvb2sgUkdXIEFkbWluIE9wcyB1c2VyIiwKICAgICAgICAgICAgIi0tY2FwcyIsCiAg
    ICAgICAgICAgICJidWNrZXRzPSo7dXNlcnM9Kjt1c2FnZT1yZWFkO21ldGFkYXRhPXJlYWQ7em9u
    ZT1yZWFkIiwKICAgICAgICAgICAgIi0tcmd3LXJlYWxtIiwKICAgICAgICAgICAgc2VsZi5fYXJn
    X3BhcnNlci5yZ3dfcmVhbG1fbmFtZSwKICAgICAgICAgICAgIi0tcmd3LXpvbmVncm91cCIsCiAg
    ICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIucmd3X3pvbmVncm91cF9uYW1lLAogICAgICAgICAg
    ICAiLS1yZ3ctem9uZSIsCiAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIucmd3X3pvbmVfbmFt
    ZSwKICAgICAgICBdCiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5kcnlfcnVuOgogICAgICAg
    ICAgICByZXR1cm4gc2VsZi5kcnlfcnVuKCJjZXBoICIgKyAiICIuam9pbihjbWQpKQogICAgICAg
    IHRyeToKICAgICAgICAgICAgb3V0cHV0ID0gc3VicHJvY2Vzcy5jaGVja19vdXRwdXQoY21kLCBz
    dGRlcnI9c3VicHJvY2Vzcy5QSVBFKQogICAgICAgIGV4Y2VwdCBzdWJwcm9jZXNzLkNhbGxlZFBy
    b2Nlc3NFcnJvciBhcyBleGVjRXJyOgogICAgICAgICAgICAjIGlmIHRoZSB1c2VyIGFscmVhZHkg
    ZXhpc3RzLCB3ZSBqdXN0IHF1ZXJ5IGl0CiAgICAgICAgICAgIGlmIGV4ZWNFcnIucmV0dXJuY29k
    ZSA9PSBlcnJuby5FRVhJU1Q6CiAgICAgICAgICAgICAgICBjbWQgPSBbCiAgICAgICAgICAgICAg
    ICAgICAgInJhZG9zZ3ctYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICJ1c2VyIiwKICAgICAg
    ICAgICAgICAgICAgICAiaW5mbyIsCiAgICAgICAgICAgICAgICAgICAgIi0tdWlkIiwKICAgICAg
    ICAgICAgICAgICAgICBzZWxmLkVYVEVSTkFMX1JHV19BRE1JTl9PUFNfVVNFUl9OQU1FLAogICAg
    ICAgICAgICAgICAgICAgICItLXJndy1yZWFsbSIsCiAgICAgICAgICAgICAgICAgICAgc2VsZi5f
    YXJnX3BhcnNlci5yZ3dfcmVhbG1fbmFtZSwKICAgICAgICAgICAgICAgICAgICAiLS1yZ3ctem9u
    ZWdyb3VwIiwKICAgICAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLnJnd196b25lZ3Jv
    dXBfbmFtZSwKICAgICAgICAgICAgICAgICAgICAiLS1yZ3ctem9uZSIsCiAgICAgICAgICAgICAg
    ICAgICAgc2VsZi5fYXJnX3BhcnNlci5yZ3dfem9uZV9uYW1lLAogICAgICAgICAgICAgICAgXQog
    ICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IHN1YnByb2Nl
    c3MuY2hlY2tfb3V0cHV0KGNtZCwgc3RkZXJyPXN1YnByb2Nlc3MuUElQRSkKICAgICAgICAgICAg
    ICAgIGV4Y2VwdCBzdWJwcm9jZXNzLkNhbGxlZFByb2Nlc3NFcnJvciBhcyBleGVjRXJyOgogICAg
    ICAgICAgICAgICAgICAgIGVycl9tc2cgPSAoCiAgICAgICAgICAgICAgICAgICAgICAgIGYiZmFp
    bGVkIHRvIGV4ZWN1dGUgY29tbWFuZCB7Y21kfS4gT3V0cHV0OiB7ZXhlY0Vyci5vdXRwdXR9LiAi
    CiAgICAgICAgICAgICAgICAgICAgICAgIGYiQ29kZToge2V4ZWNFcnIucmV0dXJuY29kZX0uIEVy
    cm9yOiB7ZXhlY0Vyci5zdGRlcnJ9IgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAg
    ICAgICAgICBzeXMuc3RkZXJyLndyaXRlKGVycl9tc2cpCiAgICAgICAgICAgICAgICAgICAgcmV0
    dXJuIE5vbmUsIE5vbmUsIEZhbHNlLCAiLTEiCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAg
    ICAgICBlcnJfbXNnID0gKAogICAgICAgICAgICAgICAgICAgIGYiZmFpbGVkIHRvIGV4ZWN1dGUg
    Y29tbWFuZCB7Y21kfS4gT3V0cHV0OiB7ZXhlY0Vyci5vdXRwdXR9LiAiCiAgICAgICAgICAgICAg
    ICAgICAgZiJDb2RlOiB7ZXhlY0Vyci5yZXR1cm5jb2RlfS4gRXJyb3I6IHtleGVjRXJyLnN0ZGVy
    cn0iCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBzeXMuc3RkZXJyLndyaXRlKGVy
    cl9tc2cpCiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZSwgTm9uZSwgRmFsc2UsICItMSIKCiAg
    ICAgICAgIyBzZXBhcmF0ZWx5IGFkZCBpbmZvPXJlYWQgY2FwcyBmb3Igcmd3LWVuZHBvaW50IGlw
    IHZhbGlkYXRpb24KICAgICAgICBpbmZvX2NhcF9zdXBwb3J0ZWQgPSBUcnVlCiAgICAgICAgY21k
    ID0gWwogICAgICAgICAgICAicmFkb3Nndy1hZG1pbiIsCiAgICAgICAgICAgICJjYXBzIiwKICAg
    ICAgICAgICAgImFkZCIsCiAgICAgICAgICAgICItLXVpZCIsCiAgICAgICAgICAgIHNlbGYuRVhU
    RVJOQUxfUkdXX0FETUlOX09QU19VU0VSX05BTUUsCiAgICAgICAgICAgICItLWNhcHMiLAogICAg
    ICAgICAgICAiaW5mbz1yZWFkIiwKICAgICAgICAgICAgIi0tcmd3LXJlYWxtIiwKICAgICAgICAg
    ICAgc2VsZi5fYXJnX3BhcnNlci5yZ3dfcmVhbG1fbmFtZSwKICAgICAgICAgICAgIi0tcmd3LXpv
    bmVncm91cCIsCiAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIucmd3X3pvbmVncm91cF9uYW1l
    LAogICAgICAgICAgICAiLS1yZ3ctem9uZSIsCiAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIu
    cmd3X3pvbmVfbmFtZSwKICAgICAgICBdCiAgICAgICAgdHJ5OgogICAgICAgICAgICBvdXRwdXQg
    PSBzdWJwcm9jZXNzLmNoZWNrX291dHB1dChjbWQsIHN0ZGVycj1zdWJwcm9jZXNzLlBJUEUpCiAg
    ICAgICAgZXhjZXB0IHN1YnByb2Nlc3MuQ2FsbGVkUHJvY2Vzc0Vycm9yIGFzIGV4ZWNFcnI6CiAg
    ICAgICAgICAgICMgaWYgdGhlIGNlcGggdmVyc2lvbiBub3Qgc3VwcG9ydGVkIGZvciBhZGRpbmcg
    YGluZm89cmVhZGAgY2FwKHJnd192YWxpZGF0aW9uKQogICAgICAgICAgICBpZiAoCiAgICAgICAg
    ICAgICAgICAiY291bGQgbm90IGFkZCBjYXBzOiB1bmFibGUgdG8gYWRkIGNhcHM6IGluZm89cmVh
    ZFxuIgogICAgICAgICAgICAgICAgaW4gZXhlY0Vyci5zdGRlcnIuZGVjb2RlKCJ1dGYtOCIpCiAg
    ICAgICAgICAgICAgICBhbmQgZXhlY0Vyci5yZXR1cm5jb2RlID09IDI0NAogICAgICAgICAgICAp
    OgogICAgICAgICAgICAgICAgaW5mb19jYXBfc3VwcG9ydGVkID0gRmFsc2UKICAgICAgICAgICAg
    ZWxzZToKICAgICAgICAgICAgICAgIGVycl9tc2cgPSAoCiAgICAgICAgICAgICAgICAgICAgZiJm
    YWlsZWQgdG8gZXhlY3V0ZSBjb21tYW5kIHtjbWR9LiBPdXRwdXQ6IHtleGVjRXJyLm91dHB1dH0u
    ICIKICAgICAgICAgICAgICAgICAgICBmIkNvZGU6IHtleGVjRXJyLnJldHVybmNvZGV9LiBFcnJv
    cjoge2V4ZWNFcnIuc3RkZXJyfSIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHN5
    cy5zdGRlcnIud3JpdGUoZXJyX21zZykKICAgICAgICAgICAgICAgIHJldHVybiBOb25lLCBOb25l
    LCBGYWxzZSwgIi0xIgoKICAgICAgICBqc29ub3V0cHV0ID0ganNvbi5sb2FkcyhvdXRwdXQpCiAg
    ICAgICAgcmV0dXJuICgKICAgICAgICAgICAganNvbm91dHB1dFsia2V5cyJdWzBdWyJhY2Nlc3Nf
    a2V5Il0sCiAgICAgICAgICAgIGpzb25vdXRwdXRbImtleXMiXVswXVsic2VjcmV0X2tleSJdLAog
    ICAgICAgICAgICBpbmZvX2NhcF9zdXBwb3J0ZWQsCiAgICAgICAgICAgICIiLAogICAgICAgICkK
    CiAgICBkZWYgdmFsaWRhdGVfcmJkX3Bvb2woc2VsZiwgcG9vbF9uYW1lKToKICAgICAgICBpZiBu
    b3Qgc2VsZi5jbHVzdGVyLnBvb2xfZXhpc3RzKHBvb2xfbmFtZSk6CiAgICAgICAgICAgIHJhaXNl
    IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICBmIlRoZSBwcm92aWRl
    ZCBwb29sLCAne3Bvb2xfbmFtZX0nLCBkb2VzIG5vdCBleGlzdCIKICAgICAgICAgICAgKQoKICAg
    IGRlZiBpbml0X3JiZF9wb29sKHNlbGYsIHJiZF9wb29sX25hbWUpOgogICAgICAgIGlmIGlzaW5z
    dGFuY2Uoc2VsZi5jbHVzdGVyLCBEdW1teVJhZG9zKToKICAgICAgICAgICAgcmV0dXJuCiAgICAg
    ICAgaW9jdHggPSBzZWxmLmNsdXN0ZXIub3Blbl9pb2N0eChyYmRfcG9vbF9uYW1lKQogICAgICAg
    IHJiZF9pbnN0ID0gcmJkLlJCRCgpCiAgICAgICAgcmJkX2luc3QucG9vbF9pbml0KGlvY3R4LCBU
    cnVlKQoKICAgIGRlZiB2YWxpZGF0ZV9yYWRvc19uYW1lc3BhY2Uoc2VsZik6CiAgICAgICAgcmJk
    X3Bvb2xfbmFtZSA9IHNlbGYuX2FyZ19wYXJzZXIucmJkX2RhdGFfcG9vbF9uYW1lCiAgICAgICAg
    aWYgc2VsZi5fYXJnX3BhcnNlci5yYmRfbWV0YWRhdGFfZWNfcG9vbF9uYW1lOgogICAgICAgICAg
    ICByYmRfcG9vbF9uYW1lID0gc2VsZi5fYXJnX3BhcnNlci5yYmRfbWV0YWRhdGFfZWNfcG9vbF9u
    YW1lCiAgICAgICAgcmFkb3NfbmFtZXNwYWNlID0gc2VsZi5fYXJnX3BhcnNlci5yYWRvc19uYW1l
    c3BhY2UKICAgICAgICBpZiByYWRvc19uYW1lc3BhY2UgPT0gIiI6CiAgICAgICAgICAgIHJldHVy
    bgogICAgICAgIGlmIHJhZG9zX25hbWVzcGFjZS5pc2xvd2VyKCkgPT0gRmFsc2U6CiAgICAgICAg
    ICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICBmIlRo
    ZSBwcm92aWRlZCByYWRvcyBOYW1lc3BhY2UsICd7cmFkb3NfbmFtZXNwYWNlfScsICIKICAgICAg
    ICAgICAgICAgIGYiY29udGFpbnMgdXBwZXIgY2FzZSIKICAgICAgICAgICAgKQogICAgICAgIHJi
    ZF9pbnN0ID0gcmJkLlJCRCgpCiAgICAgICAgaW9jdHggPSBzZWxmLmNsdXN0ZXIub3Blbl9pb2N0
    eChyYmRfcG9vbF9uYW1lKQogICAgICAgIGlmIHJiZF9pbnN0Lm5hbWVzcGFjZV9leGlzdHMoaW9j
    dHgsIHJhZG9zX25hbWVzcGFjZSkgaXMgRmFsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlv
    bkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICBmIlRoZSBwcm92aWRlZCByYWRvcyBO
    YW1lc3BhY2UsICd7cmFkb3NfbmFtZXNwYWNlfScsICIKICAgICAgICAgICAgICAgIGYiaXMgbm90
    IGZvdW5kIGluIHRoZSBwb29sICd7cmJkX3Bvb2xfbmFtZX0nIgogICAgICAgICAgICApCgogICAg
    ZGVmIGdldF9vcl9jcmVhdGVfc3Vidm9sdW1lX2dyb3VwKHNlbGYsIHN1YnZvbHVtZV9ncm91cCwg
    Y2VwaGZzX2ZpbGVzeXN0ZW1fbmFtZSk6CiAgICAgICAgY21kID0gWwogICAgICAgICAgICAiY2Vw
    aCIsCiAgICAgICAgICAgICJmcyIsCiAgICAgICAgICAgICJzdWJ2b2x1bWVncm91cCIsCiAgICAg
    ICAgICAgICJnZXRwYXRoIiwKICAgICAgICAgICAgY2VwaGZzX2ZpbGVzeXN0ZW1fbmFtZSwKICAg
    ICAgICAgICAgc3Vidm9sdW1lX2dyb3VwLAogICAgICAgIF0KICAgICAgICB0cnk6CiAgICAgICAg
    ICAgIF8gPSBzdWJwcm9jZXNzLmNoZWNrX291dHB1dChjbWQsIHN0ZGVycj1zdWJwcm9jZXNzLlBJ
    UEUpCiAgICAgICAgZXhjZXB0IHN1YnByb2Nlc3MuQ2FsbGVkUHJvY2Vzc0Vycm9yOgogICAgICAg
    ICAgICBjbWQgPSBbCiAgICAgICAgICAgICAgICAiY2VwaCIsCiAgICAgICAgICAgICAgICAiZnMi
    LAogICAgICAgICAgICAgICAgInN1YnZvbHVtZWdyb3VwIiwKICAgICAgICAgICAgICAgICJjcmVh
    dGUiLAogICAgICAgICAgICAgICAgY2VwaGZzX2ZpbGVzeXN0ZW1fbmFtZSwKICAgICAgICAgICAg
    ICAgIHN1YnZvbHVtZV9ncm91cCwKICAgICAgICAgICAgXQogICAgICAgICAgICB0cnk6CiAgICAg
    ICAgICAgICAgICBfID0gc3VicHJvY2Vzcy5jaGVja19vdXRwdXQoY21kLCBzdGRlcnI9c3VicHJv
    Y2Vzcy5QSVBFKQogICAgICAgICAgICBleGNlcHQgc3VicHJvY2Vzcy5DYWxsZWRQcm9jZXNzRXJy
    b3I6CiAgICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAg
    ICAgICAgICAgICAgICAgIGYic3Vidm9sdW1lIGdyb3VwIHtzdWJ2b2x1bWVfZ3JvdXB9IGlzIG5v
    dCBhYmxlIHRvIGdldCBjcmVhdGVkIgogICAgICAgICAgICAgICAgKQoKICAgIGRlZiBwaW5fc3Vi
    dm9sdW1lKAogICAgICAgIHNlbGYsIHN1YnZvbHVtZV9ncm91cCwgY2VwaGZzX2ZpbGVzeXN0ZW1f
    bmFtZSwgcGluX3R5cGUsIHBpbl9zZXR0aW5nCiAgICApOgogICAgICAgIGNtZCA9IFsKICAgICAg
    ICAgICAgImNlcGgiLAogICAgICAgICAgICAiZnMiLAogICAgICAgICAgICAic3Vidm9sdW1lZ3Jv
    dXAiLAogICAgICAgICAgICAicGluIiwKICAgICAgICAgICAgY2VwaGZzX2ZpbGVzeXN0ZW1fbmFt
    ZSwKICAgICAgICAgICAgc3Vidm9sdW1lX2dyb3VwLAogICAgICAgICAgICBwaW5fdHlwZSwKICAg
    ICAgICAgICAgcGluX3NldHRpbmcsCiAgICAgICAgXQogICAgICAgIHRyeToKICAgICAgICAgICAg
    XyA9IHN1YnByb2Nlc3MuY2hlY2tfb3V0cHV0KGNtZCwgc3RkZXJyPXN1YnByb2Nlc3MuUElQRSkK
    ICAgICAgICBleGNlcHQgc3VicHJvY2Vzcy5DYWxsZWRQcm9jZXNzRXJyb3I6CiAgICAgICAgICAg
    IHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICBmInN1YnZv
    bHVtZSBncm91cCB7c3Vidm9sdW1lX2dyb3VwfSBpcyBub3QgYWJsZSB0byBnZXQgcGlubmVkIgog
    ICAgICAgICAgICApCgogICAgZGVmIGdldF9yZ3dfZnNpZChzZWxmLCBiYXNlX3VybCwgdmVyaWZ5
    KToKICAgICAgICBhY2Nlc3Nfa2V5ID0gc2VsZi5vdXRfbWFwWyJSR1dfQURNSU5fT1BTX1VTRVJf
    QUNDRVNTX0tFWSJdCiAgICAgICAgc2VjcmV0X2tleSA9IHNlbGYub3V0X21hcFsiUkdXX0FETUlO
    X09QU19VU0VSX1NFQ1JFVF9LRVkiXQogICAgICAgIHJnd19lbmRwb2ludCA9IHNlbGYuX2FyZ19w
    YXJzZXIucmd3X2VuZHBvaW50CiAgICAgICAgYmFzZV91cmwgPSBiYXNlX3VybCArICI6Ly8iICsg
    cmd3X2VuZHBvaW50ICsgIi9hZG1pbi9pbmZvPyIKICAgICAgICBwYXJhbXMgPSB7ImZvcm1hdCI6
    ICJqc29uIn0KICAgICAgICByZXF1ZXN0X3VybCA9IGJhc2VfdXJsICsgdXJsZW5jb2RlKHBhcmFt
    cykKCiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KAogICAgICAgICAg
    ICAgICAgcmVxdWVzdF91cmwsCiAgICAgICAgICAgICAgICBhdXRoPVMzQXV0aChhY2Nlc3Nfa2V5
    LCBzZWNyZXRfa2V5LCByZ3dfZW5kcG9pbnQpLAogICAgICAgICAgICAgICAgdmVyaWZ5PXZlcmlm
    eSwKICAgICAgICAgICAgKQogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLlRpbWVv
    dXQ6CiAgICAgICAgICAgIHN5cy5zdGRlcnIud3JpdGUoCiAgICAgICAgICAgICAgICBmImludmFs
    aWQgZW5kcG9pbnQ6LCBub3QgYWJsZSB0byBjYWxsIGFkbWluLW9wcyBhcGl7cmd3X2VuZHBvaW50
    fSIKICAgICAgICAgICAgKQogICAgICAgICAgICByZXR1cm4gIiIsICItMSIKICAgICAgICByMSA9
    IHIuanNvbigpCiAgICAgICAgaWYgcjEgaXMgTm9uZSBvciByMS5nZXQoImluZm8iKSBpcyBOb25l
    OgogICAgICAgICAgICBzeXMuc3RkZXJyLndyaXRlKAogICAgICAgICAgICAgICAgZiJUaGUgcHJv
    dmlkZWQgcmd3IGVuZHBvaW50LCAne3NlbGYuX2FyZ19wYXJzZXIucmd3X2VuZHBvaW50fScsIGlz
    IGludmFsaWQgd2l0aCBodHRwIHN0YXR1cyBjb2RlOiB7ci5zdGF0dXNfY29kZX0iCiAgICAgICAg
    ICAgICkKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAg
    ICAgICAgIi0xIiwKICAgICAgICAgICAgKQoKICAgICAgICByZXR1cm4gcjFbImluZm8iXVsic3Rv
    cmFnZV9iYWNrZW5kcyJdWzBdWyJjbHVzdGVyX2lkIl0sICIiCgogICAgZGVmIHZhbGlkYXRlX3Jn
    d19lbmRwb2ludChzZWxmLCBpbmZvX2NhcF9zdXBwb3J0ZWQpOgogICAgICAgICMgaWYgdGhlICdj
    bHVzdGVyJyBpbnN0YW5jZSBpcyBhIGR1bW15IG9uZSwKICAgICAgICAjIGRvbid0IHRyeSB0byBy
    ZWFjaCBvdXQgdG8gdGhlIGVuZHBvaW50CiAgICAgICAgaWYgaXNpbnN0YW5jZShzZWxmLmNsdXN0
    ZXIsIER1bW15UmFkb3MpOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgcmd3X2VuZHBvaW50
    ID0gc2VsZi5fYXJnX3BhcnNlci5yZ3dfZW5kcG9pbnQKCiAgICAgICAgIyB2YWxpZGF0ZSByZ3cg
    ZW5kcG9pbnQgb25seSBpZiBpcCBhZGRyZXNzIGlzIHBhc3NlZAogICAgICAgIGlwX3R5cGUgPSBz
    ZWxmLl9pbnZhbGlkX2VuZHBvaW50KHJnd19lbmRwb2ludCkKCiAgICAgICAgIyBjaGVjayBpZiB0
    aGUgcmd3IGVuZHBvaW50IGlzIHJlYWNoYWJsZQogICAgICAgIGNlcnQgPSBOb25lCiAgICAgICAg
    aWYgbm90IHNlbGYuX2FyZ19wYXJzZXIucmd3X3NraXBfdGxzIGFuZCBzZWxmLnZhbGlkYXRlX3Jn
    d19lbmRwb2ludF90bHNfY2VydCgpOgogICAgICAgICAgICBjZXJ0ID0gc2VsZi5fYXJnX3BhcnNl
    ci5yZ3dfdGxzX2NlcnRfcGF0aAogICAgICAgIGJhc2VfdXJsLCB2ZXJpZnksIGVyciA9IHNlbGYu
    ZW5kcG9pbnRfZGlhbChyZ3dfZW5kcG9pbnQsIGlwX3R5cGUsIGNlcnQ9Y2VydCkKICAgICAgICBp
    ZiBlcnIgIT0gIiI6CiAgICAgICAgICAgIHJldHVybiAiLTEiCgogICAgICAgICMgY2hlY2sgaWYg
    dGhlIHJndyBlbmRwb2ludCBiZWxvbmdzIHRvIHRoZSBzYW1lIGNsdXN0ZXIKICAgICAgICAjIG9u
    bHkgY2hlY2sgaWYgYGluZm9gIGNhcCBpcyBzdXBwb3J0ZWQKICAgICAgICBpZiBpbmZvX2NhcF9z
    dXBwb3J0ZWQ6CiAgICAgICAgICAgIGZzaWQgPSBzZWxmLmdldF9mc2lkKCkKICAgICAgICAgICAg
    cmd3X2ZzaWQsIGVyciA9IHNlbGYuZ2V0X3Jnd19mc2lkKGJhc2VfdXJsLCB2ZXJpZnkpCiAgICAg
    ICAgICAgIGlmIGVyciA9PSAiLTEiOgogICAgICAgICAgICAgICAgcmV0dXJuICItMSIKICAgICAg
    ICAgICAgaWYgZnNpZCAhPSByZ3dfZnNpZDoKICAgICAgICAgICAgICAgIHN5cy5zdGRlcnIud3Jp
    dGUoCiAgICAgICAgICAgICAgICAgICAgZiJUaGUgcHJvdmlkZWQgcmd3IEVuZHBvaW50LCAne3Nl
    bGYuX2FyZ19wYXJzZXIucmd3X2VuZHBvaW50fScsIGlzIGludmFsaWQuIFdlIGFyZSB2YWxpZGF0
    aW5nIGJ5IGNhbGxpbmcgdGhlIGFkbWlub3BzIGFwaSB0aHJvdWdoIHJndy1lbmRwb2ludCBhbmQg
    dmFsaWRhdGluZyB0aGUgY2x1c3Rlcl9pZCAne3Jnd19mc2lkfScgaXMgZXF1YWwgdG8gdGhlIGNl
    cGggY2x1c3RlciBmc2lkICd7ZnNpZH0nIgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAg
    ICAgcmV0dXJuICItMSIKCiAgICAgICAgIyBjaGVjayBpZiB0aGUgcmd3IGVuZHBvaW50IHBvb2wg
    ZXhpc3QKICAgICAgICAjIG9ubHkgdmFsaWRhdGUgaWYgcmd3X3Bvb2xfcHJlZml4IGlzIHBhc3Nl
    ZCBlbHNlIGl0IHdpbGwgdGFrZSBkZWZhdWx0IHZhbHVlIGFuZCB3ZSBkb24ndCBjcmVhdGUgdGhl
    c2UgZGVmYXVsdCBwb29scwogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJl
    Zml4ICE9ICJkZWZhdWx0IjoKICAgICAgICAgICAgcmd3X3Bvb2xzX3RvX3ZhbGlkYXRlID0gWwog
    ICAgICAgICAgICAgICAgZiJ7c2VsZi5fYXJnX3BhcnNlci5yZ3dfcG9vbF9wcmVmaXh9LnJndy5t
    ZXRhIiwKICAgICAgICAgICAgICAgICIucmd3LnJvb3QiLAogICAgICAgICAgICAgICAgZiJ7c2Vs
    Zi5fYXJnX3BhcnNlci5yZ3dfcG9vbF9wcmVmaXh9LnJndy5jb250cm9sIiwKICAgICAgICAgICAg
    ICAgIGYie3NlbGYuX2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJlZml4fS5yZ3cubG9nIiwKICAgICAg
    ICAgICAgXQogICAgICAgICAgICBmb3IgX3Jnd19wb29sX3RvX3ZhbGlkYXRlIGluIHJnd19wb29s
    c190b192YWxpZGF0ZToKICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLmNsdXN0ZXIucG9vbF9l
    eGlzdHMoX3Jnd19wb29sX3RvX3ZhbGlkYXRlKToKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rk
    ZXJyLndyaXRlKAogICAgICAgICAgICAgICAgICAgICAgICBmIlRoZSBwcm92aWRlZCBwb29sLCAn
    e19yZ3dfcG9vbF90b192YWxpZGF0ZX0nLCBkb2VzIG5vdCBleGlzdCIKICAgICAgICAgICAgICAg
    ICAgICApCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICItMSIKCiAgICAgICAgcmV0dXJuICIi
    CgogICAgZGVmIHZhbGlkYXRlX3Jnd19tdWx0aXNpdGUoc2VsZiwgcmd3X211bHRpc2l0ZV9jb25m
    aWdfbmFtZSwgcmd3X211bHRpc2l0ZV9jb25maWcpOgogICAgICAgIGlmIHJnd19tdWx0aXNpdGVf
    Y29uZmlnICE9ICIiOgogICAgICAgICAgICBjbWQgPSBbCiAgICAgICAgICAgICAgICAicmFkb3Nn
    dy1hZG1pbiIsCiAgICAgICAgICAgICAgICByZ3dfbXVsdGlzaXRlX2NvbmZpZywKICAgICAgICAg
    ICAgICAgICJnZXQiLAogICAgICAgICAgICAgICAgIi0tcmd3LSIgKyByZ3dfbXVsdGlzaXRlX2Nv
    bmZpZywKICAgICAgICAgICAgICAgIHJnd19tdWx0aXNpdGVfY29uZmlnX25hbWUsCiAgICAgICAg
    ICAgIF0KICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgXyA9IHN1YnByb2Nlc3MuY2hl
    Y2tfb3V0cHV0KGNtZCwgc3RkZXJyPXN1YnByb2Nlc3MuUElQRSkKICAgICAgICAgICAgZXhjZXB0
    IHN1YnByb2Nlc3MuQ2FsbGVkUHJvY2Vzc0Vycm9yIGFzIGV4ZWNFcnI6CiAgICAgICAgICAgICAg
    ICBlcnJfbXNnID0gKAogICAgICAgICAgICAgICAgICAgIGYiZmFpbGVkIHRvIGV4ZWN1dGUgY29t
    bWFuZCB7Y21kfS4gT3V0cHV0OiB7ZXhlY0Vyci5vdXRwdXR9LiAiCiAgICAgICAgICAgICAgICAg
    ICAgZiJDb2RlOiB7ZXhlY0Vyci5yZXR1cm5jb2RlfS4gRXJyb3I6IHtleGVjRXJyLnN0ZGVycn0i
    CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBzeXMuc3RkZXJyLndyaXRlKGVycl9t
    c2cpCiAgICAgICAgICAgICAgICByZXR1cm4gIi0xIgogICAgICAgIHJldHVybiAiIgoKICAgIGRl
    ZiBjb252ZXJ0X2NvbW1hX3NlcGFyYXRlZF90b19hcnJheShzZWxmLCB2YWx1ZSk6CiAgICAgICAg
    cmV0dXJuIHZhbHVlLnNwbGl0KCIsIikKCiAgICBkZWYgcmFpc2VfZXhjZXB0aW9uX2lmX2FueV90
    b3BvbG9neV9mbGFnX2lzX21pc3Npbmcoc2VsZik6CiAgICAgICAgaWYgKAogICAgICAgICAgICAo
    CiAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLnRvcG9sb2d5X3Bvb2xzICE9ICIiCiAg
    ICAgICAgICAgICAgICBhbmQgKAogICAgICAgICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIu
    dG9wb2xvZ3lfZmFpbHVyZV9kb21haW5fbGFiZWwgPT0gIiIKICAgICAgICAgICAgICAgICAgICBv
    ciBzZWxmLl9hcmdfcGFyc2VyLnRvcG9sb2d5X2ZhaWx1cmVfZG9tYWluX3ZhbHVlcyA9PSAiIgog
    ICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgICAgIG9yICgKICAgICAgICAg
    ICAgICAgIHNlbGYuX2FyZ19wYXJzZXIudG9wb2xvZ3lfZmFpbHVyZV9kb21haW5fbGFiZWwgIT0g
    IiIKICAgICAgICAgICAgICAgIGFuZCAoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fYXJnX3Bh
    cnNlci50b3BvbG9neV9wb29scyA9PSAiIgogICAgICAgICAgICAgICAgICAgIG9yIHNlbGYuX2Fy
    Z19wYXJzZXIudG9wb2xvZ3lfZmFpbHVyZV9kb21haW5fdmFsdWVzID09ICIiCiAgICAgICAgICAg
    ICAgICApCiAgICAgICAgICAgICkKICAgICAgICAgICAgb3IgKAogICAgICAgICAgICAgICAgc2Vs
    Zi5fYXJnX3BhcnNlci50b3BvbG9neV9mYWlsdXJlX2RvbWFpbl92YWx1ZXMgIT0gIiIKICAgICAg
    ICAgICAgICAgIGFuZCAoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fYXJnX3BhcnNlci50b3Bv
    bG9neV9wb29scyA9PSAiIgogICAgICAgICAgICAgICAgICAgIG9yIHNlbGYuX2FyZ19wYXJzZXIu
    dG9wb2xvZ3lfZmFpbHVyZV9kb21haW5fbGFiZWwgPT0gIiIKICAgICAgICAgICAgICAgICkKICAg
    ICAgICAgICAgKQogICAgICAgICk6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVF
    eGNlcHRpb24oCiAgICAgICAgICAgICAgICAicHJvdmlkZSBhbGwgdGhlIHRvcG9sb2d5IGZsYWdz
    IC0tdG9wb2xvZ3ktcG9vbHMsIC0tdG9wb2xvZ3ktZmFpbHVyZS1kb21haW4tbGFiZWwsIC0tdG9w
    b2xvZ3ktZmFpbHVyZS1kb21haW4tdmFsdWVzIgogICAgICAgICAgICApCgogICAgZGVmIHZhbGlk
    YXRlX3RvcG9sb2d5X3ZhbHVlcyhzZWxmLCB0b3BvbG9neV9wb29scywgdG9wb2xvZ3lfZmQpOgog
    ICAgICAgIGlmIGxlbih0b3BvbG9neV9wb29scykgIT0gbGVuKHRvcG9sb2d5X2ZkKToKICAgICAg
    ICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgIGYi
    VGhlIHByb3ZpZGVkIHRvcG9sb2d5IHBvb2xzLCAne3RvcG9sb2d5X3Bvb2xzfScsIGFuZCAiCiAg
    ICAgICAgICAgICAgICBmInRvcG9sb2d5IGZhaWx1cmUgZG9tYWluLCAne3RvcG9sb2d5X2ZkfScs
    IgogICAgICAgICAgICAgICAgZiJhcmUgb2YgZGlmZmVyZW50IGxlbmd0aCwgJ3tsZW4odG9wb2xv
    Z3lfcG9vbHMpfScgYW5kICd7bGVuKHRvcG9sb2d5X2ZkKX0nIHJlc3BjdGl2ZWx5IgogICAgICAg
    ICAgICApCiAgICAgICAgcmV0dXJuCgogICAgZGVmIHZhbGlkYXRlX3RvcG9sb2d5X3JiZF9wb29s
    cyhzZWxmLCB0b3BvbG9neV9yYmRfcG9vbHMpOgogICAgICAgIGZvciBwb29sIGluIHRvcG9sb2d5
    X3JiZF9wb29sczoKICAgICAgICAgICAgc2VsZi52YWxpZGF0ZV9yYmRfcG9vbChwb29sKQoKICAg
    IGRlZiBpbml0X3RvcG9sb2d5X3JiZF9wb29scyhzZWxmLCB0b3BvbG9neV9yYmRfcG9vbHMpOgog
    ICAgICAgIGZvciBwb29sIGluIHRvcG9sb2d5X3JiZF9wb29sczoKICAgICAgICAgICAgc2VsZi5p
    bml0X3JiZF9wb29sKHBvb2wpCgogICAgIyB0aGlzIHdpbGwgcmV0dXJuIHRoZSBmaW5hbCBhcmdz
    IHRoYXQgc2NyaXB0IHVzZXMgdG8gcHJvY2VzcwogICAgIyB0aGUgcHJpb3JpdHkgdG8gc2V0IGEg
    cGFydGljdWxhciB2YWx1ZSBpcywKICAgICMgY29tbWFuZC1saW5lLWFyZ3MgPiBjb25maWcuaW5p
    IGZpbGUgdmFsdWVzID4gZGVmYXVsdCB2YWx1ZXMKICAgIGRlZiBnZXRGaW5hbFVzZWRBcmdzKHNl
    bGYpOgogICAgICAgIGFyZ3VtZW50ID0gZiJbQ29uZmlndXJhdGlvbnNdXG4iCiAgICAgICAgZm9y
    IGFyZyBpbiB2YXJzKHNlbGYuX2FyZ19wYXJzZXIpOgogICAgICAgICAgICBpZiBzdHIoZ2V0YXR0
    cihzZWxmLl9hcmdfcGFyc2VyLCBhcmcpKToKICAgICAgICAgICAgICAgICMgcHl0aG9uIHRyZWF0
    cyBmbGFnLW5hbWUgYXMgZmxhZ19uYW1lIGludGVybmFsbHksIHNvIGNvbnZlcnRpbmcgYmFjayB0
    byBmbGFnLW5hbWUsCiAgICAgICAgICAgICAgICAjIHNvIHdlIGNhbiBnZXQgdGhvc2UgdmFsdWVz
    IGZyb20gY29uZmlnIGZpbGUKICAgICAgICAgICAgICAgIGFyZ1ZhbHVlID0gYXJnLnJlcGxhY2Uo
    Il8iLCAiLSIpCiAgICAgICAgICAgICAgICAjIGRvIG5vdCBhZGQgdGhlIGBjb25maWctZmlsZWAs
    IGBjZXBoeC1rZXktcm90YXRlYCBmbGFncwogICAgICAgICAgICAgICAgIyBhbmQgYWxzbyBub3Qg
    YWRkIHRoZSBib29sZWFuIGZsYWdzIHdoaWNoIGFyZSBzZXQgdG8gRmFsc2UsIGJlY2F1c2UgY29u
    ZmlnLmluaSBmaWxlIHRyZWF0cyBib29sZWFuIGZsYWdzIGFzIFRydWUgYWx3YXlzCiAgICAgICAg
    ICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgYXJnVmFsdWUgIT0gImNvbmZpZy1maWxl
    IgogICAgICAgICAgICAgICAgICAgIGFuZCBhcmdWYWx1ZSAhPSAiY2VwaHgta2V5LXJvdGF0ZSIK
    ICAgICAgICAgICAgICAgICAgICBhbmQgZ2V0YXR0cihzZWxmLl9hcmdfcGFyc2VyLCBhcmcpICE9
    IEZhbHNlCiAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50ICs9
    IGYie2FyZ1ZhbHVlfSA9IHtzdHIoZ2V0YXR0cihzZWxmLl9hcmdfcGFyc2VyLCBhcmcpKX1cbiIK
    ICAgICAgICByZXR1cm4gYXJndW1lbnQKCiAgICBkZWYgZ2V0X2NlcGh4X2xhdGVzdF9rZXlfZ2Vu
    ZXJhdGlvbihzZWxmKToKICAgICAgICAjIHN0YXJ0aW5nIHdpdGggLTEsIHRvIHN1cHBvcnQgY2Fz
    ZXMgd2hlcmUgbm8ga2V5IGV4aXN0cwogICAgICAgIGdlbmVyYXRpb24gPSAtMQoKICAgICAgICAj
    IHJ1biBjZXBoIGF1dGggbHMgdG8gbGlzdCBhbGwgdGhlIGtleXMKICAgICAgICBjbWRfanNvbiA9
    IHsicHJlZml4IjogImF1dGggbHMiLCAiZm9ybWF0IjogImpzb24ifQogICAgICAgIGlmIHNlbGYu
    X2FyZ19wYXJzZXIuZHJ5X3J1bjoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuZHJ5X3J1bigiY2Vw
    aCAiICsgY21kX2pzb25bInByZWZpeCJdKQogICAgICAgIHJldF92YWwsIGpzb25fb3V0LCBlcnJf
    bXNnID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRfanNvbikKICAgICAgICAjIGlmIHRo
    ZXJlIGlzIGFuIHVuc3VjY2Vzc2Z1bCBhdHRlbXB0LAogICAgICAgIGlmIHJldF92YWwgIT0gMCBv
    ciBsZW4oanNvbl9vdXQpID09IDA6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVF
    eGNlcHRpb24oCiAgICAgICAgICAgICAgICBmIidhdXRoIGxzJyBjZXBoIGNhbGwgZmFpbGVkIHdp
    dGggZXJyb3I6IHtlcnJfbXNnIGlmIHJldF92YWwgIT0gMCBlbHNlIHNlbGYuRU1QVFlfT1VUUFVU
    X0xJU1R9IgogICAgICAgICAgICApCgogICAgICAgICMgZ2V0IGEgc2FtcGxlIGNzaSBrZXkgYmFz
    ZWQgb24gdXNlciBmbGFncyB0aGF0IHdpbGwgYmUgY3JlYXRlZCBieSB0aGUgc2NyaXB0CiAgICAg
    ICAgIyBuZWVkZWQgdG8gZ2V0IHRoZSBrZXkgdHlwZSBhbmQgZ2V0IGl0cyBoaWdoZXN0IGdlbmVy
    YXRpb24KICAgICAgICAjIHNldHRpbmcgdGhlIGdlbmVyYXRpb24gMCBhcyB3ZSBqdXN0IG5lZWQg
    dGhlIHByZWZpeCB0eXBlCiAgICAgICAgIyBGb3IgZXhhbXBsZSwgY2xpZW50LmNzaS1yYmQtbm9k
    ZSwgY2xpZW50LmNzaS1yYmQtbm9kZS1jbHVzdGVyMS1wb29sMS1ybjEKICAgICAgICBfLCBjc2lf
    ZW50aXR5ID0gc2VsZi5nZXRfcmJkX25vZGVfY2Fwc19hbmRfZW50aXR5KDApCiAgICAgICAgIyBy
    ZW1vdmUgImNsaWVudC4iIHByZWZpeCBmcm9tIHRoZSBjc2lfZW50aXR5CiAgICAgICAgY3NpX2Vu
    dGl0eSA9IGYie2NzaV9lbnRpdHkuc3BsaXQoJy4nKVsxXX0iCgogICAgICAgICMgZmluZCB0aGUg
    bGF0ZXN0IGtleSBnZW5lcmF0aW9uCiAgICAgICAgIyBieSBsb29raW5nIGF0IHRoZSBzdWZmaXgg
    YWZ0ZXIgJy4nIGluIHRoZSBjZXBoIHVzZXIgbmFtZSBsaXN0CiAgICAgICAgZm9yIGVhY2hKIGlu
    IGpzb25fb3V0WyJhdXRoX2R1bXAiXToKICAgICAgICAgICAgd29yZHMgPSBlYWNoSlsiZW50aXR5
    Il0uc3BsaXQoIi4iKQogICAgICAgICAgICBpZiB3b3Jkc1sxXS5zdGFydHN3aXRoKGNzaV9lbnRp
    dHkpID09IEZhbHNlOgogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgIGlmIGxl
    bih3b3JkcykgPT0gMjoKICAgICAgICAgICAgICAgIGdlbmVyYXRpb24gPSBtYXgoMCwgZ2VuZXJh
    dGlvbikKICAgICAgICAgICAgZWxpZiBsZW4od29yZHMpID09IDM6CiAgICAgICAgICAgICAgICB0
    cnk6CiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbiA9IG1heChnZW5lcmF0aW9uLCBpbnQo
    d29yZHNbMl0pKQogICAgICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAg
    ICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAg
    ICAgICAgICAgZiJJbnZhbGlkIGNzaSBjZXBoIHVzZXIgbmFtZSBmb3VuZCBpbiB0aGUgYXV0aCBs
    cyBvdXRwdXQ6ICd7ZWFjaEp9JyIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVs
    c2U6CiAgICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAg
    ICAgICAgICAgICAgICAgIGYiSW52YWxpZCBjc2kgY2VwaCB1c2VyIG5hbWUgZm91bmQgaW4gdGhl
    IGF1dGggbHMgb3V0cHV0OiAne2VhY2hKfSciCiAgICAgICAgICAgICAgICApCgogICAgICAgIHJl
    dHVybiBnZW5lcmF0aW9uCgogICAgZGVmIF9nZW5fb3V0cHV0X21hcChzZWxmLCBnZW5lcmF0aW9u
    KToKICAgICAgICBpZiBzZWxmLm91dF9tYXA6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIHNl
    bGYudmFsaWRhdGVfcmJkX3Bvb2woc2VsZi5fYXJnX3BhcnNlci5yYmRfZGF0YV9wb29sX25hbWUp
    CiAgICAgICAgc2VsZi5pbml0X3JiZF9wb29sKHNlbGYuX2FyZ19wYXJzZXIucmJkX2RhdGFfcG9v
    bF9uYW1lKQogICAgICAgIHNlbGYudmFsaWRhdGVfcmFkb3NfbmFtZXNwYWNlKCkKICAgICAgICBz
    ZWxmLl9leGNsdWRlZF9rZXlzLmFkZCgiSzhTX0NMVVNURVJfTkFNRSIpCiAgICAgICAgc2VsZi5n
    ZXRfY2VwaGZzX2RhdGFfcG9vbF9kZXRhaWxzKCkKICAgICAgICAjIGRvdWJsZSBzdHJpbmcgbmVl
    ZGVkIGZvciB1cHN0cmVhbSBleHBvcnRzIG9mIGZsYWdzCiAgICAgICAgc2VsZi5vdXRfbWFwWyJB
    UkdTIl0gPSBmJyJ7c2VsZi5nZXRGaW5hbFVzZWRBcmdzKCl9IicKICAgICAgICBzZWxmLm91dF9t
    YXBbIkNFUEhYX0tFWV9HRU5FUkFUSU9OIl0gPSBnZW5lcmF0aW9uCiAgICAgICAgc2VsZi5vdXRf
    bWFwWyJOQU1FU1BBQ0UiXSA9IHNlbGYuX2FyZ19wYXJzZXIubmFtZXNwYWNlCiAgICAgICAgc2Vs
    Zi5vdXRfbWFwWyJLOFNfQ0xVU1RFUl9OQU1FIl0gPSBzZWxmLl9hcmdfcGFyc2VyLms4c19jbHVz
    dGVyX25hbWUKICAgICAgICBzZWxmLm91dF9tYXBbIlJPT0tfRVhURVJOQUxfRlNJRCJdID0gc2Vs
    Zi5nZXRfZnNpZCgpCiAgICAgICAgc2VsZi5vdXRfbWFwWyJST09LX0VYVEVSTkFMX1VTRVJOQU1F
    Il0gPSBzZWxmLnJ1bl9hc191c2VyCiAgICAgICAgc2VsZi5vdXRfbWFwWyJST09LX0VYVEVSTkFM
    X0NFUEhfTU9OX0RBVEEiXSA9IHNlbGYuZ2V0X2NlcGhfZXh0ZXJuYWxfbW9uX2RhdGEoKQogICAg
    ICAgIHNlbGYub3V0X21hcFsiUk9PS19FWFRFUk5BTF9VU0VSX1NFQ1JFVCJdID0gc2VsZi5jcmVh
    dGVfY2hlY2tlcktleSgKICAgICAgICAgICAgImNsaWVudC5oZWFsdGhjaGVja2VyIiwgZ2VuZXJh
    dGlvbgogICAgICAgICkKICAgICAgICBzZWxmLm91dF9tYXBbIlJPT0tfRVhURVJOQUxfREFTSEJP
    QVJEX0xJTksiXSA9IHNlbGYuZ2V0X2NlcGhfZGFzaGJvYXJkX2xpbmsoKQogICAgICAgICgKICAg
    ICAgICAgICAgc2VsZi5vdXRfbWFwWyJDU0lfUkJEX05PREVfU0VDUkVUIl0sCiAgICAgICAgICAg
    IHNlbGYub3V0X21hcFsiQ1NJX1JCRF9OT0RFX1NFQ1JFVF9OQU1FIl0sCiAgICAgICAgKSA9IHNl
    bGYuY3JlYXRlX2NlcGhDU0lLZXlyaW5nX3VzZXIoImNsaWVudC5jc2ktcmJkLW5vZGUiLCBnZW5l
    cmF0aW9uKQogICAgICAgICgKICAgICAgICAgICAgc2VsZi5vdXRfbWFwWyJDU0lfUkJEX1BST1ZJ
    U0lPTkVSX1NFQ1JFVCJdLAogICAgICAgICAgICBzZWxmLm91dF9tYXBbIkNTSV9SQkRfUFJPVklT
    SU9ORVJfU0VDUkVUX05BTUUiXSwKICAgICAgICApID0gc2VsZi5jcmVhdGVfY2VwaENTSUtleXJp
    bmdfdXNlcigiY2xpZW50LmNzaS1yYmQtcHJvdmlzaW9uZXIiLCBnZW5lcmF0aW9uKQogICAgICAg
    IHNlbGYub3V0X21hcFsiQ0VQSEZTX1BPT0xfTkFNRSJdID0gc2VsZi5fYXJnX3BhcnNlci5jZXBo
    ZnNfZGF0YV9wb29sX25hbWUKICAgICAgICBzZWxmLm91dF9tYXBbIkNFUEhGU19NRVRBREFUQV9Q
    T09MX05BTUUiXSA9ICgKICAgICAgICAgICAgc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfbWV0YWRh
    dGFfcG9vbF9uYW1lCiAgICAgICAgKQogICAgICAgIHNlbGYub3V0X21hcFsiQ0VQSEZTX0ZTX05B
    TUUiXSA9IHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2ZpbGVzeXN0ZW1fbmFtZQogICAgICAgIHNl
    bGYub3V0X21hcFsiUkVTVFJJQ1RFRF9BVVRIX1BFUk1JU1NJT04iXSA9ICgKICAgICAgICAgICAg
    c2VsZi5fYXJnX3BhcnNlci5yZXN0cmljdGVkX2F1dGhfcGVybWlzc2lvbgogICAgICAgICkKICAg
    ICAgICBzZWxmLm91dF9tYXBbIlJBRE9TX05BTUVTUEFDRSJdID0gc2VsZi5fYXJnX3BhcnNlci5y
    YWRvc19uYW1lc3BhY2UKICAgICAgICBzZWxmLm91dF9tYXBbIlNVQlZPTFVNRV9HUk9VUCJdID0g
    c2VsZi5fYXJnX3BhcnNlci5zdWJ2b2x1bWVfZ3JvdXAKICAgICAgICBzZWxmLm91dF9tYXBbIkNT
    SV9DRVBIRlNfTk9ERV9TRUNSRVQiXSA9ICIiCiAgICAgICAgc2VsZi5vdXRfbWFwWyJDU0lfQ0VQ
    SEZTX1BST1ZJU0lPTkVSX1NFQ1JFVCJdID0gIiIKICAgICAgICAjIGNyZWF0ZSBDZXBoRlMgbm9k
    ZSBhbmQgcHJvdmlzaW9uZXIga2V5cmluZyBvbmx5IHdoZW4gTURTIGV4aXN0cwogICAgICAgIGlm
    IHNlbGYub3V0X21hcFsiQ0VQSEZTX0ZTX05BTUUiXSBhbmQgc2VsZi5vdXRfbWFwWyJDRVBIRlNf
    UE9PTF9OQU1FIl06CiAgICAgICAgICAgICgKICAgICAgICAgICAgICAgIHNlbGYub3V0X21hcFsi
    Q1NJX0NFUEhGU19OT0RFX1NFQ1JFVCJdLAogICAgICAgICAgICAgICAgc2VsZi5vdXRfbWFwWyJD
    U0lfQ0VQSEZTX05PREVfU0VDUkVUX05BTUUiXSwKICAgICAgICAgICAgKSA9IHNlbGYuY3JlYXRl
    X2NlcGhDU0lLZXlyaW5nX3VzZXIoImNsaWVudC5jc2ktY2VwaGZzLW5vZGUiLCBnZW5lcmF0aW9u
    KQogICAgICAgICAgICAoCiAgICAgICAgICAgICAgICBzZWxmLm91dF9tYXBbIkNTSV9DRVBIRlNf
    UFJPVklTSU9ORVJfU0VDUkVUIl0sCiAgICAgICAgICAgICAgICBzZWxmLm91dF9tYXBbIkNTSV9D
    RVBIRlNfUFJPVklTSU9ORVJfU0VDUkVUX05BTUUiXSwKICAgICAgICAgICAgKSA9IHNlbGYuY3Jl
    YXRlX2NlcGhDU0lLZXlyaW5nX3VzZXIoCiAgICAgICAgICAgICAgICAiY2xpZW50LmNzaS1jZXBo
    ZnMtcHJvdmlzaW9uZXIiLCBnZW5lcmF0aW9uCiAgICAgICAgICAgICkKICAgICAgICAgICAgIyBj
    cmVhdGUgdGhlIGRlZmF1bHQgImNzaSIgc3Vidm9sdW1lZ3JvdXAKICAgICAgICAgICAgc2VsZi5n
    ZXRfb3JfY3JlYXRlX3N1YnZvbHVtZV9ncm91cCgKICAgICAgICAgICAgICAgICJjc2kiLCBzZWxm
    Ll9hcmdfcGFyc2VyLmNlcGhmc19maWxlc3lzdGVtX25hbWUKICAgICAgICAgICAgKQogICAgICAg
    ICAgICAjIHBpbiB0aGUgZGVmYXVsdCAiY3NpIiBzdWJ2b2x1bWVncm91cAogICAgICAgICAgICBz
    ZWxmLnBpbl9zdWJ2b2x1bWUoCiAgICAgICAgICAgICAgICAiY3NpIiwgc2VsZi5fYXJnX3BhcnNl
    ci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lLCAiZGlzdHJpYnV0ZWQiLCAiMSIKICAgICAgICAgICAg
    KQogICAgICAgICAgICBpZiBzZWxmLm91dF9tYXBbIlNVQlZPTFVNRV9HUk9VUCJdOgogICAgICAg
    ICAgICAgICAgc2VsZi5nZXRfb3JfY3JlYXRlX3N1YnZvbHVtZV9ncm91cCgKICAgICAgICAgICAg
    ICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLnN1YnZvbHVtZV9ncm91cCwKICAgICAgICAgICAgICAg
    ICAgICBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19maWxlc3lzdGVtX25hbWUsCiAgICAgICAgICAg
    ICAgICApCiAgICAgICAgICAgICAgICBzZWxmLnBpbl9zdWJ2b2x1bWUoCiAgICAgICAgICAgICAg
    ICAgICAgc2VsZi5fYXJnX3BhcnNlci5zdWJ2b2x1bWVfZ3JvdXAsCiAgICAgICAgICAgICAgICAg
    ICAgc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lLAogICAgICAgICAgICAg
    ICAgICAgICJkaXN0cmlidXRlZCIsCiAgICAgICAgICAgICAgICAgICAgIjEiLAogICAgICAgICAg
    ICAgICAgKQogICAgICAgIHNlbGYub3V0X21hcFsiUkdXX1RMU19DRVJUIl0gPSAiIgogICAgICAg
    IHNlbGYub3V0X21hcFsiTU9OSVRPUklOR19FTkRQT0lOVCJdID0gIiIKICAgICAgICBzZWxmLm91
    dF9tYXBbIk1PTklUT1JJTkdfRU5EUE9JTlRfUE9SVCJdID0gIiIKICAgICAgICBpZiBub3Qgc2Vs
    Zi5fYXJnX3BhcnNlci5za2lwX21vbml0b3JpbmdfZW5kcG9pbnQ6CiAgICAgICAgICAgICgKICAg
    ICAgICAgICAgICAgIHNlbGYub3V0X21hcFsiTU9OSVRPUklOR19FTkRQT0lOVCJdLAogICAgICAg
    ICAgICAgICAgc2VsZi5vdXRfbWFwWyJNT05JVE9SSU5HX0VORFBPSU5UX1BPUlQiXSwKICAgICAg
    ICAgICAgKSA9IHNlbGYuZ2V0X2FjdGl2ZV9hbmRfc3RhbmRieV9tZ3JzKCkKICAgICAgICBzZWxm
    Lm91dF9tYXBbIlJCRF9QT09MX05BTUUiXSA9IHNlbGYuX2FyZ19wYXJzZXIucmJkX2RhdGFfcG9v
    bF9uYW1lCiAgICAgICAgc2VsZi5vdXRfbWFwWyJSQkRfTUVUQURBVEFfRUNfUE9PTF9OQU1FIl0g
    PSAoCiAgICAgICAgICAgIHNlbGYudmFsaWRhdGVfcmJkX21ldGFkYXRhX2VjX3Bvb2xfbmFtZSgp
    CiAgICAgICAgKQogICAgICAgIHNlbGYub3V0X21hcFsiVE9QT0xPR1lfUE9PTFMiXSA9IHNlbGYu
    X2FyZ19wYXJzZXIudG9wb2xvZ3lfcG9vbHMKICAgICAgICBzZWxmLm91dF9tYXBbIlRPUE9MT0dZ
    X0ZBSUxVUkVfRE9NQUlOX0xBQkVMIl0gPSAoCiAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIu
    dG9wb2xvZ3lfZmFpbHVyZV9kb21haW5fbGFiZWwKICAgICAgICApCiAgICAgICAgc2VsZi5vdXRf
    bWFwWyJUT1BPTE9HWV9GQUlMVVJFX0RPTUFJTl9WQUxVRVMiXSA9ICgKICAgICAgICAgICAgc2Vs
    Zi5fYXJnX3BhcnNlci50b3BvbG9neV9mYWlsdXJlX2RvbWFpbl92YWx1ZXMKICAgICAgICApCiAg
    ICAgICAgaWYgKAogICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLnRvcG9sb2d5X3Bvb2xzICE9
    ICIiCiAgICAgICAgICAgIGFuZCBzZWxmLl9hcmdfcGFyc2VyLnRvcG9sb2d5X2ZhaWx1cmVfZG9t
    YWluX2xhYmVsICE9ICIiCiAgICAgICAgICAgIGFuZCBzZWxmLl9hcmdfcGFyc2VyLnRvcG9sb2d5
    X2ZhaWx1cmVfZG9tYWluX3ZhbHVlcyAhPSAiIgogICAgICAgICk6CiAgICAgICAgICAgIHNlbGYu
    dmFsaWRhdGVfdG9wb2xvZ3lfdmFsdWVzKAogICAgICAgICAgICAgICAgc2VsZi5jb252ZXJ0X2Nv
    bW1hX3NlcGFyYXRlZF90b19hcnJheShzZWxmLm91dF9tYXBbIlRPUE9MT0dZX1BPT0xTIl0pLAog
    ICAgICAgICAgICAgICAgc2VsZi5jb252ZXJ0X2NvbW1hX3NlcGFyYXRlZF90b19hcnJheSgKICAg
    ICAgICAgICAgICAgICAgICBzZWxmLm91dF9tYXBbIlRPUE9MT0dZX0ZBSUxVUkVfRE9NQUlOX1ZB
    TFVFUyJdCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICApCiAgICAgICAgICAgIHNlbGYu
    dmFsaWRhdGVfdG9wb2xvZ3lfcmJkX3Bvb2xzKAogICAgICAgICAgICAgICAgc2VsZi5jb252ZXJ0
    X2NvbW1hX3NlcGFyYXRlZF90b19hcnJheShzZWxmLm91dF9tYXBbIlRPUE9MT0dZX1BPT0xTIl0p
    CiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZi5pbml0X3RvcG9sb2d5X3JiZF9wb29scygK
    ICAgICAgICAgICAgICAgIHNlbGYuY29udmVydF9jb21tYV9zZXBhcmF0ZWRfdG9fYXJyYXkoc2Vs
    Zi5vdXRfbWFwWyJUT1BPTE9HWV9QT09MUyJdKQogICAgICAgICAgICApCiAgICAgICAgZWxzZToK
    ICAgICAgICAgICAgc2VsZi5yYWlzZV9leGNlcHRpb25faWZfYW55X3RvcG9sb2d5X2ZsYWdfaXNf
    bWlzc2luZygpCgogICAgICAgIHNlbGYub3V0X21hcFsiUkdXX1BPT0xfUFJFRklYIl0gPSBzZWxm
    Ll9hcmdfcGFyc2VyLnJnd19wb29sX3ByZWZpeAogICAgICAgIHNlbGYub3V0X21hcFsiUkdXX0VO
    RFBPSU5UIl0gPSAiIgogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIucmd3X2VuZHBvaW50Ogog
    ICAgICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmRyeV9ydW46CiAgICAgICAgICAgICAgICBz
    ZWxmLmNyZWF0ZV9yZ3dfYWRtaW5fb3BzX3VzZXIoKQogICAgICAgICAgICBlbHNlOgogICAgICAg
    ICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIucmd3X3Jl
    YWxtX25hbWUgIT0gIiIKICAgICAgICAgICAgICAgICAgICBhbmQgc2VsZi5fYXJnX3BhcnNlci5y
    Z3dfem9uZWdyb3VwX25hbWUgIT0gIiIKICAgICAgICAgICAgICAgICAgICBhbmQgc2VsZi5fYXJn
    X3BhcnNlci5yZ3dfem9uZV9uYW1lICE9ICIiCiAgICAgICAgICAgICAgICApOgogICAgICAgICAg
    ICAgICAgICAgIGVyciA9IHNlbGYudmFsaWRhdGVfcmd3X211bHRpc2l0ZSgKICAgICAgICAgICAg
    ICAgICAgICAgICAgc2VsZi5fYXJnX3BhcnNlci5yZ3dfcmVhbG1fbmFtZSwgInJlYWxtIgogICAg
    ICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICBlcnIgPSBzZWxmLnZhbGlkYXRl
    X3Jnd19tdWx0aXNpdGUoCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIu
    cmd3X3pvbmVncm91cF9uYW1lLCAiem9uZWdyb3VwIgogICAgICAgICAgICAgICAgICAgICkKICAg
    ICAgICAgICAgICAgICAgICBlcnIgPSBzZWxmLnZhbGlkYXRlX3Jnd19tdWx0aXNpdGUoCiAgICAg
    ICAgICAgICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIucmd3X3pvbmVfbmFtZSwgInpvbmUi
    CiAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAg
    ICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLnJnd19yZWFsbV9uYW1lID09ICIiCiAgICAgICAgICAg
    ICAgICAgICAgYW5kIHNlbGYuX2FyZ19wYXJzZXIucmd3X3pvbmVncm91cF9uYW1lID09ICIiCiAg
    ICAgICAgICAgICAgICAgICAgYW5kIHNlbGYuX2FyZ19wYXJzZXIucmd3X3pvbmVfbmFtZSA9PSAi
    IgogICAgICAgICAgICAgICAgKSBvciAoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fYXJnX3Bh
    cnNlci5yZ3dfcmVhbG1fbmFtZSAhPSAiIgogICAgICAgICAgICAgICAgICAgIGFuZCBzZWxmLl9h
    cmdfcGFyc2VyLnJnd196b25lZ3JvdXBfbmFtZSAhPSAiIgogICAgICAgICAgICAgICAgICAgIGFu
    ZCBzZWxmLl9hcmdfcGFyc2VyLnJnd196b25lX25hbWUgIT0gIiIKICAgICAgICAgICAgICAgICk6
    CiAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm91dF9t
    YXBbIlJHV19BRE1JTl9PUFNfVVNFUl9BQ0NFU1NfS0VZIl0sCiAgICAgICAgICAgICAgICAgICAg
    ICAgIHNlbGYub3V0X21hcFsiUkdXX0FETUlOX09QU19VU0VSX1NFQ1JFVF9LRVkiXSwKICAgICAg
    ICAgICAgICAgICAgICAgICAgaW5mb19jYXBfc3VwcG9ydGVkLAogICAgICAgICAgICAgICAgICAg
    ICAgICBlcnIsCiAgICAgICAgICAgICAgICAgICAgKSA9IHNlbGYuY3JlYXRlX3Jnd19hZG1pbl9v
    cHNfdXNlcigpCiAgICAgICAgICAgICAgICAgICAgZXJyID0gc2VsZi52YWxpZGF0ZV9yZ3dfZW5k
    cG9pbnQoaW5mb19jYXBfc3VwcG9ydGVkKQogICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX2Fy
    Z19wYXJzZXIucmd3X3Rsc19jZXJ0X3BhdGg6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYu
    b3V0X21hcFsiUkdXX1RMU19DRVJUIl0gPSAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
    ZWxmLnZhbGlkYXRlX3Jnd19lbmRwb2ludF90bHNfY2VydCgpCiAgICAgICAgICAgICAgICAgICAg
    ICAgICkKICAgICAgICAgICAgICAgICAgICAjIGlmIHRoZXJlIGlzIG5vIGVycm9yLCBzZXQgdGhl
    IFJHV19FTkRQT0lOVAogICAgICAgICAgICAgICAgICAgIGlmIGVyciAhPSAiLTEiOgogICAgICAg
    ICAgICAgICAgICAgICAgICBzZWxmLm91dF9tYXBbIlJHV19FTkRQT0lOVCJdID0gc2VsZi5fYXJn
    X3BhcnNlci5yZ3dfZW5kcG9pbnQKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAg
    ICAgICAgZXJyID0gIlBsZWFzZSBwcm92aWRlIGFsbCB0aGUgUkdXIG11bHRpc2l0ZSBwYXJhbWV0
    ZXJzIG9yIG5vbmUgb2YgdGhlbSIKICAgICAgICAgICAgICAgICAgICBzeXMuc3RkZXJyLndyaXRl
    KGVycikKCiAgICBkZWYgZ2VuX3NoZWxsX291dChzZWxmLCBnZW5lcmF0aW9uKToKICAgICAgICBz
    ZWxmLl9nZW5fb3V0cHV0X21hcChnZW5lcmF0aW9uKQogICAgICAgIHNoT3V0SU8gPSBTdHJpbmdJ
    TygpCiAgICAgICAgZm9yIGssIHYgaW4gc2VsZi5vdXRfbWFwLml0ZW1zKCk6CiAgICAgICAgICAg
    IGlmIHYgYW5kIGsgbm90IGluIHNlbGYuX2V4Y2x1ZGVkX2tleXM6CiAgICAgICAgICAgICAgICBz
    aE91dElPLndyaXRlKGYiZXhwb3J0IHtrfT17dn17TElORVNFUH0iKQogICAgICAgIHNoT3V0ID0g
    c2hPdXRJTy5nZXR2YWx1ZSgpCiAgICAgICAgc2hPdXRJTy5jbG9zZSgpCiAgICAgICAgcmV0dXJu
    IHNoT3V0CgogICAgZGVmIGdlbl9qc29uX291dChzZWxmLCBnZW5lcmF0aW9uKToKICAgICAgICBz
    ZWxmLl9nZW5fb3V0cHV0X21hcChnZW5lcmF0aW9uKQogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJz
    ZXIuZHJ5X3J1bjoKICAgICAgICAgICAgcmV0dXJuICIiCiAgICAgICAganNvbl9vdXQgPSBbCiAg
    ICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJuYW1lIjogImV4dGVybmFsLWNsdXN0ZXItdXNl
    ci1jb21tYW5kIiwKICAgICAgICAgICAgICAgICJraW5kIjogIkNvbmZpZ01hcCIsCiAgICAgICAg
    ICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAiYXJncyI6IHNlbGYub3V0X21h
    cFsiQVJHUyJdLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAg
    ewogICAgICAgICAgICAgICAgIm5hbWUiOiAicm9vay1jZXBoLW1vbi1lbmRwb2ludHMiLAogICAg
    ICAgICAgICAgICAgImtpbmQiOiAiQ29uZmlnTWFwIiwKICAgICAgICAgICAgICAgICJkYXRhIjog
    ewogICAgICAgICAgICAgICAgICAgICJkYXRhIjogc2VsZi5vdXRfbWFwWyJST09LX0VYVEVSTkFM
    X0NFUEhfTU9OX0RBVEEiXSwKICAgICAgICAgICAgICAgICAgICAibWF4TW9uSWQiOiAiMCIsCiAg
    ICAgICAgICAgICAgICAgICAgIm1hcHBpbmciOiAie30iLAogICAgICAgICAgICAgICAgfSwKICAg
    ICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgIm5hbWUiOiAicm9vay1j
    ZXBoLW1vbiIsCiAgICAgICAgICAgICAgICAia2luZCI6ICJTZWNyZXQiLAogICAgICAgICAgICAg
    ICAgImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgImFkbWluLXNlY3JldCI6ICJhZG1pbi1z
    ZWNyZXQiLAogICAgICAgICAgICAgICAgICAgICJmc2lkIjogc2VsZi5vdXRfbWFwWyJST09LX0VY
    VEVSTkFMX0ZTSUQiXSwKICAgICAgICAgICAgICAgICAgICAibW9uLXNlY3JldCI6ICJtb24tc2Vj
    cmV0IiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAg
    ICAgICAgICAgICAgICJuYW1lIjogInJvb2stY2VwaC1vcGVyYXRvci1jcmVkcyIsCiAgICAgICAg
    ICAgICAgICAia2luZCI6ICJTZWNyZXQiLAogICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAg
    ICAgICAgICAgICAgICAgInVzZXJJRCI6IHNlbGYuZ2V0X3VzZXJfaWQoCiAgICAgICAgICAgICAg
    ICAgICAgICAgIHNlbGYub3V0X21hcFsiUk9PS19FWFRFUk5BTF9VU0VSTkFNRSJdLCBnZW5lcmF0
    aW9uCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAidXNlcktleSI6
    IHNlbGYub3V0X21hcFsiUk9PS19FWFRFUk5BTF9VU0VSX1NFQ1JFVCJdLAogICAgICAgICAgICAg
    ICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICBdCgogICAgICAgICMgaWYgJ01PTklUT1JJTkdf
    RU5EUE9JTlQnIGV4aXN0cywgdGhlbiBvbmx5IGFkZCAnbW9uaXRvcmluZy1lbmRwb2ludCcgdG8g
    Q2x1c3RlcgogICAgICAgIGlmICgKICAgICAgICAgICAgc2VsZi5vdXRfbWFwWyJNT05JVE9SSU5H
    X0VORFBPSU5UIl0KICAgICAgICAgICAgYW5kIHNlbGYub3V0X21hcFsiTU9OSVRPUklOR19FTkRQ
    T0lOVF9QT1JUIl0KICAgICAgICApOgogICAgICAgICAgICBqc29uX291dC5hcHBlbmQoCiAgICAg
    ICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAibW9uaXRvcmluZy1lbmRw
    b2ludCIsCiAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiQ2VwaENsdXN0ZXIiLAogICAgICAg
    ICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAgICAgICAgICAgICAgICAiTW9uaXRvcmlu
    Z0VuZHBvaW50Ijogc2VsZi5vdXRfbWFwWyJNT05JVE9SSU5HX0VORFBPSU5UIl0sCiAgICAgICAg
    ICAgICAgICAgICAgICAgICJNb25pdG9yaW5nUG9ydCI6IHNlbGYub3V0X21hcFsiTU9OSVRPUklO
    R19FTkRQT0lOVF9QT1JUIl0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAg
    IH0KICAgICAgICAgICAgKQoKICAgICAgICAjIGlmICdDU0lfUkJEX05PREVfU0VDUkVUJyBleGlz
    dHMsIHRoZW4gb25seSBhZGQgJ3Jvb2stY3NpLXJiZC1wcm92aXNpb25lcicgU2VjcmV0CiAgICAg
    ICAgaWYgKAogICAgICAgICAgICBzZWxmLm91dF9tYXBbIkNTSV9SQkRfTk9ERV9TRUNSRVQiXQog
    ICAgICAgICAgICBhbmQgc2VsZi5vdXRfbWFwWyJDU0lfUkJEX05PREVfU0VDUkVUX05BTUUiXQog
    ICAgICAgICk6CiAgICAgICAgICAgIGpzb25fb3V0LmFwcGVuZCgKICAgICAgICAgICAgICAgIHsK
    ICAgICAgICAgICAgICAgICAgICAibmFtZSI6IGYicm9vay17c2VsZi5vdXRfbWFwWydDU0lfUkJE
    X05PREVfU0VDUkVUX05BTUUnXX0iLAogICAgICAgICAgICAgICAgICAgICJraW5kIjogIlNlY3Jl
    dCIsCiAgICAgICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgICAg
    ICJ1c2VySUQiOiBzZWxmLmdldF91c2VyX2lkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
    c2VsZi5vdXRfbWFwWyJDU0lfUkJEX05PREVfU0VDUkVUX05BTUUiXSwgZ2VuZXJhdGlvbgogICAg
    ICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICAidXNlcktleSI6
    IHNlbGYub3V0X21hcFsiQ1NJX1JCRF9OT0RFX1NFQ1JFVCJdLAogICAgICAgICAgICAgICAgICAg
    IH0sCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICAjIGlmICdDU0lfUkJE
    X1BST1ZJU0lPTkVSX1NFQ1JFVCcgZXhpc3RzLCB0aGVuIG9ubHkgYWRkICdyb29rLWNzaS1yYmQt
    cHJvdmlzaW9uZXInIFNlY3JldAogICAgICAgIGlmICgKICAgICAgICAgICAgc2VsZi5vdXRfbWFw
    WyJDU0lfUkJEX1BST1ZJU0lPTkVSX1NFQ1JFVCJdCiAgICAgICAgICAgIGFuZCBzZWxmLm91dF9t
    YXBbIkNTSV9SQkRfUFJPVklTSU9ORVJfU0VDUkVUX05BTUUiXQogICAgICAgICk6CiAgICAgICAg
    ICAgIGpzb25fb3V0LmFwcGVuZCgKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAg
    ICAibmFtZSI6IGYicm9vay17c2VsZi5vdXRfbWFwWydDU0lfUkJEX1BST1ZJU0lPTkVSX1NFQ1JF
    VF9OQU1FJ119IiwKICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJTZWNyZXQiLAogICAgICAg
    ICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAgICAgICAgICAgICAgICAidXNlcklEIjog
    c2VsZi5nZXRfdXNlcl9pZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3V0X21h
    cFsiQ1NJX1JCRF9QUk9WSVNJT05FUl9TRUNSRVRfTkFNRSJdLCBnZW5lcmF0aW9uCiAgICAgICAg
    ICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICJ1c2VyS2V5Ijogc2Vs
    Zi5vdXRfbWFwWyJDU0lfUkJEX1BST1ZJU0lPTkVSX1NFQ1JFVCJdLAogICAgICAgICAgICAgICAg
    ICAgIH0sCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICAjIGlmICdDU0lf
    Q0VQSEZTX1BST1ZJU0lPTkVSX1NFQ1JFVCcgZXhpc3RzLCB0aGVuIG9ubHkgYWRkICdyb29rLWNz
    aS1jZXBoZnMtcHJvdmlzaW9uZXInIFNlY3JldAogICAgICAgIGlmICgKICAgICAgICAgICAgc2Vs
    Zi5vdXRfbWFwWyJDU0lfQ0VQSEZTX1BST1ZJU0lPTkVSX1NFQ1JFVCJdCiAgICAgICAgICAgIGFu
    ZCBzZWxmLm91dF9tYXBbIkNTSV9DRVBIRlNfUFJPVklTSU9ORVJfU0VDUkVUX05BTUUiXQogICAg
    ICAgICk6CiAgICAgICAgICAgIGpzb25fb3V0LmFwcGVuZCgKICAgICAgICAgICAgICAgIHsKICAg
    ICAgICAgICAgICAgICAgICAibmFtZSI6IGYicm9vay17c2VsZi5vdXRfbWFwWydDU0lfQ0VQSEZT
    X1BST1ZJU0lPTkVSX1NFQ1JFVF9OQU1FJ119IiwKICAgICAgICAgICAgICAgICAgICAia2luZCI6
    ICJTZWNyZXQiLAogICAgICAgICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAgICAgICAg
    ICAgICAgICAiYWRtaW5JRCI6IHNlbGYuZ2V0X3VzZXJfaWQoCiAgICAgICAgICAgICAgICAgICAg
    ICAgICAgICBzZWxmLm91dF9tYXBbIkNTSV9DRVBIRlNfUFJPVklTSU9ORVJfU0VDUkVUX05BTUUi
    XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb24sCiAgICAgICAgICAgICAg
    ICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICJhZG1pbktleSI6IHNlbGYub3V0
    X21hcFsiQ1NJX0NFUEhGU19QUk9WSVNJT05FUl9TRUNSRVQiXSwKICAgICAgICAgICAgICAgICAg
    ICB9LAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgIyBpZiAnQ1NJX0NF
    UEhGU19OT0RFX1NFQ1JFVCcgZXhpc3RzLCB0aGVuIG9ubHkgYWRkICdyb29rLWNzaS1jZXBoZnMt
    bm9kZScgU2VjcmV0CiAgICAgICAgaWYgKAogICAgICAgICAgICBzZWxmLm91dF9tYXBbIkNTSV9D
    RVBIRlNfTk9ERV9TRUNSRVQiXQogICAgICAgICAgICBhbmQgc2VsZi5vdXRfbWFwWyJDU0lfQ0VQ
    SEZTX05PREVfU0VDUkVUX05BTUUiXQogICAgICAgICk6CiAgICAgICAgICAgIGpzb25fb3V0LmFw
    cGVuZCgKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibmFtZSI6IGYicm9v
    ay17c2VsZi5vdXRfbWFwWydDU0lfQ0VQSEZTX05PREVfU0VDUkVUX05BTUUnXX0iLAogICAgICAg
    ICAgICAgICAgICAgICJraW5kIjogIlNlY3JldCIsCiAgICAgICAgICAgICAgICAgICAgImRhdGEi
    OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJhZG1pbklEIjogc2VsZi5nZXRfdXNlcl9pZCgK
    ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3V0X21hcFsiQ1NJX0NFUEhGU19OT0RF
    X1NFQ1JFVF9OQU1FIl0sIGdlbmVyYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAg
    ICAgICAgICAgICAgICAgICAgICAgImFkbWluS2V5Ijogc2VsZi5vdXRfbWFwWyJDU0lfQ0VQSEZT
    X05PREVfU0VDUkVUIl0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0K
    ICAgICAgICAgICAgKQogICAgICAgICMgaWYgJ1JPT0tfRVhURVJOQUxfREFTSEJPQVJEX0xJTksn
    IGV4aXN0cywgdGhlbiBvbmx5IGFkZCAncm9vay1jZXBoLWRhc2hib2FyZC1saW5rJyBTZWNyZXQK
    ICAgICAgICBpZiBzZWxmLm91dF9tYXBbIlJPT0tfRVhURVJOQUxfREFTSEJPQVJEX0xJTksiXToK
    ICAgICAgICAgICAganNvbl9vdXQuYXBwZW5kKAogICAgICAgICAgICAgICAgewogICAgICAgICAg
    ICAgICAgICAgICJuYW1lIjogInJvb2stY2VwaC1kYXNoYm9hcmQtbGluayIsCiAgICAgICAgICAg
    ICAgICAgICAgImtpbmQiOiAiU2VjcmV0IiwKICAgICAgICAgICAgICAgICAgICAiZGF0YSI6IHsK
    ICAgICAgICAgICAgICAgICAgICAgICAgInVzZXJJRCI6ICJjZXBoLWRhc2hib2FyZC1saW5rIiwK
    ICAgICAgICAgICAgICAgICAgICAgICAgInVzZXJLZXkiOiBzZWxmLm91dF9tYXBbIlJPT0tfRVhU
    RVJOQUxfREFTSEJPQVJEX0xJTksiXSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAg
    ICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgIyBpZiAnUkFET1NfTkFNRVNQQUNFJyBleGlz
    dHMsIHRoZW4gb25seSBhZGQgdGhlICJSQURPU19OQU1FU1BBQ0UiIG5hbWVzcGFjZQogICAgICAg
    IGlmICgKICAgICAgICAgICAgc2VsZi5vdXRfbWFwWyJSQURPU19OQU1FU1BBQ0UiXQogICAgICAg
    ICAgICBhbmQgc2VsZi5vdXRfbWFwWyJSRVNUUklDVEVEX0FVVEhfUEVSTUlTU0lPTiJdCiAgICAg
    ICAgICAgIGFuZCBub3Qgc2VsZi5vdXRfbWFwWyJSQkRfTUVUQURBVEFfRUNfUE9PTF9OQU1FIl0K
    ICAgICAgICApOgogICAgICAgICAgICBqc29uX291dC5hcHBlbmQoCiAgICAgICAgICAgICAgICB7
    CiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAicmFkb3MtbmFtZXNwYWNlIiwKICAgICAgICAg
    ICAgICAgICAgICAia2luZCI6ICJDZXBoQmxvY2tQb29sUmFkb3NOYW1lc3BhY2UiLAogICAgICAg
    ICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAgICAgICAgICAgICAgICAicmFkb3NOYW1l
    c3BhY2VOYW1lIjogc2VsZi5vdXRfbWFwWyJSQURPU19OQU1FU1BBQ0UiXSwKICAgICAgICAgICAg
    ICAgICAgICAgICAgInBvb2wiOiBzZWxmLm91dF9tYXBbIlJCRF9QT09MX05BTUUiXSwKICAgICAg
    ICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAg
    ICAgIGpzb25fb3V0LmFwcGVuZCgKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAg
    ICAibmFtZSI6IGYiY2VwaC1yYmQtcmFkb3MtbmFtZXNwYWNlLXtzZWxmLm91dF9tYXBbJ1JBRE9T
    X05BTUVTUEFDRSddfSIsCiAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiU3RvcmFnZUNsYXNz
    IiwKICAgICAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAg
    InBvb2wiOiBzZWxmLm91dF9tYXBbIlJCRF9QT09MX05BTUUiXSwKICAgICAgICAgICAgICAgICAg
    ICAgICAgImNzaS5zdG9yYWdlLms4cy5pby9wcm92aXNpb25lci1zZWNyZXQtbmFtZSI6IGYicm9v
    ay17c2VsZi5vdXRfbWFwWydDU0lfUkJEX1BST1ZJU0lPTkVSX1NFQ1JFVF9OQU1FJ119IiwKICAg
    ICAgICAgICAgICAgICAgICAgICAgImNzaS5zdG9yYWdlLms4cy5pby9jb250cm9sbGVyLWV4cGFu
    ZC1zZWNyZXQtbmFtZSI6IGYicm9vay17c2VsZi5vdXRfbWFwWydDU0lfUkJEX1BST1ZJU0lPTkVS
    X1NFQ1JFVF9OQU1FJ119IiwKICAgICAgICAgICAgICAgICAgICAgICAgImNzaS5zdG9yYWdlLms4
    cy5pby9ub2RlLXN0YWdlLXNlY3JldC1uYW1lIjogZiJyb29rLXtzZWxmLm91dF9tYXBbJ0NTSV9S
    QkRfTk9ERV9TRUNSRVRfTkFNRSddfSIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAg
    ICAgICAgIH0KICAgICAgICAgICAgKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIHNlbGYu
    b3V0X21hcFsiUkJEX01FVEFEQVRBX0VDX1BPT0xfTkFNRSJdOgogICAgICAgICAgICAgICAganNv
    bl9vdXQuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAg
    ICAgIm5hbWUiOiAiY2VwaC1yYmQiLAogICAgICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJT
    dG9yYWdlQ2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAg
    ICAgICAgICAgICAgICAgICAgICJkYXRhUG9vbCI6IHNlbGYub3V0X21hcFsiUkJEX1BPT0xfTkFN
    RSJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInBvb2wiOiBzZWxmLm91dF9tYXBbIlJC
    RF9NRVRBREFUQV9FQ19QT09MX05BTUUiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJj
    c2kuc3RvcmFnZS5rOHMuaW8vcHJvdmlzaW9uZXItc2VjcmV0LW5hbWUiOiBmInJvb2ste3NlbGYu
    b3V0X21hcFsnQ1NJX1JCRF9QUk9WSVNJT05FUl9TRUNSRVRfTkFNRSddfSIsCiAgICAgICAgICAg
    ICAgICAgICAgICAgICAgICAiY3NpLnN0b3JhZ2UuazhzLmlvL2NvbnRyb2xsZXItZXhwYW5kLXNl
    Y3JldC1uYW1lIjogZiJyb29rLXtzZWxmLm91dF9tYXBbJ0NTSV9SQkRfUFJPVklTSU9ORVJfU0VD
    UkVUX05BTUUnXX0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImNzaS5zdG9yYWdlLms4
    cy5pby9ub2RlLXN0YWdlLXNlY3JldC1uYW1lIjogZiJyb29rLXtzZWxmLm91dF9tYXBbJ0NTSV9S
    QkRfTk9ERV9TRUNSRVRfTkFNRSddfSIsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAg
    ICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBlbHNlOgogICAg
    ICAgICAgICAgICAganNvbl9vdXQuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgIHsKICAgICAg
    ICAgICAgICAgICAgICAgICAgIm5hbWUiOiAiY2VwaC1yYmQiLAogICAgICAgICAgICAgICAgICAg
    ICAgICAia2luZCI6ICJTdG9yYWdlQ2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAiZGF0
    YSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwb29sIjogc2VsZi5vdXRfbWFwWyJS
    QkRfUE9PTF9OQU1FIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY3NpLnN0b3JhZ2Uu
    azhzLmlvL3Byb3Zpc2lvbmVyLXNlY3JldC1uYW1lIjogZiJyb29rLXtzZWxmLm91dF9tYXBbJ0NT
    SV9SQkRfUFJPVklTSU9ORVJfU0VDUkVUX05BTUUnXX0iLAogICAgICAgICAgICAgICAgICAgICAg
    ICAgICAgImNzaS5zdG9yYWdlLms4cy5pby9jb250cm9sbGVyLWV4cGFuZC1zZWNyZXQtbmFtZSI6
    IGYicm9vay17c2VsZi5vdXRfbWFwWydDU0lfUkJEX1BST1ZJU0lPTkVSX1NFQ1JFVF9OQU1FJ119
    IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjc2kuc3RvcmFnZS5rOHMuaW8vbm9kZS1z
    dGFnZS1zZWNyZXQtbmFtZSI6IGYicm9vay17c2VsZi5vdXRfbWFwWydDU0lfUkJEX05PREVfU0VD
    UkVUX05BTUUnXX0iLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAg
    ICAgIH0KICAgICAgICAgICAgICAgICkKCiAgICAgICAgIyBpZiAnVE9QT0xPR1lfUE9PTFMnLCAn
    VE9QT0xPR1lfRkFJTFVSRV9ET01BSU5fTEFCRUwnLCAnVE9QT0xPR1lfRkFJTFVSRV9ET01BSU5f
    VkFMVUVTJyAgZXhpc3RzLAogICAgICAgICMgdGhlbiBvbmx5IGFkZCAndG9wb2xvZ3knIFN0b3Jh
    Z2VDbGFzcwogICAgICAgIGlmICgKICAgICAgICAgICAgc2VsZi5vdXRfbWFwWyJUT1BPTE9HWV9Q
    T09MUyJdCiAgICAgICAgICAgIGFuZCBzZWxmLm91dF9tYXBbIlRPUE9MT0dZX0ZBSUxVUkVfRE9N
    QUlOX0xBQkVMIl0KICAgICAgICAgICAgYW5kIHNlbGYub3V0X21hcFsiVE9QT0xPR1lfRkFJTFVS
    RV9ET01BSU5fVkFMVUVTIl0KICAgICAgICApOgogICAgICAgICAgICBqc29uX291dC5hcHBlbmQo
    CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAiY2VwaC1yYmQt
    dG9wb2xvZ3kiLAogICAgICAgICAgICAgICAgICAgICJraW5kIjogIlN0b3JhZ2VDbGFzcyIsCiAg
    ICAgICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ0b3Bv
    bG9neUZhaWx1cmVEb21haW5MYWJlbCI6IHNlbGYub3V0X21hcFsKICAgICAgICAgICAgICAgICAg
    ICAgICAgICAgICJUT1BPTE9HWV9GQUlMVVJFX0RPTUFJTl9MQUJFTCIKICAgICAgICAgICAgICAg
    ICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgInRvcG9sb2d5RmFpbHVyZURvbWFp
    blZhbHVlcyI6IHNlbGYub3V0X21hcFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUT1BP
    TE9HWV9GQUlMVVJFX0RPTUFJTl9WQUxVRVMiCiAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAg
    ICAgICAgICAgICAgICAgICAgICAgICJ0b3BvbG9neVBvb2xzIjogc2VsZi5vdXRfbWFwWyJUT1BP
    TE9HWV9QT09MUyJdLAogICAgICAgICAgICAgICAgICAgICAgICAiY3NpLnN0b3JhZ2UuazhzLmlv
    L3Byb3Zpc2lvbmVyLXNlY3JldC1uYW1lIjogZiJyb29rLXtzZWxmLm91dF9tYXBbJ0NTSV9SQkRf
    UFJPVklTSU9ORVJfU0VDUkVUX05BTUUnXX0iLAogICAgICAgICAgICAgICAgICAgICAgICAiY3Np
    LnN0b3JhZ2UuazhzLmlvL2NvbnRyb2xsZXItZXhwYW5kLXNlY3JldC1uYW1lIjogZiJyb29rLXtz
    ZWxmLm91dF9tYXBbJ0NTSV9SQkRfUFJPVklTSU9ORVJfU0VDUkVUX05BTUUnXX0iLAogICAgICAg
    ICAgICAgICAgICAgICAgICAiY3NpLnN0b3JhZ2UuazhzLmlvL25vZGUtc3RhZ2Utc2VjcmV0LW5h
    bWUiOiBmInJvb2ste3NlbGYub3V0X21hcFsnQ1NJX1JCRF9OT0RFX1NFQ1JFVF9OQU1FJ119IiwK
    ICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApCgog
    ICAgICAgICMgaWYgJ0NFUEhGU19GU19OQU1FJyBleGlzdHMsIHRoZW4gb25seSBhZGQgJ2NlcGhm
    cycgU3RvcmFnZUNsYXNzCiAgICAgICAgaWYgc2VsZi5vdXRfbWFwWyJDRVBIRlNfRlNfTkFNRSJd
    OgogICAgICAgICAgICBqc29uX291dC5hcHBlbmQoCiAgICAgICAgICAgICAgICB7CiAgICAgICAg
    ICAgICAgICAgICAgIm5hbWUiOiAiY2VwaGZzIiwKICAgICAgICAgICAgICAgICAgICAia2luZCI6
    ICJTdG9yYWdlQ2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAg
    ICAgICAgICAgICAgICAiZnNOYW1lIjogc2VsZi5vdXRfbWFwWyJDRVBIRlNfRlNfTkFNRSJdLAog
    ICAgICAgICAgICAgICAgICAgICAgICAicG9vbCI6IHNlbGYub3V0X21hcFsiQ0VQSEZTX1BPT0xf
    TkFNRSJdLAogICAgICAgICAgICAgICAgICAgICAgICAiY3NpLnN0b3JhZ2UuazhzLmlvL3Byb3Zp
    c2lvbmVyLXNlY3JldC1uYW1lIjogZiJyb29rLXtzZWxmLm91dF9tYXBbJ0NTSV9DRVBIRlNfUFJP
    VklTSU9ORVJfU0VDUkVUX05BTUUnXX0iLAogICAgICAgICAgICAgICAgICAgICAgICAiY3NpLnN0
    b3JhZ2UuazhzLmlvL2NvbnRyb2xsZXItZXhwYW5kLXNlY3JldC1uYW1lIjogZiJyb29rLXtzZWxm
    Lm91dF9tYXBbJ0NTSV9DRVBIRlNfUFJPVklTSU9ORVJfU0VDUkVUX05BTUUnXX0iLAogICAgICAg
    ICAgICAgICAgICAgICAgICAiY3NpLnN0b3JhZ2UuazhzLmlvL25vZGUtc3RhZ2Utc2VjcmV0LW5h
    bWUiOiBmInJvb2ste3NlbGYub3V0X21hcFsnQ1NJX0NFUEhGU19OT0RFX1NFQ1JFVF9OQU1FJ119
    IiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAp
    CiAgICAgICAgIyBpZiAnUkdXX0VORFBPSU5UJyBleGlzdHMsIHRoZW4gb25seSBhZGQgJ2NlcGgt
    cmd3JyBTdG9yYWdlQ2xhc3MKICAgICAgICBpZiBzZWxmLm91dF9tYXBbIlJHV19FTkRQT0lOVCJd
    OgogICAgICAgICAgICBqc29uX291dC5hcHBlbmQoCiAgICAgICAgICAgICAgICB7CiAgICAgICAg
    ICAgICAgICAgICAgIm5hbWUiOiAiY2VwaC1yZ3ciLAogICAgICAgICAgICAgICAgICAgICJraW5k
    IjogIlN0b3JhZ2VDbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAg
    ICAgICAgICAgICAgICAgICJlbmRwb2ludCI6IHNlbGYub3V0X21hcFsiUkdXX0VORFBPSU5UIl0s
    CiAgICAgICAgICAgICAgICAgICAgICAgICJwb29sUHJlZml4Ijogc2VsZi5vdXRfbWFwWyJSR1df
    UE9PTF9QUkVGSVgiXSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfQog
    ICAgICAgICAgICApCiAgICAgICAgICAgIGpzb25fb3V0LmFwcGVuZCgKICAgICAgICAgICAgICAg
    IHsKICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICJyZ3ctYWRtaW4tb3BzLXVzZXIiLAogICAg
    ICAgICAgICAgICAgICAgICJraW5kIjogIlNlY3JldCIsCiAgICAgICAgICAgICAgICAgICAgImRh
    dGEiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJhY2Nlc3NLZXkiOiBzZWxmLm91dF9tYXBb
    IlJHV19BRE1JTl9PUFNfVVNFUl9BQ0NFU1NfS0VZIl0sCiAgICAgICAgICAgICAgICAgICAgICAg
    ICJzZWNyZXRLZXkiOiBzZWxmLm91dF9tYXBbIlJHV19BRE1JTl9PUFNfVVNFUl9TRUNSRVRfS0VZ
    Il0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg
    KQogICAgICAgICMgaWYgJ1JHV19UTFNfQ0VSVCcgZXhpc3RzLCB0aGVuIG9ubHkgYWRkIHRoZSAi
    Y2VwaC1yZ3ctdGxzLWNlcnQiIHNlY3JldAogICAgICAgIGlmIHNlbGYub3V0X21hcFsiUkdXX1RM
    U19DRVJUIl06CiAgICAgICAgICAgIGpzb25fb3V0LmFwcGVuZCgKICAgICAgICAgICAgICAgIHsK
    ICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICJjZXBoLXJndy10bHMtY2VydCIsCiAgICAgICAg
    ICAgICAgICAgICAgImtpbmQiOiAiU2VjcmV0IiwKICAgICAgICAgICAgICAgICAgICAiZGF0YSI6
    IHsKICAgICAgICAgICAgICAgICAgICAgICAgImNlcnQiOiBzZWxmLm91dF9tYXBbIlJHV19UTFNf
    Q0VSVCJdLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9CiAgICAgICAg
    ICAgICkKCiAgICAgICAgcmV0dXJuIGpzb24uZHVtcHMoanNvbl9vdXQpICsgTElORVNFUAoKICAg
    IGRlZiBnZXRfdXNlcl9pZChzZWxmLCB1c2VyX25hbWUsIGdlbmVyYXRpb24pOgogICAgICAgICIi
    IgogICAgICAgIFRoZSB1c2VyIElEIGlzIGNvbnN0cnVjdGVkIGFzICd1c2VyX25hbWUuZ2VuZXJh
    dGlvbicuCiAgICAgICAgIiIiCiAgICAgICAgaWYgZ2VuZXJhdGlvbiA9PSAwOgogICAgICAgICAg
    ICByZXR1cm4gdXNlcl9uYW1lCiAgICAgICAgcmV0dXJuIGYie3VzZXJfbmFtZX0ue2dlbmVyYXRp
    b259IgoKICAgIGRlZiB1cGdyYWRlX3VzZXJzX3Blcm1pc3Npb25zKHNlbGYsIGdlbmVyYXRpb24p
    OgogICAgICAgIHVzZXJzID0gWwogICAgICAgICAgICAiY2xpZW50LmNzaS1jZXBoZnMtbm9kZSIs
    CiAgICAgICAgICAgICJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lciIsCiAgICAgICAgICAg
    ICJjbGllbnQuY3NpLXJiZC1ub2RlIiwKICAgICAgICAgICAgImNsaWVudC5jc2ktcmJkLXByb3Zp
    c2lvbmVyIiwKICAgICAgICAgICAgImNsaWVudC5oZWFsdGhjaGVja2VyIiwKICAgICAgICBdCgog
    ICAgICAgIGlmIGdlbmVyYXRpb24gIT0gMDoKICAgICAgICAgICAgdXNlcnMgKz0gWwogICAgICAg
    ICAgICAgICAgZiJjbGllbnQuY3NpLWNlcGhmcy1ub2RlLntnZW5lcmF0aW9ufSIsCiAgICAgICAg
    ICAgICAgICBmImNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVyLntnZW5lcmF0aW9ufSIsCiAg
    ICAgICAgICAgICAgICBmImNsaWVudC5jc2ktcmJkLW5vZGUue2dlbmVyYXRpb259IiwKICAgICAg
    ICAgICAgICAgIGYiY2xpZW50LmNzaS1yYmQtcHJvdmlzaW9uZXIue2dlbmVyYXRpb259IiwKICAg
    ICAgICAgICAgICAgIGYiY2xpZW50LmhlYWx0aGNoZWNrZXIue2dlbmVyYXRpb259IiwKICAgICAg
    ICAgICAgXQoKICAgICAgICBpZiBzZWxmLnJ1bl9hc191c2VyICE9ICIiIGFuZCBzZWxmLnJ1bl9h
    c191c2VyIG5vdCBpbiB1c2VyczoKICAgICAgICAgICAgdXNlcnMuYXBwZW5kKHNlbGYucnVuX2Fz
    X3VzZXIpCiAgICAgICAgZm9yIHVzZXIgaW4gdXNlcnM6CiAgICAgICAgICAgIHNlbGYudXBncmFk
    ZV91c2VyX3Blcm1pc3Npb25zKHVzZXIsIGdlbmVyYXRpb24pCgogICAgZGVmIGdldF9yZ3dfcG9v
    bF9uYW1lX2R1cmluZ191cGdyYWRlKHNlbGYsIHVzZXIsIGNhcHMpOgogICAgICAgIGlmIHVzZXIg
    PT0gImNsaWVudC5oZWFsdGhjaGVja2VyIjoKICAgICAgICAgICAgIyB3aGVuIGFkbWluIGhhcyBu
    b3QgcHJvdmlkZWQgcmd3IHBvb2wgbmFtZSBkdXJpbmcgdXBncmFkZSwKICAgICAgICAgICAgIyBn
    ZXQgdGhlIHJndyBwb29sIG5hbWUgZnJvbSBjbGllbnQuaGVhbHRoY2hlY2tlciB1c2VyIHdoaWNo
    IHdhcyB1c2VkIGR1cmluZyBjb25uZWN0aW9uCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9hcmdf
    cGFyc2VyLnJnd19wb29sX3ByZWZpeDoKICAgICAgICAgICAgICAgICMgVG8gZ2V0IHZhbHVlICdk
    ZWZhdWx0JyB3aGljaCBpcyByZ3cgcG9vbCBuYW1lIGZyb20gJ2FsbG93IHJ3eCBwb29sPWRlZmF1
    bHQucmd3Lm1ldGEnCiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gciJwb29sPSguKj8pXC5yZ3dc
    Lm1ldGEiCiAgICAgICAgICAgICAgICBtYXRjaCA9IHJlLnNlYXJjaChwYXR0ZXJuLCBjYXBzKQog
    ICAgICAgICAgICAgICAgaWYgbWF0Y2g6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fYXJnX3Bh
    cnNlci5yZ3dfcG9vbF9wcmVmaXggPSBtYXRjaC5ncm91cCgxKQogICAgICAgICAgICAgICAgZWxz
    ZToKICAgICAgICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAog
    ICAgICAgICAgICAgICAgICAgICAgICAiZmFpbGVkIHRvIGdldCByZ3cgcG9vbCBuYW1lIGZvciB1
    cGdyYWRlIgogICAgICAgICAgICAgICAgICAgICkKCiAgICBkZWYgdXBncmFkZV91c2VyX3Blcm1p
    c3Npb25zKHNlbGYsIHVzZXIsIGdlbmVyYXRpb24pOgogICAgICAgICMgY2hlY2sgd2hldGhlciB0
    aGUgZ2l2ZW4gdXNlciBleGlzdHMgb3Igbm90CiAgICAgICAgY21kX2pzb24gPSB7InByZWZpeCI6
    ICJhdXRoIGdldCIsICJlbnRpdHkiOiBmInt1c2VyfSIsICJmb3JtYXQiOiAianNvbiJ9CiAgICAg
    ICAgcmV0X3ZhbCwganNvbl9vdXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pzb25fZ2Vu
    KGNtZF9qc29uKQogICAgICAgIGlmIHJldF92YWwgIT0gMCBvciBsZW4oanNvbl9vdXQpID09IDA6
    CiAgICAgICAgICAgIHByaW50KGYidXNlciB7dXNlcn0gbm90IGZvdW5kIGZvciB1cGdyYWRpbmcu
    IikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZXhpc3RpbmdfY2FwcyA9IGpzb25fb3V0WzBd
    WyJjYXBzIl0KICAgICAgICBzZWxmLmdldF9yZ3dfcG9vbF9uYW1lX2R1cmluZ191cGdyYWRlKHVz
    ZXIsIHN0cihleGlzdGluZ19jYXBzKSkKICAgICAgICBuZXdfY2FwLCBfID0gc2VsZi5nZXRfY2Fw
    c19hbmRfZW50aXR5KHVzZXIsIGdlbmVyYXRpb24pCiAgICAgICAgY2FwX2tleXMgPSBbIm1vbiIs
    ICJtZ3IiLCAib3NkIiwgIm1kcyJdCiAgICAgICAgY2FwcyA9IFtdCiAgICAgICAgZm9yIGVhY2hD
    YXAgaW4gY2FwX2tleXM6CiAgICAgICAgICAgIGN1cl9jYXBfdmFsdWVzID0gZXhpc3RpbmdfY2Fw
    cy5nZXQoZWFjaENhcCwgIiIpCiAgICAgICAgICAgIG5ld19jYXBfdmFsdWVzID0gbmV3X2NhcC5n
    ZXQoZWFjaENhcCwgIiIpCiAgICAgICAgICAgIGN1cl9jYXBfcGVybV9saXN0ID0gWwogICAgICAg
    ICAgICAgICAgeC5zdHJpcCgpIGZvciB4IGluIGN1cl9jYXBfdmFsdWVzLnNwbGl0KCIsIikgaWYg
    eC5zdHJpcCgpCiAgICAgICAgICAgIF0KICAgICAgICAgICAgbmV3X2NhcF9wZXJtX2xpc3QgPSBb
    CiAgICAgICAgICAgICAgICB4LnN0cmlwKCkgZm9yIHggaW4gbmV3X2NhcF92YWx1ZXMuc3BsaXQo
    IiwiKSBpZiB4LnN0cmlwKCkKICAgICAgICAgICAgXQogICAgICAgICAgICAjIGFwcGVuZCBuZXdf
    Y2FwX2xpc3QgdG8gY3VyX2NhcF9saXN0IHRvIG1haW50YWluIHRoZSBvcmRlciBvZiBjYXBzCiAg
    ICAgICAgICAgIGN1cl9jYXBfcGVybV9saXN0LmV4dGVuZChuZXdfY2FwX3Blcm1fbGlzdCkKICAg
    ICAgICAgICAgIyBlbGltaW5hdGUgZHVwbGljYXRlcyB3aXRob3V0IHVzaW5nICdzZXQnCiAgICAg
    ICAgICAgICMgc2V0IHJlLW9yZGVycyBpdGVtcyBpbiB0aGUgbGlzdCBhbmQgd2UgaGF2ZSB0byBr
    ZWVwIHRoZSBvcmRlcgogICAgICAgICAgICBuZXdfY2FwX2xpc3QgPSBbXQogICAgICAgICAgICBb
    bmV3X2NhcF9saXN0LmFwcGVuZCh4KSBmb3IgeCBpbiBjdXJfY2FwX3Blcm1fbGlzdCBpZiB4IG5v
    dCBpbiBuZXdfY2FwX2xpc3RdCiAgICAgICAgICAgIGV4aXN0aW5nX2NhcHNbZWFjaENhcF0gPSAi
    LCAiLmpvaW4obmV3X2NhcF9saXN0KQogICAgICAgICAgICBpZiBleGlzdGluZ19jYXBzW2VhY2hD
    YXBdOgogICAgICAgICAgICAgICAgY2Fwcy5hcHBlbmQoZWFjaENhcCkKICAgICAgICAgICAgICAg
    IGNhcHMuYXBwZW5kKGV4aXN0aW5nX2NhcHNbZWFjaENhcF0pCiAgICAgICAgY21kX2pzb24gPSB7
    CiAgICAgICAgICAgICJwcmVmaXgiOiAiYXV0aCBjYXBzIiwKICAgICAgICAgICAgImVudGl0eSI6
    IHVzZXIsCiAgICAgICAgICAgICJjYXBzIjogY2FwcywKICAgICAgICAgICAgImZvcm1hdCI6ICJq
    c29uIiwKICAgICAgICB9CiAgICAgICAgcmV0X3ZhbCwganNvbl9vdXQsIGVycl9tc2cgPSBzZWxm
    Ll9jb21tb25fY21kX2pzb25fZ2VuKGNtZF9qc29uKQogICAgICAgIGlmIHJldF92YWwgIT0gMDoK
    ICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAg
    ICAgIGYiJ2F1dGggY2FwcyB7dXNlcn0nIGNvbW1hbmQgZmFpbGVkLlxuIEVycm9yOiB7ZXJyX21z
    Z30iCiAgICAgICAgICAgICkKICAgICAgICBwcmludChmIlVwZGF0ZWQgdXNlciB7dXNlcn0gc3Vj
    Y2Vzc2Z1bGx5LiIpCgogICAgZGVmIG1haW4oc2VsZik6CiAgICAgICAgIyBzdXBwb3J0IGxlZ2Fj
    eSBmbGFnIHdpdGggdXBncmFkZXMKICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmNsdXN0ZXJf
    bmFtZToKICAgICAgICAgICAgc2VsZi5fYXJnX3BhcnNlci5rOHNfY2x1c3Rlcl9uYW1lID0gc2Vs
    Zi5fYXJnX3BhcnNlci5jbHVzdGVyX25hbWUKICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLms4c19j
    bHVzdGVyX25hbWUgPSAoCiAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuazhzX2NsdXN0ZXJf
    bmFtZS5sb3dlcigpCiAgICAgICAgKSAgIyBhbHdheXMgY29udmVydCBjbHVzdGVyIG5hbWUgdG8g
    bG93ZXJjYXNlIGNoYXJhY3RlcnMKICAgICAgICBnZW5lcmF0aW9uID0gMAogICAgICAgIGN1cnJl
    bnRfZ2VuZXJhdGlvbiA9IHNlbGYuZ2V0X2NlcGh4X2xhdGVzdF9rZXlfZ2VuZXJhdGlvbigpCiAg
    ICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5jZXBoeF9rZXlfcm90YXRlID09ICJyb3RhdGUiOgog
    ICAgICAgICAgICBnZW5lcmF0aW9uID0gY3VycmVudF9nZW5lcmF0aW9uICsgMQogICAgICAgIGVs
    aWYgc2VsZi5fYXJnX3BhcnNlci5jZXBoeF9rZXlfcm90YXRlID09ICJyZXZlcnQiIGFuZCBjdXJy
    ZW50X2dlbmVyYXRpb24gPiAwOgogICAgICAgICAgICBnZW5lcmF0aW9uID0gY3VycmVudF9nZW5l
    cmF0aW9uIC0gMQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGN1cnJlbnRfZ2VuZXJhdGlv
    biA9PSAtMToKICAgICAgICAgICAgICAgICMgY3JlYXRlIHRoZSBrZXlzIHdpdGggZ2VuZXJhdGlv
    biAwIGFzIG5vIGtleXMgZXhpc3QKICAgICAgICAgICAgICAgIGdlbmVyYXRpb24gPSAwCiAgICAg
    ICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uID0gY3VycmVudF9nZW5lcmF0
    aW9uCgogICAgICAgIGdlbmVyYXRlZF9vdXRwdXQgPSAiIgogICAgICAgIGlmIHNlbGYuX2FyZ19w
    YXJzZXIudXBncmFkZToKICAgICAgICAgICAgc2VsZi51cGdyYWRlX3VzZXJzX3Blcm1pc3Npb25z
    KGdlbmVyYXRpb24pCiAgICAgICAgZWxpZiBzZWxmLl9hcmdfcGFyc2VyLmZvcm1hdCA9PSAianNv
    biI6CiAgICAgICAgICAgIGdlbmVyYXRlZF9vdXRwdXQgPSBzZWxmLmdlbl9qc29uX291dChnZW5l
    cmF0aW9uKQogICAgICAgIGVsaWYgc2VsZi5fYXJnX3BhcnNlci5mb3JtYXQgPT0gImJhc2giOgog
    ICAgICAgICAgICBnZW5lcmF0ZWRfb3V0cHV0ID0gc2VsZi5nZW5fc2hlbGxfb3V0KGdlbmVyYXRp
    b24pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2Vw
    dGlvbigKICAgICAgICAgICAgICAgIGYiVW5zdXBwb3J0ZWQgZm9ybWF0OiB7c2VsZi5fYXJnX3Bh
    cnNlci5mb3JtYXR9IgogICAgICAgICAgICApCiAgICAgICAgcHJpbnQoZ2VuZXJhdGVkX291dHB1
    dCkKICAgICAgICBpZiBzZWxmLm91dHB1dF9maWxlIGFuZCBnZW5lcmF0ZWRfb3V0cHV0OgogICAg
    ICAgICAgICBmT3V0ID0gb3BlbihzZWxmLm91dHB1dF9maWxlLCBtb2RlPSJ3IiwgZW5jb2Rpbmc9
    IlVURi04IikKICAgICAgICAgICAgZk91dC53cml0ZShnZW5lcmF0ZWRfb3V0cHV0KQogICAgICAg
    ICAgICBmT3V0LmNsb3NlKCkKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
    IyMjIyMjIyMjIyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIE1BSU4gIyMjIyMjIyMjIyMjIyMjIyMj
    IyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwppZiBf
    X25hbWVfXyA9PSAiX19tYWluX18iOgogICAgcmpPYmogPSBSYWRvc0pTT04oKQogICAgdHJ5Ogog
    ICAgICAgIHJqT2JqLm1haW4oKQogICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24g
    YXMgZXJyOgogICAgICAgIHByaW50KGYiRXhlY3V0aW9uIEZhaWxlZDoge2Vycn0iKQogICAgICAg
    IHJhaXNlIGVycgogICAgZXhjZXB0IEtleUVycm9yIGFzIGtFcnI6CiAgICAgICAgcHJpbnQoZiJL
    ZXlFcnJvcjoge2tFcnJ9IikKICAgIGV4Y2VwdCBPU0Vycm9yIGFzIG9zRXJyOgogICAgICAgIHBy
    aW50KGYiRXJyb3Igd2hpbGUgdHJ5aW5nIHRvIG91dHB1dCB0aGUgZGF0YToge29zRXJyfSIpCiAg
    ICBmaW5hbGx5OgogICAgICAgIHJqT2JqLnNodXRkb3duKCkK
kind: ConfigMap
metadata:
  name: rook-ceph-external-cluster-script-config
